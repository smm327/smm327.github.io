<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://yoursite.com">
  <title>å­™è‹—è‹—çš„åšå®¢</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="å­™è‹—è‹—çš„åšå®¢">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="å­™è‹—è‹—çš„åšå®¢">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="å­™è‹—è‹—">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="å­™è‹—è‹—çš„åšå®¢" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.0cf68a.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

<meta name="generator" content="Hexo 4.1.1"></head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/img/avatar.jpg" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">å­™è‹—è‹—</a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">ä¸»é¡µ</a></li>
	        
				<li><a href="/tags/%E9%9A%8F%E7%AC%94/">éšç¬”</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">æ‰€æœ‰æ–‡ç« </a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">å‹é“¾</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">å…³äºæˆ‘</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/img/avatar.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">å­™è‹—è‹—</h1>
			</hgroup>
			
			
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 50%"><a href="/">ä¸»é¡µ</a></li>
		        
					<li style="width: 50%"><a href="/tags/%E9%9A%8F%E7%AC%94/">éšç¬”</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-Denoç®€ä»‹" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/01/11/Deno%E7%AE%80%E4%BB%8B/">Denoç®€ä»‹</a>
    </h1>
  

        
        <a href="/2021/01/11/Deno%E7%AE%80%E4%BB%8B/" class="archive-article-date">
  	<time datetime="2021-01-11T15:14:54.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2021-01-11</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://deno.land/" target="_blank" rel="noopener">Deno</a> æ˜¯ <a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">Node.js</a> ä¹‹çˆ¶ <a href="https://github.com/ry" target="_blank" rel="noopener">Ryan Dahl</a> çš„å¦ä¸€ä¸ªå¤§ä½œï¼Œå®ƒè·Ÿ Node çš„å…³ç³»æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;node&quot;.split(&quot;&quot;).sort().join(&quot;&quot;); &#x2F;&#x2F; Output: deno</span><br></pre></td></tr></table></figure>

<p>å“ˆå“ˆå“ˆå“ˆï¼Œè¿™æ˜¯å¼€ç©ç¬‘çš„ã€‚ä»¥ä¸‹æ˜¯æ­£æ–‡ï¼š</p>
<p>Deno æ˜¯ä¸€ä¸ªæ–°çš„è¿è¡Œæ—¶ï¼Œç”¨äºåœ¨ Web æµè§ˆå™¨ä¹‹å¤–æ‰§è¡Œ JavaScript å’Œ TypeScriptã€‚</p>
<p>ä¸ºä»€ä¹ˆä¼šå‡ºç° Deno å‘¢ï¼Ÿå®ƒä¸ Node çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä¸”å¬æˆ‘ä¸€ä¸€é“æ¥ã€‚</p>
<h2 id="å‡ºç°-Deno-çš„åŸå› "><a href="#å‡ºç°-Deno-çš„åŸå› " class="headerlink" title="å‡ºç° Deno çš„åŸå› "></a>å‡ºç° Deno çš„åŸå› </h2><p>åŠ¨æ€è¯­è¨€éƒ½æ˜¯å¾ˆæœ‰ç”¨çš„å·¥å…·ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨è„šæœ¬å¿«é€Ÿç®€æ´åœ°å°†å¤æ‚çš„ç³»ç»Ÿè¿æ¥åœ¨ä¸€èµ·å¹¶è¡¨è¾¾è‡ªå·±çš„æƒ³æ³•ï¼Œè€Œä¸å¿…é¡¾è™‘è¯¸å¦‚å†…å­˜ç®¡ç†æˆ–ç³»ç»Ÿæ„å»ºä¹‹ç±»çš„ç»†èŠ‚ã€‚JavaScript æ˜¯åº”ç”¨æœ€å¹¿æ³›çš„åŠ¨æ€è¯­è¨€ï¼Œåªéœ€ä¸€ä¸ª Web æµè§ˆå™¨å°±èƒ½åœ¨æ‰€æœ‰è®¾å¤‡ä¸Šè¿è¡Œã€‚Node.js æ˜¯ä¸€ä¸ªéå¸¸æˆåŠŸçš„è½¯ä»¶å¹³å°ï¼Œå®ƒèƒ½å¾ˆå¥½åœ°ç”¨äºæ„å»º Web å¼€å‘å·¥å…·ã€æ„å»ºç‹¬ç«‹çš„ Web æœåŠ¡å™¨ä»¥åŠå…¶ä»–è®¸å¤šç”¨ä¾‹ã€‚ä½†æ˜¯ï¼ŒNode æ˜¯åœ¨ 2009 å¹´è®¾è®¡çš„ï¼Œå½“æ—¶çš„ JavaScript ä¸ä»Šå¤©çš„è¯­è¨€ç‰ˆæœ¬æœ‰ç€æ˜æ˜¾çš„åŒºåˆ«ã€‚è¿™ä¸ª Node ä¹‹çˆ¶åœ¨<a href="https://www.youtube.com/watch?v=M3BM9TB-8yA" target="_blank" rel="noopener">â€œNode ä¸­çš„è®¾è®¡é”™è¯¯â€</a>æ¼”è®²ä¸­å¯¹è¿™ä¸€è¯é¢˜è¿›è¡Œäº†æ·±å…¥çš„è®¨è®ºã€‚<br>ç”±äº Node æ‹¥æœ‰å¤§é‡ç”¨æˆ·ï¼Œç³»ç»Ÿè¿›åŒ–èµ·æ¥æ—¢å›°éš¾åˆç¼“æ…¢ï¼Œè€Œ JavaScript ä¸å…¶å‘¨å›´çš„è½¯ä»¶åŸºç¡€æ¶æ„å·²ç»åœ¨æ”¹è¿›çš„é“è·¯ä¸Šèµ°å¾—å¤Ÿè¿œäº†ï¼Œæ˜¯åº”è¯¥åšä¸€äº›ç®€åŒ–å·¥ä½œäº†ã€‚æ‰€ä»¥ Ryan Dahl çš„å›¢é˜Ÿåˆåˆ›ä½œäº† Denoã€‚</p>
<h2 id="ä¸-Node-çš„åŒºåˆ«"><a href="#ä¸-Node-çš„åŒºåˆ«" class="headerlink" title="ä¸ Node çš„åŒºåˆ«"></a>ä¸ Node çš„åŒºåˆ«</h2><p>Deno å’Œ node çš„åŒºåˆ«å¯ä»¥é€šè¿‡ä¸‹é¢çš„è¡¨æ ¼æ¸…æ¥šçš„çœ‹å‡ºï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th>Node</th>
<th>Deno</th>
</tr>
</thead>
<tbody><tr>
<td>API å¼•ç”¨æ–¹å¼</td>
<td>æ¨¡å—å¯¼å…¥</td>
<td>å…¨å±€å¯¹è±¡</td>
</tr>
<tr>
<td>æ¨¡å—ç³»ç»Ÿ</td>
<td>CommonJS &amp; æ–°ç‰ˆ node å®éªŒæ€§ ES Module</td>
<td>ES Module æµè§ˆå™¨å®ç°</td>
</tr>
<tr>
<td>å®‰å…¨</td>
<td>æ— å®‰å…¨é™åˆ¶</td>
<td>é»˜è®¤å®‰å…¨</td>
</tr>
<tr>
<td>Typescript</td>
<td>ç¬¬ä¸‰æ–¹ï¼Œå¦‚é€šè¿‡ ts-node æ”¯æŒ</td>
<td>åŸç”Ÿæ”¯æŒ</td>
</tr>
<tr>
<td>åŒ…ç®¡ç†</td>
<td>npm + node_modules</td>
<td>åŸç”Ÿæ”¯æŒ</td>
</tr>
<tr>
<td>å¼‚æ­¥æ“ä½œ</td>
<td>å›è°ƒ</td>
<td>Promise</td>
</tr>
<tr>
<td>åŒ…åˆ†å‘</td>
<td>ä¸­å¿ƒåŒ– npmjs.com</td>
<td>å»ä¸­å¿ƒåŒ– import url</td>
</tr>
<tr>
<td>å…¥å£</td>
<td>package.json é…ç½®</td>
<td>import url ç›´æ¥å¼•å…¥</td>
</tr>
<tr>
<td>æ‰“åŒ…ã€æµ‹è¯•ã€æ ¼å¼åŒ–</td>
<td>ç¬¬ä¸‰æ–¹å¦‚ eslintã€gulpã€webpackã€babel ç­‰</td>
<td>åŸç”Ÿæ”¯æŒ</td>
</tr>
</tbody></table>
<h3 id="API-å¼•ç”¨æ–¹å¼ä¸åŒ"><a href="#API-å¼•ç”¨æ–¹å¼ä¸åŒ" class="headerlink" title="API å¼•ç”¨æ–¹å¼ä¸åŒ"></a>API å¼•ç”¨æ–¹å¼ä¸åŒ</h3><h5 id="node-æ¨¡å—å¯¼å…¥"><a href="#node-æ¨¡å—å¯¼å…¥" class="headerlink" title="node æ¨¡å—å¯¼å…¥"></a>node æ¨¡å—å¯¼å…¥</h5><p>node å†…ç½® API é€šè¿‡æ¨¡å—å¯¼å…¥çš„æ–¹å¼å¼•ç”¨ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const fs &#x3D; require(&quot;fs&quot;);</span><br><span class="line">fs.readFileSync(&quot;.&#x2F;data.txt&quot;);</span><br></pre></td></tr></table></figure>

<h5 id="deno-å…¨å±€å¯¹è±¡"><a href="#deno-å…¨å±€å¯¹è±¡" class="headerlink" title="deno å…¨å±€å¯¹è±¡"></a>deno å…¨å±€å¯¹è±¡</h5><p>deno åˆ™æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ Deno çš„å±æ€§å’Œæ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Deno.readFileSync(&quot;.&#x2F;data.txt&quot;);</span><br></pre></td></tr></table></figure>

<p>Deno æœ‰å“ªäº›æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹ä½†æ–¹æ³•æ‹¿åˆ°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line">deno &#x2F;&#x2F;</span><br><span class="line">&gt; Deno</span><br><span class="line">&#123;</span><br><span class="line">  core: &#123;</span><br><span class="line">    print: [Function],</span><br><span class="line">    recv: [Function],</span><br><span class="line">    send: [Function],</span><br><span class="line">    setMacrotaskCallback: [Function],</span><br><span class="line">    evalContext: [Function],</span><br><span class="line">    encode: [Function],</span><br><span class="line">    decode: [Function],</span><br><span class="line">    getPromiseDetails: [Function],</span><br><span class="line">    getProxyDetails: [Function],</span><br><span class="line">    shared: SharedArrayBuffer &#123;&#125;,</span><br><span class="line">    jsonOpAsync: [AsyncFunction: jsonOpAsync],</span><br><span class="line">    jsonOpSync: [Function: jsonOpSync],</span><br><span class="line">    setAsyncHandler: [Function: setAsyncHandler],</span><br><span class="line">    dispatch: [Function],</span><br><span class="line">    dispatchByName: [Function: dispatch],</span><br><span class="line">    ops: [Function: ops],</span><br><span class="line">    close: [Function: close],</span><br><span class="line">    resources: [Function: resources],</span><br><span class="line">    registerErrorClass: [Function: registerErrorClass],</span><br><span class="line">    getErrorClass: [Function: getErrorClass],</span><br><span class="line">    sharedQueueInit: [Function: init],</span><br><span class="line">    sharedQueue: &#123;</span><br><span class="line">      MAX_RECORDS: 100,</span><br><span class="line">      head: [Function: head],</span><br><span class="line">      numRecords: [Function: numRecords],</span><br><span class="line">      size: [Function: size],</span><br><span class="line">      push: [Function: push],</span><br><span class="line">      reset: [Function: reset],</span><br><span class="line">      shift: [Function: shift]</span><br><span class="line">    &#125;,</span><br><span class="line">    createPrepareStackTrace: [Function: createPrepareStackTrace]</span><br><span class="line">  &#125;,</span><br><span class="line">  internal: Symbol(Deno.internal),</span><br><span class="line">  resources: [Function: resources],</span><br><span class="line">  close: [Function: close],</span><br><span class="line">  test: [Function: test],</span><br><span class="line">  metrics: [Function: metrics],</span><br><span class="line">  Process: [Function: Process],</span><br><span class="line">  run: [Function: run],</span><br><span class="line">  isatty: [Function: isatty],</span><br><span class="line">  writeFileSync: [Function: writeFileSync],</span><br><span class="line">  writeFile: [AsyncFunction: writeFile],</span><br><span class="line">  writeTextFileSync: [Function: writeTextFileSync],</span><br><span class="line">  writeTextFile: [Function: writeTextFile],</span><br><span class="line">  readTextFile: [AsyncFunction: readTextFile],</span><br><span class="line">  readTextFileSync: [Function: readTextFileSync],</span><br><span class="line">  readFile: [AsyncFunction: readFile],</span><br><span class="line">  readFileSync: [Function: readFileSync],</span><br><span class="line">  watchFs: [Function: watchFs],</span><br><span class="line">  chmodSync: [Function: chmodSync],</span><br><span class="line">  chmod: [AsyncFunction: chmod],</span><br><span class="line">  chown: [AsyncFunction: chown],</span><br><span class="line">  chownSync: [Function: chownSync],</span><br><span class="line">  copyFileSync: [Function: copyFileSync],</span><br><span class="line">  cwd: [Function: cwd],</span><br><span class="line">  makeTempDirSync: [Function: makeTempDirSync],</span><br><span class="line">  makeTempDir: [Function: makeTempDir],</span><br><span class="line">  makeTempFileSync: [Function: makeTempFileSync],</span><br><span class="line">  makeTempFile: [Function: makeTempFile],</span><br><span class="line">  mkdirSync: [Function: mkdirSync],</span><br><span class="line">  mkdir: [AsyncFunction: mkdir],</span><br><span class="line">  chdir: [Function: chdir],</span><br><span class="line">  copyFile: [AsyncFunction: copyFile],</span><br><span class="line">  readDirSync: [Function: readDirSync],</span><br><span class="line">  readDir: [Function: readDir],</span><br><span class="line">  readLinkSync: [Function: readLinkSync],</span><br><span class="line">  readLink: [Function: readLink],</span><br><span class="line">  realPathSync: [Function: realPathSync],</span><br><span class="line">  realPath: [Function: realPath],</span><br><span class="line">  removeSync: [Function: removeSync],</span><br><span class="line">  remove: [AsyncFunction: remove],</span><br><span class="line">  renameSync: [Function: renameSync],</span><br><span class="line">  rename: [AsyncFunction: rename],</span><br><span class="line">  version: &#123; deno: &quot;1.7.0&quot;, v8: &quot;8.9.255.3&quot;, typescript: &quot;4.1.3&quot; &#125;,</span><br><span class="line">  build: &#123;</span><br><span class="line">    target: &quot;x86_64-apple-darwin&quot;,</span><br><span class="line">    arch: &quot;x86_64&quot;,</span><br><span class="line">    os: &quot;darwin&quot;,</span><br><span class="line">    vendor: &quot;apple&quot;,</span><br><span class="line">    env: undefined</span><br><span class="line">  &#125;,</span><br><span class="line">  statSync: [Function: statSync],</span><br><span class="line">  lstatSync: [Function: lstatSync],</span><br><span class="line">  stat: [AsyncFunction: stat],</span><br><span class="line">  lstat: [AsyncFunction: lstat],</span><br><span class="line">  truncateSync: [Function: truncateSync],</span><br><span class="line">  truncate: [AsyncFunction: truncate],</span><br><span class="line">  errors: &#123;</span><br><span class="line">    NotFound: [Function: NotFound],</span><br><span class="line">    PermissionDenied: [Function: PermissionDenied],</span><br><span class="line">    ConnectionRefused: [Function: ConnectionRefused],</span><br><span class="line">    ConnectionReset: [Function: ConnectionReset],</span><br><span class="line">    ConnectionAborted: [Function: ConnectionAborted],</span><br><span class="line">    NotConnected: [Function: NotConnected],</span><br><span class="line">    AddrInUse: [Function: AddrInUse],</span><br><span class="line">    AddrNotAvailable: [Function: AddrNotAvailable],</span><br><span class="line">    BrokenPipe: [Function: BrokenPipe],</span><br><span class="line">    AlreadyExists: [Function: AlreadyExists],</span><br><span class="line">    InvalidData: [Function: InvalidData],</span><br><span class="line">    TimedOut: [Function: TimedOut],</span><br><span class="line">    Interrupted: [Function: Interrupted],</span><br><span class="line">    WriteZero: [Function: WriteZero],</span><br><span class="line">    UnexpectedEof: [Function: UnexpectedEof],</span><br><span class="line">    BadResource: [Function: BadResource],</span><br><span class="line">    Http: [Function: Http],</span><br><span class="line">    Busy: [Function: Busy],</span><br><span class="line">    NotSupported: [Function: NotSupported]</span><br><span class="line">  &#125;,</span><br><span class="line">  customInspect: Symbol(Deno.customInspect),</span><br><span class="line">  inspect: [Function: inspect],</span><br><span class="line">  env: &#123;</span><br><span class="line">    get: [Function: getEnv],</span><br><span class="line">    toObject: [Function: toObject],</span><br><span class="line">    set: [Function: setEnv],</span><br><span class="line">    delete: [Function: deleteEnv]</span><br><span class="line">  &#125;,</span><br><span class="line">  exit: [Function: exit],</span><br><span class="line">  execPath: [Function: execPath],</span><br><span class="line">  Buffer: [Function: Buffer],</span><br><span class="line">  readAll: [AsyncFunction: readAll],</span><br><span class="line">  readAllSync: [Function: readAllSync],</span><br><span class="line">  writeAll: [AsyncFunction: writeAll],</span><br><span class="line">  writeAllSync: [Function: writeAllSync],</span><br><span class="line">  copy: [AsyncFunction: copy],</span><br><span class="line">  iter: [AsyncGeneratorFunction: iter],</span><br><span class="line">  iterSync: [GeneratorFunction: iterSync],</span><br><span class="line">  SeekMode: &#123; &quot;0&quot;: &quot;Start&quot;, &quot;1&quot;: &quot;Current&quot;, &quot;2&quot;: &quot;End&quot;, Start: 0, Current: 1, End: 2 &#125;,</span><br><span class="line">  read: [AsyncFunction: read],</span><br><span class="line">  readSync: [Function: readSync],</span><br><span class="line">  write: [AsyncFunction: write],</span><br><span class="line">  writeSync: [Function: writeSync],</span><br><span class="line">  File: [Function: File],</span><br><span class="line">  open: [AsyncFunction: open],</span><br><span class="line">  openSync: [Function: openSync],</span><br><span class="line">  create: [Function: create],</span><br><span class="line">  createSync: [Function: createSync],</span><br><span class="line">  stdin: Stdin &#123;&#125;,</span><br><span class="line">  stdout: Stdout &#123;&#125;,</span><br><span class="line">  stderr: Stderr &#123;&#125;,</span><br><span class="line">  seek: [Function: seek],</span><br><span class="line">  seekSync: [Function: seekSync],</span><br><span class="line">  connect: [AsyncFunction: connect],</span><br><span class="line">  listen: [Function: listen],</span><br><span class="line">  connectTls: [AsyncFunction: connectTls],</span><br><span class="line">  listenTls: [Function: listenTls],</span><br><span class="line">  sleepSync: [Function: sleepSync],</span><br><span class="line">  fsyncSync: [Function: fsyncSync],</span><br><span class="line">  fsync: [AsyncFunction: fsync],</span><br><span class="line">  fdatasyncSync: [Function: fdatasyncSync],</span><br><span class="line">  fdatasync: [AsyncFunction: fdatasync],</span><br><span class="line">  pid: 4984,</span><br><span class="line">  ppid: 4830,</span><br><span class="line">  noColor: false,</span><br><span class="line">  args: [],</span><br><span class="line">  mainModule: [Getter],</span><br><span class="line">  [Symbol(Deno.internal)]: &#123; lastEvalResult: [Circular] &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±ä¸Šé¢çš„å†…å®¹å¯ä»¥çœ‹åˆ° Deno çš„æ–¹æ³•å¾ˆå¤šï¼Œä¸”éƒ½æ˜¯å…¨å±€å¯¹è±¡ Deno ä¸‹çš„ï¼Œå¯ä»¥å¿«é€Ÿçš„æ‰¾åˆ°æƒ³ç”¨çš„æ–¹æ³•ã€‚</p>
<h3 id="æ¨¡å—ç³»ç»Ÿ"><a href="#æ¨¡å—ç³»ç»Ÿ" class="headerlink" title="æ¨¡å—ç³»ç»Ÿ"></a>æ¨¡å—ç³»ç»Ÿ</h3><p>node é‡‡ç”¨çš„æ˜¯ CommonJS è§„èŒƒï¼Œè€Œ deno åˆ™æ˜¯é‡‡ç”¨çš„ ES Module çš„æµè§ˆå™¨å®ç°ã€‚<br>å¦‚ä¸‹ï¼Œdeno å¯ä»¥é€šè¿‡ url å¼•å…¥ã€ç›¸å¯¹è·¯å¾„å¼•å…¥ã€ç»å¯¹è·¯å¾„å¼•å…¥ï¼Œä½†ä¸æ”¯æŒæ²¡æœ‰æ‰©å±•åçš„è·¯å¾„ï¼Œè¿™ä¸ª Ryan Dahl ä¹Ÿåœ¨æ¼”è®²ä¸­æåˆ°è¿‡ï¼Œnode å¦‚æ­¤è®¾è®¡ä¸æ˜ç¡®ï¼Œæ‰€ä»¥åœ¨ deno ä¸­å°±æ”¹ä¸ºå¿…é¡»è¦æŒ‡å®šæ‰©å±•åã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; æ”¯æŒ</span><br><span class="line">import * as fs from &quot;https:&#x2F;&#x2F;deno.land&#x2F;std&#x2F;fs&#x2F;mod.ts&quot;;</span><br><span class="line">import &#123; deepCopy &#125; from &quot;.&#x2F;deepCopy.js&quot;;</span><br><span class="line">import foo from &quot;&#x2F;foo.ts&quot;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ä¸æ”¯æŒ</span><br><span class="line">import foo from &quot;foo.ts&quot;;</span><br><span class="line">import bar from &quot;.&#x2F;bar&quot;; &#x2F;&#x2F; å¿…é¡»æŒ‡å®šæ‰©å±•å</span><br></pre></td></tr></table></figure>

<h3 id="å®‰å…¨"><a href="#å®‰å…¨" class="headerlink" title="å®‰å…¨"></a>å®‰å…¨</h3><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª js æ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import Aqua from &#39;https:&#x2F;&#x2F;deno.land&#x2F;x&#x2F;aqua&#x2F;aqua.ts&#39;;</span><br><span class="line">const app &#x3D; new Aqua(8000);</span><br><span class="line"></span><br><span class="line">app.get(&#39;&#x2F;&#39;, (req) &#x3D;&gt; &#123;</span><br><span class="line">  return &#39;Deno server running on port 8000&#39;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>è®©æˆ‘ä»¬æ¥å°è¯•è¿è¡Œä¸‹é¢çš„ä»£ç ï¼Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">deno run .&#x2F;deno-test.js</span><br><span class="line">&#x2F;&#x2F; è¾“å‡ºï¼š</span><br><span class="line">&#x2F;&#x2F; Check file:&#x2F;&#x2F;&#x2F;Users&#x2F;smm&#x2F;Desktop&#x2F;deno-test.js</span><br><span class="line"> error: Uncaught PermissionDenied: network access to &quot;0.0.0.0:8000&quot;, run again with the --allow-net flag</span><br><span class="line">    throw new ErrorClass(res.err.message);</span><br><span class="line">          ^</span><br><span class="line">    at processResponse (deno:core&#x2F;core.js:212:11)</span><br><span class="line">    at Object.jsonOpSync (deno:core&#x2F;core.js:235:12)</span><br><span class="line">    at opListen (deno:runtime&#x2F;js&#x2F;30_net.js:17:17)</span><br><span class="line">    at Object.listen (deno:runtime&#x2F;js&#x2F;30_net.js:183:17)</span><br><span class="line">    at serve (server.ts:306:25)</span><br><span class="line">    at new Aqua (aqua.ts:125:41)</span><br><span class="line">    at file:&#x2F;&#x2F;&#x2F;Users&#x2F;smm&#x2F;Desktop&#x2F;deno-test.js:2:13</span><br><span class="line"></span><br><span class="line">deno run --allow-net .&#x2F;deno-test.js</span><br><span class="line">&#x2F;&#x2F; æ­£å¸¸ï¼Œlocalhost:8000å¯è®¿é—®</span><br></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆå‘¢ï¼Œæ˜¯å› ä¸ºæƒé™å¼‚å¸¸ï¼Œéœ€è¦åŠ ä¸Š <code>--allow-net</code>ã€‚Deno è¦æ±‚ä½ å®šä¹‰æ˜¾å¼æ ‡å¿—ï¼ˆä¾‹å¦‚ï¼š<code>--allow-read</code>ã€<code>--allow-env</code>ï¼‰ï¼Œä»¥æˆäºˆä»£ç å¯¹ç½‘ç»œã€æ–‡ä»¶ç³»ç»Ÿã€å­è¿›ç¨‹ç­‰çš„ç›¸å…³æƒé™ï¼Œè¿™æ ·ï¼Œä½¿ç”¨ä»»ä½•ç¬¬ä¸‰æ–¹ä»£ç ï¼Œéƒ½ä¼šå—åˆ°æƒé™é™åˆ¶ï¼Œè¿™æ˜¯å¾ˆå®‰å…¨çš„ã€‚</p>
<h3 id="å…¼å®¹æµè§ˆå™¨-Api"><a href="#å…¼å®¹æµè§ˆå™¨-Api" class="headerlink" title="å…¼å®¹æµè§ˆå™¨ Api"></a>å…¼å®¹æµè§ˆå™¨ Api</h3><p>ä¸ºä»€ä¹ˆè¦å…¼å®¹æµè§ˆå™¨ API å‘¢ï¼Ÿnode åœ¨è®¾è®¡ä¹‹åˆï¼Œå…³äºè¾“å‡ºå‡½æ•°æœ¬æ¥å« print ä¹‹ç±»çš„ï¼Œåæ¥æœ‰äººæè®®ä¸ºä»€ä¹ˆä¸å« console.logï¼ŒRyan Dahl è§‰å¾—æŒºä¸é”™ï¼Œäºæ˜¯å°±æ¥çº³äº†æ„è§ã€‚è¿™ä¸ªè®¾è®¡å¹¶ä¸æ˜¯åˆ»æ„ä¸ºä¹‹ï¼Œè€Œ deno çš„è®¾è®¡åˆ™åˆ»æ„ä¸ºä¹‹ï¼Œé€šè¿‡ä¸æµè§ˆå™¨ API ä¿æŒä¸€è‡´ï¼Œæ¥å‡å°‘å¤§å®¶çš„è®¤çŸ¥ã€‚<br>æ€»ä¹‹ï¼šå¦‚æœæœåŠ¡ç«¯å’Œæµè§ˆå™¨ç«¯å­˜åœ¨ç›¸åŒæ¦‚å¿µï¼Œdeno å°±ä¸ä¼šåˆ›é€ æ–°çš„æ¦‚å¿µã€‚è¿™ä¸€ç‚¹å…¶å® node ä¹Ÿåœ¨åšï¼Œæ–°çš„ <a href="https://github.com/nodejs/node/blob/master/doc/changelogs/CHANGELOG_V14.md" target="_blank" rel="noopener">node 14.0 CHANGELOG</a> å°±ä¹ŸæåŠè¦å®ç° <code>Universal JavaScript</code> å’Œ <code>Spec compliance and Web Compatibility</code> çš„æ€æƒ³ã€‚</p>
<h3 id="æ”¯æŒ-ts"><a href="#æ”¯æŒ-ts" class="headerlink" title="æ”¯æŒ ts"></a>æ”¯æŒ ts</h3><p>Deno åŸç”Ÿæ”¯æŒ Typescriptï¼Œç±»å‹æ£€æŸ¥ä¹Ÿä¸€åŒå­˜åœ¨ã€‚ä½†æ˜¯ deno å›¢é˜Ÿåœ¨ç¼–å†™å†…éƒ¨ä»£ç æ—¶ï¼Œé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œä»–ä»¬åœ¨å†…éƒ¨ä»£ç ä¸­å°†åˆ é™¤æ‰€æœ‰æ„å»ºæ—¶ TS ç±»å‹æ£€æŸ¥ä¸æ†ç»‘ã€‚<br>å…·ä½“åŸå› ï¼Œå¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚<a href="https://startfunction.com/deno-will-stop-using-typescript/" target="_blank" rel="noopener">5 reasons why Deno will stop using TypeScript</a></p>
<h3 id="åˆ é™¤-node-modules"><a href="#åˆ é™¤-node-modules" class="headerlink" title="åˆ é™¤ node_modules"></a>åˆ é™¤ node_modules</h3><p>åœ¨ Ryan Dahl çš„æ¼”è®²ä¸­ï¼Œnode_modules æ˜¯ node ä¸­çš„è®¾è®¡é”™è¯¯ï¼Œä»–æœ¬æ„æ˜¯é€šè¿‡ node_modules å¯ä»¥æ¸…æ¥šçš„çŸ¥é“ä»£ç çš„å¼•ç”¨æ¥æºï¼Œä½†éšç€ node é¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼Œç»´æŠ¤ node_modules å’Œ node_modules ä¹‹é—´ä½†å¼•ç”¨ç»™ä»–ä»¬å¸¦æ¥äº†å¾ˆå¤šå›°æ‰°ï¼Œäºæ˜¯åœ¨ deno ä¸­å°±æ²¡æœ‰ node_modules äº†ï¼Œé‚£å®ƒæ˜¯æ€ä¹ˆè¿›è¡ŒåŒ…ç®¡ç†çš„å‘¢ï¼Ÿ<br>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ deno çš„ welcome çš„è¿è¡Œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/images/2021-01-11/welcome.png" alt="welcome"></p>
<p>å…¶ä¸­æœ‰ä¸¤æ­¥ï¼Œ<code>Download</code>å’Œ<code>Check</code>ï¼Œå®ƒä¼šåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶è¿›è¡Œ Downloadï¼Œå¹¶ä¸æ˜¯æ¯æ¬¡éƒ½ä¸‹è½½çš„ã€‚<br>é€šè¿‡ deno info å¯ä»¥æŸ¥çœ‹ä¾èµ–å…³ç³»ï¼Œç±»ä¼¼ <code>package.json</code>ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹ä¹‹å‰è¿è¡Œçš„ deno-test.js çš„ä¾èµ–å…³ç³»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"> deno info .&#x2F;deno-test.js</span><br><span class="line">local: &#x2F;Users&#x2F;smm&#x2F;Desktop&#x2F;deno-test.js</span><br><span class="line">type: JavaScript</span><br><span class="line">deps: 16 unique (total 87.49KB)</span><br><span class="line"></span><br><span class="line">file:&#x2F;&#x2F;&#x2F;Users&#x2F;smm&#x2F;Desktop&#x2F;deno-test.js (155B)</span><br><span class="line">â””â”€â”¬ https:&#x2F;&#x2F;deno.land&#x2F;x&#x2F;aqua&#x2F;aqua.ts (18.89KB)</span><br><span class="line">  â”œâ”€â”¬ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;http&#x2F;server.ts (10.74KB)</span><br><span class="line">  â”‚ â”œâ”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;_util&#x2F;assert.ts (405B)</span><br><span class="line">  â”‚ â”œâ”€â”¬ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;async&#x2F;mod.ts (202B)</span><br><span class="line">  â”‚ â”‚ â”œâ”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;async&#x2F;deferred.ts (1.01KB)</span><br><span class="line">  â”‚ â”‚ â”œâ”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;async&#x2F;delay.ts (279B)</span><br><span class="line">  â”‚ â”‚ â”œâ”€â”¬ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;async&#x2F;mux_async_iterator.ts (1.96KB)</span><br><span class="line">  â”‚ â”‚ â”‚ â””â”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;async&#x2F;deferred.ts *</span><br><span class="line">  â”‚ â”‚ â””â”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;async&#x2F;pool.ts (1.58KB)</span><br><span class="line">  â”‚ â”œâ”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;encoding&#x2F;utf8.ts (509B)</span><br><span class="line">  â”‚ â”œâ”€â”¬ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;http&#x2F;_io.ts (11.3KB)</span><br><span class="line">  â”‚ â”‚ â”œâ”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;_util&#x2F;assert.ts *</span><br><span class="line">  â”‚ â”‚ â”œâ”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;encoding&#x2F;utf8.ts *</span><br><span class="line">  â”‚ â”‚ â”œâ”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;http&#x2F;http_status.ts (5.93KB)</span><br><span class="line">  â”‚ â”‚ â”œâ”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;http&#x2F;server.ts *</span><br><span class="line">  â”‚ â”‚ â”œâ”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;io&#x2F;bufio.ts *</span><br><span class="line">  â”‚ â”‚ â””â”€â”¬ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;textproto&#x2F;mod.ts (4.59KB)</span><br><span class="line">  â”‚ â”‚   â”œâ”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;bytes&#x2F;mod.ts *</span><br><span class="line">  â”‚ â”‚   â””â”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;encoding&#x2F;utf8.ts *</span><br><span class="line">  â”‚ â””â”€â”¬ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;io&#x2F;bufio.ts (21.4KB)</span><br><span class="line">  â”‚   â”œâ”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;_util&#x2F;assert.ts *</span><br><span class="line">  â”‚   â””â”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;std@0.83.0&#x2F;bytes&#x2F;mod.ts (4.73KB)</span><br><span class="line">  â”œâ”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;x&#x2F;aqua@v1.0.17&#x2F;content_handler.ts (2.82KB)</span><br><span class="line">  â””â”€â”€ https:&#x2F;&#x2F;deno.land&#x2F;x&#x2F;aqua@v1.0.17&#x2F;router.ts (1.03KB)</span><br></pre></td></tr></table></figure>

<p>é‚£å‡å¦‚æ²¡æœ‰ç½‘ç»œäº†ï¼Œè¿™ä¸ªä»£ç æ˜¯ä¸æ˜¯å°±ä¸èƒ½è¿è¡Œäº†ï¼Ÿä¸æ˜¯ï¼Œåªéœ€è¦å°†ä¸Šé¢çš„ç¼“å­˜ç›®å½•å†…å®¹ï¼Œç›´æ¥æ‹·è´åˆ°æœåŠ¡å™¨å¹¶æŒ‡å®šç¯å¢ƒå˜é‡åˆ°å…¶ç›®å½•å³å¯ã€‚<br>é™¤æ­¤ä¹‹å¤–ï¼Œå¯ä¸é€šè¿‡<code>--reload</code>è¿›è¡Œæ›´æ–°ç¼“å­˜ï¼Œå¯ä»¥é€šè¿‡<code>cache</code>è¿›è¡Œä¾èµ–ç¼“å­˜ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deno run --reload .&#x2F;deno-test.js</span><br><span class="line">deno cache .&#x2F;deno-test.js</span><br></pre></td></tr></table></figure>

<h3 id="æ ‡å‡†æ¨¡å—-ä¸-node-API-å…¼å®¹"><a href="#æ ‡å‡†æ¨¡å—-ä¸-node-API-å…¼å®¹" class="headerlink" title="æ ‡å‡†æ¨¡å— ä¸ node API å…¼å®¹"></a>æ ‡å‡†æ¨¡å— ä¸ node API å…¼å®¹</h3><p>deno å¯¹äºè‡ªèº«ç›¸å¯¹äº node å°‘çš„å’Œç¤¾åŒºä¸­å¸¸ç”¨çš„åŠŸèƒ½ï¼Œæä¾›äº†<a href="https://deno.land/std@0.84.0" target="_blank" rel="noopener">æ ‡å‡†æ¨¡å—</a>ï¼Œå…¶ç‰¹ç‚¹æ˜¯ä¸ä¾èµ–éæ ‡å‡†æ¨¡å—çš„å†…å®¹ï¼Œè¾¾åˆ°ç¤¾åŒºå†…çš„æ¨¡å—å¼•ç”¨æœ€åéƒ½æ”¶æ•›äºæ ‡å‡†æ¨¡å—çš„æ•ˆæœã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; ç±»ä¼¼ node ä¸­ chalk åŒ…</span><br><span class="line">import &#123; bgRed, white &#125; from &quot;https:&#x2F;&#x2F;deno.land&#x2F;std&#x2F;fmt&#x2F;colors.ts&quot;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ç±»ä¼¼ node ä¸­çš„ uuid åŒ…</span><br><span class="line">import &#123; v4 &#125; from &quot;https:&#x2F;&#x2F;deno.land&#x2F;std&#x2F;uuid&#x2F;mod.ts&quot;;</span><br></pre></td></tr></table></figure>

<h3 id="å¼‚æ­¥æ“ä½œ"><a href="#å¼‚æ­¥æ“ä½œ" class="headerlink" title="å¼‚æ­¥æ“ä½œ"></a>å¼‚æ­¥æ“ä½œ</h3><p>Ryan Dahl è¯´è¿‡ï¼Œåœ¨è®¾è®¡ node æ—¶æœ‰äººæè®® Promise å¤„ç†å›è°ƒï¼Œä½†æ˜¯ä»–æ²¡å¬ï¼Œç°åœ¨è§‰å¾—éå¸¸æ„šè ¢ã€‚äºæ˜¯ï¼Œåœ¨ deno ä¸­å¼‚æ­¥æ“ä½œæ˜¯ç”¨ Promise å®ç°çš„ã€‚</p>
<h3 id="å•æ–‡ä»¶åˆ†å‘"><a href="#å•æ–‡ä»¶åˆ†å‘" class="headerlink" title="å•æ–‡ä»¶åˆ†å‘"></a>å•æ–‡ä»¶åˆ†å‘</h3><p>npm åŒ…å¿…é¡»è¦æœ‰ package.json æ–‡ä»¶ï¼Œç”¨æ¥æŒ‡æ˜åŒ…çš„ä¿¡æ¯ï¼ŒRyan Dahl è§‰å¾—è¿™äº›å­—æ®µæ‰°ä¹±äº†å¼€å‘è€…çš„è§†å¬ï¼Œæ‰€ä»¥åœ¨ deno ä¸­ä¸éœ€è¦ä»»ä½•é…ç½®æ–‡ä»¶ï¼Œç›´æ¥é€šè¿‡ import url å³å¯ã€‚</p>
<h3 id="å»ä¸­å¿ƒåŒ–ä»“åº“"><a href="#å»ä¸­å¿ƒåŒ–ä»“åº“" class="headerlink" title="å»ä¸­å¿ƒåŒ–ä»“åº“"></a>å»ä¸­å¿ƒåŒ–ä»“åº“</h3><p><a href="http://www.npmjs.com" target="_blank" rel="noopener">www.npmjs.com</a> æ˜¯æ¨åŠ¨ node è“¬å‹ƒå‘å±•çš„é‡è¦æ”¯ç‚¹ã€‚ä½†ä½œè€…è®¤ä¸ºå®ƒæ˜¯ä¸­å¿ƒåŒ–ä»“åº“ï¼Œè¿èƒŒäº†äº’è”ç½‘å»ä¸­å¿ƒåŒ–åŸåˆ™ã€‚æ‰€ä»¥ deno é€šè¿‡ import url çš„æ–¹å¼å¯ä»¥å¼•ç”¨äº’è”ç½‘ä»»ä½•ä¸€å¤„çš„ä»£ç ã€‚</p>
<h3 id="å»å¼€å‘ä¾èµ–"><a href="#å»å¼€å‘ä¾èµ–" class="headerlink" title="å»å¼€å‘ä¾èµ–"></a>å»å¼€å‘ä¾èµ–</h3><p>node ç¨‹åºä¸­ï¼Œå¼€å‘ä¾èµ–æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œä¾‹å¦‚ babelã€jestã€prettier ã€eslintã€gulp æˆ–è€… webpack ç­‰ç­‰ï¼Œåœ¨å¼€å‘å‰å°±æå¾—æˆ‘ä»¬ç­‹ç–²åŠ›å°½ã€‚<br>è€Œ deno é€šè¿‡å†…ç½®äº†ä¸€äº›å·¥å…·ï¼Œè§£å†³ä¸Šè¿°é—®é¢˜ã€‚</p>
<ul>
<li>deno bundleï¼šæ‰“åŒ…å‘½ä»¤ï¼Œç”¨æ¥æ›¿æ¢ babelã€gulp ä¸€ç±»å·¥å…·: ä¾‹å¦‚ï¼šdeno bundle ./mod.tsï¼›</li>
<li>deno fmtï¼šæ ¼å¼åŒ–å‘½ä»¤ï¼Œç”¨æ¥æ›¿æ¢ prettier ä¸€ç±»å·¥å…·ï¼Œä¾‹å¦‚ï¼šdeno fmt ./mod.tsï¼›</li>
<li>deno testï¼šè¿è¡Œæµ‹è¯•ä»£ç ï¼Œç”¨æ¥æ›¿æ¢ jest ä¸€ç±»å·¥å…·ï¼Œä¾‹å¦‚ deno test ./test.tsï¼›</li>
<li>deno lintï¼šä»£ç æ ¡æ£€ï¼ˆæš‚æœªå®ç°ï¼‰ï¼Œç”¨æ¥æ›¿æ¢ eslint ä¸€ç±»å·¥å…·ï¼Œä¾‹å¦‚ï¼šdeno lint ./mod.tsã€‚</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç”±ä¸Šé¢çš„ä»‹ç»å¯ä»¥çœ‹å‡ºï¼Œdeno æ˜¯ä½œè€… Ryan Dahl ä¿®æ­£äº† node çš„è®¾è®¡é”™è¯¯çš„å¦ä¸€å·¨ä½œï¼Œå®ƒçš„å­¦ä¹ è·¯ç¨‹è¿˜å¾ˆé•¿ï¼Œæˆ‘ä»¬ä¸€èµ·å»æ¢ç´¢å§ã€‚</p>
<h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><p><a href="https://www.infoq.cn/article/KRAc4z0zVZRc0dcWu3Xz" target="_blank" rel="noopener">https://www.infoq.cn/article/KRAc4z0zVZRc0dcWu3Xz</a><br><a href="https://juejin.cn/post/6844904158617665544" target="_blank" rel="noopener">https://juejin.cn/post/6844904158617665544</a><br><a href="https://startfunction.com/deno-will-stop-using-typescript/" target="_blank" rel="noopener">https://startfunction.com/deno-will-stop-using-typescript/</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2021/01/11/Deno%E7%AE%80%E4%BB%8B/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-å‡½æ•°è®¡ç®—ç‰ˆæœ¬ç®¡ç†" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/27/%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/">å‡½æ•°è®¡ç®—ç‰ˆæœ¬ç®¡ç†</a>
    </h1>
  

        
        <a href="/2020/12/27/%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/" class="archive-article-date">
  	<time datetime="2020-12-27T07:37:59.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-12-27</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœ¬æ–‡è®°å½•äº†ä½¿ç”¨é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—çš„ç‰ˆæœ¬ç®¡ç†åŠŸèƒ½ï¼Œä»¥åŠåœ¨å¼€å‘é›†æˆä¸­é‡åˆ°çš„é—®é¢˜ã€‚</p>
<h2 id="ç‰ˆæœ¬"><a href="#ç‰ˆæœ¬" class="headerlink" title="ç‰ˆæœ¬"></a>ç‰ˆæœ¬</h2><p>ç‰ˆæœ¬ç›¸å½“äºæœåŠ¡çš„å¿«ç…§ï¼ŒåŒ…æ‹¬æœåŠ¡çš„é…ç½®ã€æœåŠ¡å†…çš„å‡½æ•°ä»£ç åŠå‡½æ•°é…ç½®ï¼Œä¸åŒ…æ‹¬è§¦å‘å™¨ã€‚å½“æ‚¨å‘å¸ƒç‰ˆæœ¬æ—¶ï¼Œå‡½æ•°è®¡ç®—ä¼šä¸ºæœåŠ¡ç”Ÿæˆå¿«ç…§ï¼Œå¹¶è‡ªåŠ¨åˆ†é…ä¸€ä¸ªç‰ˆæœ¬å·ä¸å…¶å…³è”ï¼Œä»¥ä¾›åç»­ä½¿ç”¨ã€‚ç‰ˆæœ¬å‘å¸ƒåä¸èƒ½æ›´æ”¹ï¼Œä¸”ç‰ˆæœ¬å·å•è°ƒé€’å¢ï¼Œä¸ä¼šè¢«é‡å¤ä½¿ç”¨ã€‚</p>
<p>æ²¡æœ‰ç‰ˆæœ¬åŠŸèƒ½åœ¨æœåŠ¡ä¸Šçš„æ¯æ¬¡æ”¹åŠ¨éƒ½ä¼šç«‹å³å½±å“åˆ°çº¿ä¸Šï¼Œè™½ç„¶å‡½æ•°è®¡ç®—çš„é‡æ–°éƒ¨ç½²å¾ˆå¿«ï¼Œä½†å¯¹äºå·²ç»ä¸Šçº¿å¹¶å­˜åœ¨ä¸€å®šé‡ç”¨æˆ·çš„æœåŠ¡ï¼Œæ—¥åçš„å¼€å‘ã€æµ‹è¯•ä»¥åŠä¸Šçº¿å°±å¾ˆéº»çƒ¦ã€‚<br>æœ‰äº†ç‰ˆæœ¬åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥åœ¨æµ‹è¯•ç¨³å®šåå‘å¸ƒæœåŠ¡ç‰ˆæœ¬ï¼Œç”¨ç¨³å®šçš„ç‰ˆæœ¬æ¥æœåŠ¡çº¿ä¸Šè¯·æ±‚ï¼Œå¹¶ä¸”å¯ä»¥ç»§ç»­åœ¨ LATEST ç‰ˆæœ¬ä¸Šå¼€å‘æµ‹è¯•ã€‚<br><img src="/images/2020-12-27/version.png" alt="version"></p>
<h2 id="åˆ«å"><a href="#åˆ«å" class="headerlink" title="åˆ«å"></a>åˆ«å</h2><p>åˆ«åå¯ä»¥ç†è§£ä¸ºæŒ‡å‘ç‰¹å®šæœåŠ¡ç‰ˆæœ¬çš„æŒ‡é’ˆï¼Œæ˜¯å‡½æ•°è®¡ç®—çš„ä¸€ç§èµ„æºã€‚åˆ«åæ— æ³•è„±ç¦»æœåŠ¡æˆ–ç‰ˆæœ¬å•ç‹¬å­˜åœ¨ã€‚ä½¿ç”¨åˆ«åè®¿é—®æœåŠ¡æˆ–å‡½æ•°æ—¶ï¼Œå‡½æ•°è®¡ç®—ä¼šå°†åˆ«åè§£æä¸ºå…¶æŒ‡å‘çš„ç‰ˆæœ¬ï¼Œè°ƒç”¨æ–¹æ— éœ€äº†è§£åˆ«åæŒ‡å‘çš„å…·ä½“ç‰ˆæœ¬ã€‚å¯ä»¥åˆ©ç”¨åˆ«åæ¥è½»æ¾å®ç°å‘å¸ƒã€å›æ»šä»¥åŠç°åº¦å‘å¸ƒç­‰åŠŸèƒ½ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯æ˜¯é€šè¿‡ http è§¦å‘å™¨æ¥è°ƒç”¨å‡½æ•°çš„ï¼Œæ¯æ¬¡æ–°ç‰ˆæœ¬ä¸Šçº¿ï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ HTTP è§¦å‘å™¨å…³è”çš„ç‰ˆæœ¬å·ï¼Œå¹¶ä¸”åœ¨ä¿®æ”¹çš„è¿‡ç¨‹ä¸­ä¼šå½±å“å®¢æˆ·ç«¯çš„ä½¿ç”¨ã€‚è€Œå¦‚æœä½¿ç”¨åˆ«åè¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œæ‚¨å¯ä»¥å®ç°ç‰ˆæœ¬çš„å¹³æ»‘å‡çº§ã€‚</p>
<p>è®¾ç½®åˆ«å PROD æŒ‡å‘ç¨³å®šçš„ç‰ˆæœ¬ 1ã€‚è‹¥æ‚¨çš„å‡½æ•°ä¸‹å­˜åœ¨è§¦å‘å™¨ï¼Œè®¾ç½®è§¦å‘å™¨å…³è”åˆ«å PRODï¼Œå®¢æˆ·ç«¯ç›´æ¥é€šè¿‡åˆ«å PROD è°ƒç”¨ç‰ˆæœ¬ 1 ä¸‹çš„å‡½æ•°ã€‚</p>
<p><img src="/images/2020-12-27/version1.png" alt="version1"></p>
<p>å‘å¸ƒç‰ˆæœ¬ 1 åï¼Œç»§ç»­åœ¨ LATEST ç‰ˆæœ¬ä¸Šè¿›è¡Œæ–°åŠŸèƒ½çš„å¼€å‘ï¼Œè€Œçº¿ä¸Šå®¢æˆ·ç«¯æ˜¯é€šè¿‡åˆ«åè°ƒç”¨å¯¹åº”ç‰ˆæœ¬ä¸‹çš„å‡½æ•°ï¼Œæ‰€ä»¥çº¿ä¸Šè°ƒç”¨çš„è¿˜æ˜¯ç‰ˆæœ¬ 1ã€‚å½“æ–°åŠŸèƒ½ç»è¿‡æµ‹è¯•ç¨³å®šåï¼Œåˆ™å‘å¸ƒç‰ˆæœ¬ 2ï¼Œç„¶åå°†åˆ«å PROD æŒ‡å‘ç‰ˆæœ¬ 2ï¼Œè¿™æ ·å°±å®Œæˆç‰ˆæœ¬çš„æ›´æ–°ã€‚å¦‚æœç‰ˆæœ¬ 2 æœ‰é—®é¢˜ï¼Œéœ€è¦å›æ»šï¼Œåªéœ€è¦æŠŠåˆ«å PROD æŒ‡å›ç‰ˆæœ¬ 1 å³å¯ã€‚é€šè¿‡è¿™ç§æ–¹å¼å‘å¸ƒï¼Œä¸éœ€è¦é¢‘ç¹æ›´æ–°è§¦å‘å™¨ï¼Œä¹Ÿä¸ä¼šå½±å“å®¢æˆ·ç«¯çš„ä½¿ç”¨ã€‚<br><img src="/images/2020-12-27/prod.png" alt="prod"></p>
<p>å¦‚ä¸‹ä¸ºåœ¨ template.yml ä¸­è®¾ç½®åˆ«åï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Events:</span><br><span class="line">  httpTrigger:</span><br><span class="line">    Type: HTTP</span><br><span class="line">    Properties:</span><br><span class="line">      AuthType: ANONYMOUS</span><br><span class="line">      Qualifier: ONLINE</span><br><span class="line">      Methods:</span><br><span class="line">        - GET</span><br><span class="line">        - POST</span><br></pre></td></tr></table></figure>

<h2 id="ç‰ˆæœ¬æ“ä½œ"><a href="#ç‰ˆæœ¬æ“ä½œ" class="headerlink" title="ç‰ˆæœ¬æ“ä½œ"></a>ç‰ˆæœ¬æ“ä½œ</h2><p>å¯ä»¥åœ¨<a href="https://fc.console.aliyun.com/fc/overview/cn-beijing" target="_blank" rel="noopener">å‡½æ•°è®¡ç®—æ§åˆ¶å°</a>ä¸­æ“ä½œç‰ˆæœ¬ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/images/2020-12-27/console.png" alt="console"></p>
<h2 id="åˆ«åæ“ä½œ"><a href="#åˆ«åæ“ä½œ" class="headerlink" title="åˆ«åæ“ä½œ"></a>åˆ«åæ“ä½œ</h2><p>åŒæ ·åœ¨æ§åˆ¶å°ä¸­å¯ä»¥åˆ‡æ¢åˆ«åï¼Œå¦‚ä¸Šå›¾ç‰ˆæœ¬æ—è¾¹ã€‚</p>
<p>åœ¨è¿™é‡Œéœ€è¦æä¸€ä¸‹ï¼Œåˆ«åæ˜¯å¯ä»¥è®¾ç½®ç°åº¦çš„ï¼Œå®ƒçš„ç°åº¦æ˜¯æŒ‰æƒé‡åšçš„ï¼Œè·Ÿæˆ‘ä»¬ç›®å‰çš„ç°åº¦æ–¹æ¡ˆä¸ä¸€è‡´æ‰€ä»¥åœ¨è¿™é‡Œæ²¡æœ‰ä½¿ç”¨ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/images/2020-12-27/gray.png" alt="gray"></p>
<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>äº†è§£äº†ç›¸å…³çŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å¿ƒçš„ä½¿ç”¨å‡½æ•°è®¡ç®—çš„ç‰ˆæœ¬ç®¡ç†äº†ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçº¿ä¸Šç‰ˆæœ¬å‡ºé—®é¢˜äº†ï¼ ğŸ˜„<br>é¦–å…ˆï¼Œå…ˆçœ‹çœ‹å®˜æ–¹çš„ç¤ºä¾‹ï¼š<br><img src="/images/2020-12-27/example.png" alt="example"></p>
<ol>
<li>å‡†å¤‡å‡½æ•°ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°è¿™ä¸ªè¿‡ç¨‹äº†ã€‚</li>
<li>å‘å¸ƒç‰ˆæœ¬ï¼Œåœ¨å‡½æ•°æ§åˆ¶å°ä¸­å‘å¸ƒç‰ˆæœ¬</li>
<li>ä½¿ç”¨åˆ«ååˆ‡æ¢æµé‡ï¼Œåˆ›å»ºåˆ«åï¼Œå¹¶åœ¨è§¦å‘å™¨ä¸­ä½¿ç”¨åˆ«åï¼Œå‘å¸ƒç°åº¦ç‰ˆæœ¬ç¨³å®šåå…¨é‡åˆ‡æ¢è‡³æ–°ç‰ˆæœ¬</li>
</ol>
<p>ä½¿ç”¨åœ¨æˆ‘ä»¬æ—¥å¸¸çš„ sprint å¼€å‘ä¸­ï¼Œåˆ™æ˜¯åœ¨å¼€å‘å’Œé›†æˆæœŸé—´ä½¿ç”¨ LATEST ï¼ˆLATEST ä¸ºå‡½æ•°è®¡ç®—å ç”¨çš„é»˜è®¤ç‰ˆæœ¬åç§°ï¼Œåˆ«ååç§°ä¸èƒ½ä½¿ç”¨ï¼‰ç‰ˆæœ¬è¿›è¡Œå¼€å‘æµ‹è¯•ï¼Œç„¶ååœ¨é›†æˆç»“æŸåå‘å¸ƒç‰ˆæœ¬å¹¶ä¿®æ”¹åˆ«åã€‚<br>è¿™é‡Œéœ€è¦æ³¨æ„çš„é—®é¢˜æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼Œè¿™ä¹Ÿæ˜¯åœ¨ç›®å‰è¿™ä¸ªæ¨¡å¼çš„å¼€å‘ä¸­æ²¡æœ‰è§£å†³çš„é—®é¢˜ï¼Œè¿˜å¸Œæœ›å¤§å®¶èƒ½æä¾›å®è´µçš„æ„è§ï¼š</p>
<ol>
<li>åœ¨é›†æˆç»“æŸåéœ€è¦æ›´æ”¹å®¢æˆ·ç«¯çš„è°ƒç”¨è·¯å¾„ï¼Œæ”¹ä¸ºçº¿ä¸Šç‰ˆæœ¬</li>
<li>å› ä¸ºæˆ‘ä»¬çš„ä¸Šçº¿æ˜¯æœ‰ç°åº¦ç‰ˆæœ¬çš„ï¼Œè€Œè¿™é‡Œçš„åˆ«åä¿®æ”¹æ˜¯å…¨é‡ä¿®æ”¹ä¸ºæœ€æ–°å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥åœ¨å¼€å‘æ—¶éœ€è¦æ³¨æ„å¯¹å†å²ç‰ˆæœ¬çš„å…¼å®¹</li>
</ol>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><h4 id="1-å¦‚ä½•ç¡®å®šè¢«è°ƒç”¨çš„æœåŠ¡çš„ç‰ˆæœ¬ï¼Ÿ"><a href="#1-å¦‚ä½•ç¡®å®šè¢«è°ƒç”¨çš„æœåŠ¡çš„ç‰ˆæœ¬ï¼Ÿ" class="headerlink" title="1.å¦‚ä½•ç¡®å®šè¢«è°ƒç”¨çš„æœåŠ¡çš„ç‰ˆæœ¬ï¼Ÿ"></a>1.å¦‚ä½•ç¡®å®šè¢«è°ƒç”¨çš„æœåŠ¡çš„ç‰ˆæœ¬ï¼Ÿ</h4><ul>
<li>é€šè¿‡æ—¥å¿—ç¡®å®š</li>
<li>é€šè¿‡ context å…¥å‚ç¡®å®š</li>
<li>é€šè¿‡åŒæ­¥å‡½æ•°è°ƒç”¨å“åº”ç¡®å®š</li>
</ul>
<h4 id="2-å¦‚ä½•æŸ¥çœ‹ä¸åŒç‰ˆæœ¬çš„æ—¥å¿—"><a href="#2-å¦‚ä½•æŸ¥çœ‹ä¸åŒç‰ˆæœ¬çš„æ—¥å¿—" class="headerlink" title="2.å¦‚ä½•æŸ¥çœ‹ä¸åŒç‰ˆæœ¬çš„æ—¥å¿—"></a>2.å¦‚ä½•æŸ¥çœ‹ä¸åŒç‰ˆæœ¬çš„æ—¥å¿—</h4><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥åœ¨å‡½æ•°æ§åˆ¶å°ä¸­åˆ‡æ¢ä¸åŒçš„æœåŠ¡ç‰ˆæœ¬ï¼š<br><img src="/images/2020-12-27/show.png" alt="show"></p>
<h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><p><a href="https://help.aliyun.com/document_detail/96464.html?spm=a2c4g.11186623.3.3.50d91caccywKsC" target="_blank" rel="noopener">https://help.aliyun.com/document_detail/96464.html?spm=a2c4g.11186623.3.3.50d91caccywKsC</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/12/27/%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-åˆæ¢NextJsåŠéƒ¨ç½²" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/07/%E5%88%9D%E6%8E%A2NextJs%E5%8F%8A%E9%83%A8%E7%BD%B2/">åˆæ¢NextJsåŠéƒ¨ç½²</a>
    </h1>
  

        
        <a href="/2020/11/07/%E5%88%9D%E6%8E%A2NextJs%E5%8F%8A%E9%83%A8%E7%BD%B2/" class="archive-article-date">
  	<time datetime="2020-11-07T08:46:54.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-11-07</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Next.js æ˜¯ä¸€ç§ React çš„æœåŠ¡ç«¯æ¸²æŸ“æ¡†æ¶ï¼Œé›†æˆåº¦æé«˜ï¼Œæ¡†æ¶è‡ªèº«é›†æˆäº† webpackã€babelã€express ç­‰ï¼Œä½¿å¾—å¼€å‘è€…ä»…ä¾èµ– Nextã€reactã€react-dom å°±å¯ä»¥éå¸¸æ–¹ä¾¿åœ°æ„å»ºè‡ªå·±çš„ SSR React åº”ç”¨ï¼Œå¼€å‘è€…ç”šè‡³éƒ½ä¸ç”¨å…³å¿ƒè·¯ç”±ã€‚Next.js çš„é«˜åº¦é›†æˆæ€§ï¼Œæ˜“äºå®ç°ä»£ç åˆ†å‰²ã€è·¯ç”±è·³è½¬ã€çƒ­æ›´æ–°ä»¥åŠæœåŠ¡ç«¯æ¸²æŸ“å’Œå‰ç«¯æ¸²æŸ“ã€‚</p>
<h2 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><p>åŒ React ä¸€æ ·ï¼ŒNext ä¹Ÿæœ‰è‡ªå·±çš„è„šæ‰‹æ¶å·¥å…·ï¼š create-next-appï¼Œé€šè¿‡ä»¥ä¸‹ä»£ç å°±å¯ä»¥å¿«é€Ÿåˆ›å»ºä¸€ä¸ª next åº”ç”¨.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx create-next-app</span><br><span class="line"># or</span><br><span class="line">yarn create next-app</span><br></pre></td></tr></table></figure>

<h2 id="åŸºæœ¬ç‰¹æ€§"><a href="#åŸºæœ¬ç‰¹æ€§" class="headerlink" title="åŸºæœ¬ç‰¹æ€§"></a>åŸºæœ¬ç‰¹æ€§</h2><h3 id="page"><a href="#page" class="headerlink" title="page"></a>page</h3><p>åœ¨ Next.js ä¸­ï¼Œä¸€ä¸ª pageï¼ˆé¡µé¢ï¼‰ å°±æ˜¯ä¸€ä¸ªä» .jsã€jsxã€.ts æˆ– .tsx æ–‡ä»¶å¯¼å‡ºï¼ˆexportï¼‰çš„ React ç»„ä»¶ ï¼Œè¿™äº›æ–‡ä»¶å­˜æ”¾åœ¨ pages ç›®å½•ä¸‹ã€‚æ¯ä¸ª pageï¼ˆé¡µé¢ï¼‰éƒ½ä½¿ç”¨å…¶æ–‡ä»¶åä½œä¸ºè·¯ç”±ï¼ˆrouteï¼‰ã€‚</p>
<p>Next.js æ”¯æŒå…·æœ‰åŠ¨æ€è·¯ç”±çš„ pagesï¼ˆé¡µé¢ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªå‘½åä¸º pages/posts/[id].js çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡ posts/1ã€posts/2 ç­‰ç±»ä¼¼çš„è·¯å¾„è¿›è¡Œè®¿é—®ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNext.js å°† é¢„æ¸²æŸ“ æ¯ä¸ª pageï¼ˆé¡µé¢ï¼‰ã€‚è¿™æ„å‘³ç€ Next.js ä¼šé¢„å…ˆä¸ºæ¯ä¸ªé¡µé¢ç”Ÿæˆ HTML æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç”±å®¢æˆ·ç«¯ JavaScript æ¥å®Œæˆã€‚é¢„æ¸²æŸ“å¯ä»¥å¸¦æ¥æ›´å¥½çš„æ€§èƒ½å’Œ SEO æ•ˆæœã€‚</p>
<h3 id="æ•°æ®è·å–"><a href="#æ•°æ®è·å–" class="headerlink" title="æ•°æ®è·å–"></a>æ•°æ®è·å–</h3><ul>
<li>getStaticProps (é™æ€ç”Ÿæˆ): åœ¨æ„å»ºæ—¶è·å–æ•°æ®ã€‚</li>
<li>getStaticPaths (é™æ€ç”Ÿæˆ): æŒ‡å®šåŠ¨æ€è·¯ç”±ä»¥æ ¹æ®æ•°æ®è¿›è¡Œé¢„æ¸²æŸ“ã€‚</li>
<li>getServerSideProps (æœåŠ¡å™¨ç«¯æ¸²æŸ“): åœ¨æ¯ä¸ªè¯·æ±‚ä¸Šè·å–æ•°æ®ã€‚</li>
</ul>
<p>getInitialProps ï¼ˆæ¨èä½¿ç”¨ getStaticProps æˆ– getServerSidePropsï¼šv9.3 ä»¥ä¸Šï¼‰åœ¨é¡µé¢ä¸­å¯ç”¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œå¹¶å…è®¸æ‚¨è¿›è¡Œåˆå§‹æ•°æ®å¡«å……ï¼Œè¿™æ„å‘³ç€å‘é€åŒ…å«æœåŠ¡å™¨ä¸­å·²å¡«å……æ•°æ®çš„é¡µé¢ã€‚ è¿™å¯¹äº SEO å°¤å…¶æœ‰ç”¨ã€‚å®ƒæ˜¯ä¸€ä¸ª async çš„æ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªç§°ä¸º context çš„å‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…·æœ‰ä»¥ä¸‹å±æ€§çš„å¯¹è±¡ï¼š</p>
<ul>
<li>pathname - å½“å‰è·¯å¾„ï¼Œæ˜¯/pages ä¸­é¡µé¢çš„è·¯å¾„</li>
<li>query - URL çš„æŸ¥è¯¢å­—ç¬¦ä¸²éƒ¨åˆ†è¢«è§£æä¸ºå¯¹è±¡</li>
<li>asPath - æµè§ˆå™¨ä¸­æ˜¾ç¤ºçš„å®é™…è·¯å¾„ï¼ˆåŒ…æ‹¬æŸ¥è¯¢ï¼‰çš„å­—ç¬¦ä¸²</li>
<li>req - HTTP request object (server only)</li>
<li>res - HTTP response object (server only)</li>
<li>err - æ¸²æŸ“æœŸé—´é‡åˆ°ä»»ä½•é”™è¯¯çš„é”™è¯¯å¯¹è±¡</li>
</ul>
<h3 id="å†…ç½®-CSS-æ”¯æŒ"><a href="#å†…ç½®-CSS-æ”¯æŒ" class="headerlink" title="å†…ç½® CSS æ”¯æŒ"></a>å†…ç½® CSS æ”¯æŒ</h3><p>Next.js å…è®¸ä½ åœ¨ JavaScript æ–‡ä»¶ä¸­å¯¼å…¥ï¼ˆimportï¼‰ CSS æ–‡ä»¶ã€‚ å› ä¸º Next.js æ‰©å±•äº† JavaScript ä¸­çš„ import çš„æ¦‚å¿µï¼Œè®©è¿™ä¸€åŠŸèƒ½ç§°ä¸ºå¯èƒ½ã€‚Next.js ä¹Ÿæ”¯æŒç»„ä»¶çº§æ·»åŠ  CSSã€‚Next.js å…è®¸ä½ å¯¼å…¥ï¼ˆimportï¼‰å…·æœ‰ .scss å’Œ .sass æ‰©å±•åçš„ Sass æ–‡ä»¶ã€‚</p>
<p>ä½†å¯¹äº less å’Œ stylus çš„æ”¯æŒï¼Œéœ€è¦å¼•å…¥å¦‚ä¸‹æ’ä»¶ï¼š</p>
<ul>
<li><a href="https://github.com/vercel/next-plugins/tree/master/packages/next-less" target="_blank" rel="noopener">@zeit/next-less</a></li>
<li><a href="https://github.com/vercel/next-plugins/tree/master/packages/next-stylus" target="_blank" rel="noopener">@zeit/next-stylus</a></li>
</ul>
<h3 id="é™æ€æ–‡ä»¶æœåŠ¡"><a href="#é™æ€æ–‡ä»¶æœåŠ¡" class="headerlink" title="é™æ€æ–‡ä»¶æœåŠ¡"></a>é™æ€æ–‡ä»¶æœåŠ¡</h3><p>Next.js æ”¯æŒå°†é™æ€æ–‡ä»¶ï¼ˆä¾‹å¦‚å›¾ç‰‡ï¼‰å­˜æ”¾åˆ°æ ¹ç›®å½•ä¸‹çš„ public ç›®å½•ä¸­ï¼Œå¹¶å¯¹å¤–æä¾›è®¿é—®ã€‚public ç›®å½•ä¸‹å­˜æ”¾çš„é™æ€æ–‡ä»¶çš„å¯¹å¤–è®¿é—®è·¯å¾„ä»¥ (/) ä½œä¸ºèµ·å§‹è·¯å¾„ã€‚</p>
<h3 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h3><p>Next.js æ”¯æŒ tsï¼Œé¦–å…ˆï¼Œåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªç©ºçš„ tsconfig.json æ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch tsconfig.json</span><br></pre></td></tr></table></figure>

<p>ç„¶åè¿è¡Œ npm run dev,Next ä¼šæŒ‡å¯¼ä½ å®Œæˆæ‰€æœ‰è½¯ä»¶åŒ…çš„å®‰è£…åŠè®¾ç½®ã€‚</p>
<p>å¦‚æœæ‚¨å…·æœ‰è‡ªå®šä¹‰åº”ç”¨ç¨‹åºï¼Œåˆ™å¯ä»¥ä½¿ç”¨å†…ç½®ç±»å‹ AppProps å¹¶å°†æ–‡ä»¶åæ›´æ”¹ä¸º./pages/_app.tsxï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import type &#123; AppProps &#x2F;*, AppContext *&#x2F; &#125; from &#39;next&#x2F;app&#39;</span><br><span class="line"></span><br><span class="line">function MyApp(&#123; Component, pageProps &#125;: AppProps) &#123;</span><br><span class="line">  return &lt;Component &#123;...pageProps&#125; &#x2F;&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default MyApp</span><br></pre></td></tr></table></figure>

<h2 id="é«˜çº§ç‰¹æ€§"><a href="#é«˜çº§ç‰¹æ€§" class="headerlink" title="é«˜çº§ç‰¹æ€§"></a>é«˜çº§ç‰¹æ€§</h2><h3 id="åŠ¨æ€å¯¼å…¥"><a href="#åŠ¨æ€å¯¼å…¥" class="headerlink" title="åŠ¨æ€å¯¼å…¥"></a>åŠ¨æ€å¯¼å…¥</h3><p>Next æ”¯æŒåŠ¨æ€å¯¼å…¥ç»„ä»¶ï¼Œä½†å¯¼å…¥çš„éƒ½æ˜¯æ–‡ä»¶ default çš„ exportï¼Œå¦‚éœ€é‡å‘½åéœ€è¦å¦‚ä¸‹æ“ä½œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import(&#39;..&#x2F;components&#x2F;hello&#39;).then((mod) &#x3D;&gt; mod.Hello)</span><br></pre></td></tr></table></figure>

<p>Next ä¹Ÿå¯ä»¥åŠ  loading çŠ¶æ€å’Œé ssr æ¸²æŸ“ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import dynamic from &#39;next&#x2F;dynamic&#39;</span><br><span class="line"></span><br><span class="line">const DynamicComponentWithCustomLoading &#x3D; dynamic(</span><br><span class="line">  () &#x3D;&gt; import(&#39;..&#x2F;components&#x2F;hello&#39;),</span><br><span class="line">  &#123;</span><br><span class="line">    loading: () &#x3D;&gt; &lt;p&gt;...&lt;&#x2F;p&gt;,</span><br><span class="line">    ssr: false</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">function Home() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Header &#x2F;&gt;</span><br><span class="line">      &lt;DynamicComponentWithCustomLoading &#x2F;&gt;</span><br><span class="line">      &lt;p&gt;HOME PAGE is here!&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Home</span><br></pre></td></tr></table></figure>

<h3 id="è‡ªå®šä¹‰æœåŠ¡å™¨"><a href="#è‡ªå®šä¹‰æœåŠ¡å™¨" class="headerlink" title="è‡ªå®šä¹‰æœåŠ¡å™¨"></a>è‡ªå®šä¹‰æœåŠ¡å™¨</h3><p>æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰æœåŠ¡å™¨ã€Express é›†æˆã€Hapi é›†æˆã€Koa é›†æˆåŠ SSR Cachingã€‚éœ€è¦åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º server.js å¹¶ä¿®æ”¹ package.json çš„ scriptï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;dev&quot;: &quot;node server.js&quot;,</span><br><span class="line">  &quot;build&quot;: &quot;next build&quot;,</span><br><span class="line">  &quot;start&quot;: &quot;NODE_ENV&#x3D;production node server.js&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å‡½æ•°è®¡ç®—éƒ¨ç½²"><a href="#å‡½æ•°è®¡ç®—éƒ¨ç½²" class="headerlink" title="å‡½æ•°è®¡ç®—éƒ¨ç½²"></a>å‡½æ•°è®¡ç®—éƒ¨ç½²</h2><p>é¦–å…ˆè¿›è¡Œ npm run buildï¼Œ ç„¶åç›´æ¥æ‰§è¡Œ fun deploy -y å‘½ä»¤å°†é¡¹ç›®éƒ¨ç½²è‡³å‡½æ•°è®¡ç®—ã€‚</p>
<p>éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨å¯ä»¥åœ¨æ—¥å¿—ä¸­çœ‹åˆ°å‡½æ•°è®¡ç®—ä¸ºæ‚¨ç”Ÿæˆçš„ä¸´æ—¶åŸŸåï¼Œé€šè¿‡è¿™ä¸ªä¸´æ—¶åŸŸåæ‚¨å¯ç›´æ¥è®¿é—®åˆšéƒ¨ç½²çš„åº”ç”¨ã€‚ä¸è¿‡è¿™ä¸ªé“¾æ¥æ˜¯æœ‰æ—¶æ•ˆçš„ï¼Œæœ‰ä¸ªå¤±æ•ˆæ—¶é—´ä»¥åŠæ¯å¤©è®¿é—®çš„æ¬¡æ•°ã€‚</p>
<h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><p><a href="https://help.aliyun.com/document_detail/157692.html?spm=a2c4g.11186623.6.771.6305298bdlZc09" target="_blank" rel="noopener">https://help.aliyun.com/document_detail/157692.html?spm=a2c4g.11186623.6.771.6305298bdlZc09</a><br><a href="https://help.aliyun.com/document_detail/146702.html?spm=a2c4g.11186623.6.782.44fa322aQFRzOt" target="_blank" rel="noopener">https://help.aliyun.com/document_detail/146702.html?spm=a2c4g.11186623.6.782.44fa322aQFRzOt</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/11/07/%E5%88%9D%E6%8E%A2NextJs%E5%8F%8A%E9%83%A8%E7%BD%B2/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-HTTPè®¿é—®æ§åˆ¶" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/05/HTTP%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/">HTTPè®¿é—®æ§åˆ¶</a>
    </h1>
  

        
        <a href="/2020/09/05/HTTP%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/" class="archive-article-date">
  	<time datetime="2020-09-05T08:22:35.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-09-05</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>è·¨åŸŸèµ„æºå…±äº«(CORS) æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå®ƒä½¿ç”¨é¢å¤–çš„ HTTP å¤´æ¥å‘Šè¯‰æµè§ˆå™¨ è®©è¿è¡Œåœ¨ä¸€ä¸ª origin (domain) ä¸Šçš„ Web åº”ç”¨è¢«å‡†è®¸è®¿é—®æ¥è‡ªä¸åŒæºæœåŠ¡å™¨ä¸Šçš„æŒ‡å®šçš„èµ„æºã€‚å½“ä¸€ä¸ªèµ„æºä»ä¸è¯¥èµ„æºæœ¬èº«æ‰€åœ¨çš„æœåŠ¡å™¨ä¸åŒçš„åŸŸã€åè®®æˆ–ç«¯å£è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œèµ„æºä¼šå‘èµ·ä¸€ä¸ªè·¨åŸŸ HTTP è¯·æ±‚ã€‚</p>
<h2 id="è®¿é—®æ§åˆ¶åœºæ™¯"><a href="#è®¿é—®æ§åˆ¶åœºæ™¯" class="headerlink" title="è®¿é—®æ§åˆ¶åœºæ™¯"></a>è®¿é—®æ§åˆ¶åœºæ™¯</h2><p>è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‰ä¸ªåœºæ™¯æ¥è§£é‡Šè·¨åŸŸèµ„æºå…±äº«æœºåˆ¶çš„å·¥ä½œåŸç†ã€‚</p>
<h3 id="ç®€å•è¯·æ±‚"><a href="#ç®€å•è¯·æ±‚" class="headerlink" title="ç®€å•è¯·æ±‚"></a>ç®€å•è¯·æ±‚</h3><p>æŸäº›è¯·æ±‚ä¸ä¼šè§¦å‘ CORS é¢„æ£€è¯·æ±‚ã€‚æœ¬æ–‡ç§°è¿™æ ·çš„è¯·æ±‚ä¸ºâ€œç®€å•è¯·æ±‚â€ã€‚</p>
<ul>
<li>ä½¿ç”¨ä¸‹åˆ—æ–¹æ³•ä¹‹ä¸€ï¼š getã€headã€post</li>
<li>å…è®¸äººä¸ºè®¾ç½®çš„å­—æ®µä¸º Fetch è§„èŒƒå®šä¹‰çš„ å¯¹ CORS å®‰å…¨çš„é¦–éƒ¨å­—æ®µé›†åˆã€‚è¯¥é›†åˆä¸ºï¼šAcceptã€Accept-Languageã€Content-Languageã€Content-Type ï¼ˆéœ€è¦æ³¨æ„é¢å¤–çš„é™åˆ¶ï¼‰ã€DPRã€Downlinkã€Save-Dataã€Viewport-Widthã€Width</li>
<li>Content-Type çš„å€¼ä»…é™äºä¸‹åˆ—ä¸‰è€…ä¹‹ä¸€ï¼štext/plainã€multipart/form-dataã€application/x-www-form-urlencoded</li>
<li>è¯·æ±‚ä¸­çš„ä»»æ„ XMLHttpRequestUpload å¯¹è±¡å‡æ²¡æœ‰æ³¨å†Œä»»ä½•äº‹ä»¶ç›‘å¬å™¨ï¼›XMLHttpRequestUpload å¯¹è±¡å¯ä»¥ä½¿ç”¨ XMLHttpRequest.upload å±æ€§è®¿é—®ã€‚</li>
<li>è¯·æ±‚ä¸­æ²¡æœ‰ä½¿ç”¨ ReadableStream å¯¹è±¡ã€‚</li>
</ul>
<p>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä½¿ç”¨ CORS é¦–éƒ¨å­—æ®µæ¥å¤„ç†è·¨åŸŸæƒé™ï¼š<br><img src="/images/2020-09-05/simple-req-updated.png" alt="simple-req-updated"></p>
<h3 id="é¢„æ£€è¯·æ±‚"><a href="#é¢„æ£€è¯·æ±‚" class="headerlink" title="é¢„æ£€è¯·æ±‚"></a>é¢„æ£€è¯·æ±‚</h3><p>â€œéœ€é¢„æ£€çš„è¯·æ±‚â€è¦æ±‚å¿…é¡»é¦–å…ˆä½¿ç”¨ OPTIONS æ–¹æ³•å‘èµ·ä¸€ä¸ªé¢„æ£€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œä»¥è·çŸ¥æœåŠ¡å™¨æ˜¯å¦å…è®¸è¯¥å®é™…è¯·æ±‚ã€‚â€é¢„æ£€è¯·æ±‚â€œçš„ä½¿ç”¨ï¼Œå¯ä»¥é¿å…è·¨åŸŸè¯·æ±‚å¯¹æœåŠ¡å™¨çš„ç”¨æˆ·æ•°æ®äº§ç”Ÿæœªé¢„æœŸçš„å½±å“ã€‚</p>
<p>å¦‚ä¸‹æ˜¯ä¸€ä¸ªéœ€è¦æ‰§è¡Œé¢„æ£€è¯·æ±‚çš„ HTTP è¯·æ±‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var invocation &#x3D; new XMLHttpRequest();</span><br><span class="line">var url &#x3D; &#39;http:&#x2F;&#x2F;bar.other&#x2F;resources&#x2F;post-here&#x2F;&#39;;</span><br><span class="line">var body &#x3D; &#39;&lt;?xml version&#x3D;&quot;1.0&quot;?&gt;&lt;person&gt;&lt;name&gt;Arun&lt;&#x2F;name&gt;&lt;&#x2F;person&gt;&#39;;</span><br><span class="line"></span><br><span class="line">function callOtherDomain()&#123;</span><br><span class="line">  if(invocation)</span><br><span class="line">    &#123;</span><br><span class="line">      invocation.open(&#39;POST&#39;, url, true);</span><br><span class="line">      invocation.setRequestHeader(&#39;X-PINGOTHER&#39;, &#39;pingpong&#39;);</span><br><span class="line">      invocation.setRequestHeader(&#39;Content-Type&#39;, &#39;application&#x2F;xml&#39;);</span><br><span class="line">      invocation.onreadystatechange &#x3D; handler;</span><br><span class="line">      invocation.send(body);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/images/2020-09-05/preflight_correct.png" alt="preflight_correct"></p>
<p>é¦–éƒ¨å­—æ®µ Access-Control-Allow-Headers è¡¨æ˜æœåŠ¡å™¨å…è®¸è¯·æ±‚ä¸­æºå¸¦å­—æ®µ X-PINGOTHER ä¸ Content-Typeã€‚ä¸ Access-Control-Allow-Methods ä¸€æ ·ï¼ŒAccess-Control-Allow-Headers çš„å€¼ä¸ºé€—å·åˆ†å‰²çš„åˆ—è¡¨ã€‚</p>
<p>é¦–éƒ¨å­—æ®µ Access-Control-Max-Age è¡¨æ˜è¯¥å“åº”çš„æœ‰æ•ˆæ—¶é—´ä¸º 86400 ç§’ï¼Œä¹Ÿå°±æ˜¯ 24 å°æ—¶ã€‚åœ¨æœ‰æ•ˆæ—¶é—´å†…ï¼Œæµè§ˆå™¨æ— é¡»ä¸ºåŒä¸€è¯·æ±‚å†æ¬¡å‘èµ·é¢„æ£€è¯·æ±‚ã€‚è¯·æ³¨æ„ï¼Œæµè§ˆå™¨è‡ªèº«ç»´æŠ¤äº†ä¸€ä¸ªæœ€å¤§æœ‰æ•ˆæ—¶é—´ï¼Œå¦‚æœè¯¥é¦–éƒ¨å­—æ®µçš„å€¼è¶…è¿‡äº†æœ€å¤§æœ‰æ•ˆæ—¶é—´ï¼Œå°†ä¸ä¼šç”Ÿæ•ˆã€‚</p>
<blockquote>
<p><strong>é¢„æ£€è¯·æ±‚ä¸é‡å®šå‘</strong><br>å¤§å¤šæ•°æµè§ˆå™¨ä¸æ”¯æŒé’ˆå¯¹äºé¢„æ£€è¯·æ±‚çš„é‡å®šå‘ã€‚</p>
</blockquote>
<p>CORS æœ€åˆè¦æ±‚è¯¥è¡Œä¸ºï¼Œä¸è¿‡åœ¨åç»­çš„ä¿®è®¢ä¸­åºŸå¼ƒäº†è¿™ä¸€è¦æ±‚ã€‚åœ¨æµè§ˆå™¨çš„å®ç°è·Ÿä¸Šè§„èŒƒä¹‹å‰ï¼Œæœ‰ä¸¤ç§æ–¹å¼é¿å…è¿™ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>åœ¨æœåŠ¡ç«¯å»æ‰å¯¹é¢„æ£€è¯·æ±‚çš„é‡å®šå‘ï¼›</li>
<li>å°†å®é™…è¯·æ±‚å˜æˆä¸€ä¸ªç®€å•è¯·æ±‚ã€‚</li>
</ul>
<h3 id="é™„å¸¦èº«ä»½å‡­è¯çš„è¯·æ±‚"><a href="#é™„å¸¦èº«ä»½å‡­è¯çš„è¯·æ±‚" class="headerlink" title="é™„å¸¦èº«ä»½å‡­è¯çš„è¯·æ±‚"></a>é™„å¸¦èº«ä»½å‡­è¯çš„è¯·æ±‚</h3><p>XMLHttpRequest æˆ– Fetch ä¸ CORS çš„ä¸€ä¸ªæœ‰è¶£çš„ç‰¹æ€§æ˜¯ï¼Œå¯ä»¥åŸºäº HTTP cookies å’Œ HTTP è®¤è¯ä¿¡æ¯å‘é€èº«ä»½å‡­è¯ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œå¯¹äºè·¨åŸŸ XMLHttpRequest æˆ– Fetch è¯·æ±‚ï¼Œæµè§ˆå™¨ä¸ä¼šå‘é€èº«ä»½å‡­è¯ä¿¡æ¯ã€‚å¦‚æœè¦å‘é€å‡­è¯ä¿¡æ¯ï¼Œéœ€è¦è®¾ç½® XMLHttpRequest çš„æŸä¸ªç‰¹æ®Šæ ‡å¿—ä½ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var invocation &#x3D; new XMLHttpRequest();</span><br><span class="line">var url &#x3D; &#39;http:&#x2F;&#x2F;bar.other&#x2F;resources&#x2F;credentialed-content&#x2F;&#39;;</span><br><span class="line"></span><br><span class="line">function callOtherDomain()&#123;</span><br><span class="line">  if(invocation) &#123;</span><br><span class="line">    invocation.open(&#39;GET&#39;, url, true);</span><br><span class="line">    invocation.withCredentials &#x3D; true;</span><br><span class="line">    invocation.onreadystatechange &#x3D; handler;</span><br><span class="line">    invocation.send();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°† XMLHttpRequest çš„ withCredentials æ ‡å¿—è®¾ç½®ä¸º trueï¼Œä»è€Œå‘æœåŠ¡å™¨å‘é€ Cookiesã€‚</p>
<p><img src="/images/2020-09-05/cred-req-updated.png" alt="cred-req-updated"></p>
<blockquote>
<p><strong>é™„å¸¦èº«ä»½å‡­è¯çš„è¯·æ±‚ä¸é€šé…ç¬¦</strong><br>å¯¹äºé™„å¸¦èº«ä»½å‡­è¯çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¸å¾—è®¾ç½® Access-Control-Allow-Origin çš„å€¼ä¸ºâ€œ*â€ã€‚</p>
</blockquote>
<h2 id="HTTP-å“åº”é¦–éƒ¨å­—æ®µ"><a href="#HTTP-å“åº”é¦–éƒ¨å­—æ®µ" class="headerlink" title="HTTP å“åº”é¦–éƒ¨å­—æ®µ"></a>HTTP å“åº”é¦–éƒ¨å­—æ®µ</h2><h3 id="Access-Control-Allow-Origin"><a href="#Access-Control-Allow-Origin" class="headerlink" title="Access-Control-Allow-Origin"></a>Access-Control-Allow-Origin</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: &lt;origin&gt; | *</span><br></pre></td></tr></table></figure>

<h3 id="Access-Control-Expose-Headers"><a href="#Access-Control-Expose-Headers" class="headerlink" title="Access-Control-Expose-Headers"></a>Access-Control-Expose-Headers</h3><p>åœ¨è·¨åŸŸè®¿é—®æ—¶ï¼ŒXMLHttpRequest å¯¹è±¡çš„ getResponseHeader()æ–¹æ³•åªèƒ½æ‹¿åˆ°ä¸€äº›æœ€åŸºæœ¬çš„å“åº”å¤´ï¼ŒCache-Controlã€Content-Languageã€Content-Typeã€Expiresã€Last-Modifiedã€Pragmaï¼Œå¦‚æœè¦è®¿é—®å…¶ä»–å¤´ï¼Œåˆ™éœ€è¦æœåŠ¡å™¨è®¾ç½®æœ¬å“åº”å¤´ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Expose-Headers: X-My-Custom-Header, X-Another-Custom-Header &#x2F;&#x2F;</span><br></pre></td></tr></table></figure>

<h3 id="Access-Control-Max-Age"><a href="#Access-Control-Max-Age" class="headerlink" title="Access-Control-Max-Age"></a>Access-Control-Max-Age</h3><p>æŒ‡å®šäº† preflight è¯·æ±‚çš„ç»“æœèƒ½å¤Ÿè¢«ç¼“å­˜å¤šä¹…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Max-Age: &lt;delta-seconds&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Access-Control-Allow-Credentials"><a href="#Access-Control-Allow-Credentials" class="headerlink" title="Access-Control-Allow-Credentials"></a>Access-Control-Allow-Credentials</h3><p>æŒ‡å®šäº†å½“æµè§ˆå™¨çš„ credentials è®¾ç½®ä¸º true æ—¶æ˜¯å¦å…è®¸æµè§ˆå™¨è¯»å– response çš„å†…å®¹ã€‚å½“ç”¨åœ¨å¯¹ preflight é¢„æ£€æµ‹è¯·æ±‚çš„å“åº”ä¸­æ—¶ï¼Œå®ƒæŒ‡å®šäº†å®é™…çš„è¯·æ±‚æ˜¯å¦å¯ä»¥ä½¿ç”¨ credentialsã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Credentials: true</span><br></pre></td></tr></table></figure>

<h3 id="Access-Control-Allow-Methods"><a href="#Access-Control-Allow-Methods" class="headerlink" title="Access-Control-Allow-Methods"></a>Access-Control-Allow-Methods</h3><p>é¦–éƒ¨å­—æ®µç”¨äºé¢„æ£€è¯·æ±‚çš„å“åº”ã€‚å…¶æŒ‡æ˜äº†å®é™…è¯·æ±‚æ‰€å…è®¸ä½¿ç”¨çš„ HTTP æ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Methods: &lt;method&gt;[, &lt;method&gt;]*</span><br></pre></td></tr></table></figure>

<h3 id="Access-Control-Allow-Headers"><a href="#Access-Control-Allow-Headers" class="headerlink" title="Access-Control-Allow-Headers"></a>Access-Control-Allow-Headers</h3><p>é¦–éƒ¨å­—æ®µç”¨äºé¢„æ£€è¯·æ±‚çš„å“åº”ã€‚å…¶æŒ‡æ˜äº†å®é™…è¯·æ±‚ä¸­å…è®¸æºå¸¦çš„é¦–éƒ¨å­—æ®µã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Headers: &lt;field-name&gt;[, &lt;field-name&gt;]*</span><br></pre></td></tr></table></figure>

<h2 id="HTTP-è¯·æ±‚é¦–éƒ¨å­—æ®µ"><a href="#HTTP-è¯·æ±‚é¦–éƒ¨å­—æ®µ" class="headerlink" title="HTTP è¯·æ±‚é¦–éƒ¨å­—æ®µ"></a>HTTP è¯·æ±‚é¦–éƒ¨å­—æ®µ</h2><p>ä½¿ç”¨ XMLHttpRequest å¯¹è±¡å‘èµ·è·¨åŸŸè¯·æ±‚æ—¶ï¼Œå®ƒä»¬å·²ç»è¢«è®¾ç½®å°±ç»ªï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®ã€‚</p>
<h3 id="Origin"><a href="#Origin" class="headerlink" title="Origin"></a>Origin</h3><p>è¡¨æ˜é¢„æ£€è¯·æ±‚æˆ–å®é™…è¯·æ±‚çš„æºç«™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Origin: &lt;origin&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Access-Control-Request-Method"><a href="#Access-Control-Request-Method" class="headerlink" title="Access-Control-Request-Method"></a>Access-Control-Request-Method</h3><p>ç”¨äºé¢„æ£€è¯·æ±‚ã€‚å…¶ä½œç”¨æ˜¯ï¼Œå°†å®é™…è¯·æ±‚æ‰€ä½¿ç”¨çš„ HTTP æ–¹æ³•å‘Šè¯‰æœåŠ¡å™¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Request-Method: &lt;method&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Access-Control-Request-Headers"><a href="#Access-Control-Request-Headers" class="headerlink" title="Access-Control-Request-Headers"></a>Access-Control-Request-Headers</h3><p>ç”¨äºé¢„æ£€è¯·æ±‚ã€‚å…¶ä½œç”¨æ˜¯ï¼Œå°†å®é™…è¯·æ±‚æ‰€æºå¸¦çš„é¦–éƒ¨å­—æ®µå‘Šè¯‰æœåŠ¡å™¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Request-Headers: &lt;field-name&gt;[, &lt;field-name&gt;]*</span><br></pre></td></tr></table></figure>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/09/05/HTTP%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-HTTPç¼“å­˜" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/25/HTTP%E7%BC%93%E5%AD%98/">HTTPç¼“å­˜</a>
    </h1>
  

        
        <a href="/2020/08/25/HTTP%E7%BC%93%E5%AD%98/" class="archive-article-date">
  	<time datetime="2020-08-25T07:27:02.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-08-25</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>é€šè¿‡å¤ç”¨ä»¥å‰è·å–çš„èµ„æºï¼Œå¯ä»¥æ˜¾è‘—æé«˜ç½‘ç«™å’Œåº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚</p>
<h2 id="ä¸åŒç§ç±»çš„ç¼“å­˜"><a href="#ä¸åŒç§ç±»çš„ç¼“å­˜" class="headerlink" title="ä¸åŒç§ç±»çš„ç¼“å­˜"></a>ä¸åŒç§ç±»çš„ç¼“å­˜</h2><p>ï¼ˆç§æœ‰ï¼‰æµè§ˆå™¨ç¼“å­˜<br>ï¼ˆå…¬æœ‰ï¼‰ä»£ç†ç¼“å­˜</p>
<h2 id="ç¼“å­˜æ“ä½œçš„ç›®æ ‡"><a href="#ç¼“å­˜æ“ä½œçš„ç›®æ ‡" class="headerlink" title="ç¼“å­˜æ“ä½œçš„ç›®æ ‡"></a>ç¼“å­˜æ“ä½œçš„ç›®æ ‡</h2><p>å¸¸è§çš„ HTTP ç¼“å­˜åªèƒ½å­˜å‚¨ GET å“åº”ï¼Œå¯¹äºå…¶ä»–ç±»å‹çš„å“åº”åˆ™æ— èƒ½ä¸ºåŠ›ã€‚ç¼“å­˜çš„å…³é”®ä¸»è¦åŒ…æ‹¬ request method å’Œç›®æ ‡ URIï¼ˆä¸€èˆ¬åªæœ‰ GET è¯·æ±‚æ‰ä¼šè¢«ç¼“å­˜ï¼‰ã€‚</p>
<h2 id="ç¼“å­˜æ§åˆ¶"><a href="#ç¼“å­˜æ§åˆ¶" class="headerlink" title="ç¼“å­˜æ§åˆ¶"></a>ç¼“å­˜æ§åˆ¶</h2><h3 id="cache-control"><a href="#cache-control" class="headerlink" title="cache-control"></a>cache-control</h3><p>no-storeï¼ˆæ²¡æœ‰ç¼“å­˜ï¼‰<br>no-cacheï¼ˆç¼“å­˜ä½†é‡æ–°éªŒè¯ï¼‰<br>privateï¼ˆç§æœ‰ï¼‰<br>publicï¼ˆå…¬å…±ï¼‰<br>max-ageï¼ˆè¿‡æœŸï¼‰<br>must-revalidateï¼ˆéªŒè¯æ–¹å¼ï¼‰</p>
<blockquote>
<p>http ä¸­è®¾ç½®è¿‡æœŸæ—¶é—´ expires å’Œ max-age çš„åŒºåˆ«</p>
</blockquote>
<p>max-age æ˜¯ Http/1.1ï¼Œè®¾ç½®çš„æ˜¯æ–‡ä»¶è¢«ç”¨æˆ·è®¿é—®åçš„å­˜æ´»æ—¶é—´ï¼ˆsï¼‰<br>Expires æ˜¯ Http/1.0ï¼ŒæŒ‡å®šçš„æ—¶é—´åˆ†ä¸ºä¸¤ç§ï¼šç›¸å¯¹æ–‡ä»¶çš„æœ€åè®¿é—®æ—¶é—´ï¼ˆAtimeï¼‰ï¼Œç»å¯¹ä¿®æ”¹æ—¶é—´ï¼ˆMtimeï¼‰ï¼Œå¦‚æœåœ¨ Cache-Control å“åº”å¤´è®¾ç½®äº† â€œmax-ageâ€ æˆ–è€… â€œs-max-ageâ€ æŒ‡ä»¤ï¼Œé‚£ä¹ˆ Expires å¤´ä¼šè¢«å¿½ç•¥ã€‚</p>
<h3 id="pragma-å¤´"><a href="#pragma-å¤´" class="headerlink" title="pragma å¤´"></a>pragma å¤´</h3><p>Pragma æ˜¯ HTTP/1.0 æ ‡å‡†ä¸­å®šä¹‰çš„ä¸€ä¸ª header å±æ€§ï¼Œè¯·æ±‚ä¸­åŒ…å« Pragma çš„æ•ˆæœè·Ÿåœ¨å¤´ä¿¡æ¯ä¸­å®šä¹‰ Cache-Control: no-cache ç›¸åŒï¼Œä½†æ˜¯ HTTP çš„å“åº”å¤´æ²¡æœ‰æ˜ç¡®å®šä¹‰è¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥å®ƒä¸èƒ½æ‹¿æ¥å®Œå…¨æ›¿ä»£ HTTP/1.1 ä¸­å®šä¹‰çš„ Cache-control å¤´ã€‚é€šå¸¸å®šä¹‰ Pragma ä»¥å‘åå…¼å®¹åŸºäº HTTP/1.0 çš„å®¢æˆ·ç«¯ã€‚</p>
<h2 id="æ–°é²œåº¦"><a href="#æ–°é²œåº¦" class="headerlink" title="æ–°é²œåº¦"></a>æ–°é²œåº¦</h2><p><img src="/images/2020-08-25/HTTPStaleness.png" alt="HTTPStaleness"></p>
<p>å¯¹äºå«æœ‰ç‰¹å®šå¤´ä¿¡æ¯çš„è¯·æ±‚ï¼Œä¼šå»è®¡ç®—ç¼“å­˜å¯¿å‘½ã€‚æ¯”å¦‚ Cache-control: max-age=N çš„å¤´ï¼Œç›¸åº”çš„ç¼“å­˜çš„å¯¿å‘½å°±æ˜¯ Nã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯¹äºä¸å«è¿™ä¸ªå±æ€§çš„è¯·æ±‚åˆ™ä¼šå»æŸ¥çœ‹æ˜¯å¦åŒ…å« Expires å±æ€§ï¼Œé€šè¿‡æ¯”è¾ƒ Expires çš„å€¼å’Œå¤´é‡Œé¢ Date å±æ€§çš„å€¼æ¥åˆ¤æ–­æ˜¯å¦ç¼“å­˜è¿˜æœ‰æ•ˆã€‚å¦‚æœ max-age å’Œ expires å±æ€§éƒ½æ²¡æœ‰ï¼Œæ‰¾æ‰¾å¤´é‡Œçš„ Last-Modified ä¿¡æ¯ã€‚å¦‚æœæœ‰ï¼Œç¼“å­˜çš„å¯¿å‘½å°±ç­‰äºå¤´é‡Œé¢ Date çš„å€¼å‡å» Last-Modified çš„å€¼é™¤ä»¥ 10ã€‚</p>
<h3 id="æ”¹è¿›èµ„æº"><a href="#æ”¹è¿›èµ„æº" class="headerlink" title="æ”¹è¿›èµ„æº"></a>æ”¹è¿›èµ„æº</h3><p>web å¼€å‘è€…å‘æ˜äº†ä¸€ç§è¢« Steve Souders ç§°ä¹‹ä¸º revving çš„æŠ€æœ¯ã€‚ä¸é¢‘ç¹æ›´æ–°çš„æ–‡ä»¶ä¼šä½¿ç”¨ç‰¹å®šçš„å‘½åæ–¹å¼ï¼šåœ¨ URL åé¢ï¼ˆé€šå¸¸æ˜¯æ–‡ä»¶ååé¢ï¼‰ä¼šåŠ ä¸Šç‰ˆæœ¬å·ã€‚<br><img src="/images/2020-08-25/HTTPRevved.png" alt="HTTPRevved"></p>
<h2 id="ç¼“å­˜éªŒè¯"><a href="#ç¼“å­˜éªŒè¯" class="headerlink" title="ç¼“å­˜éªŒè¯"></a>ç¼“å­˜éªŒè¯</h2><p>â€œCache-control: must-revalidateâ€</p>
<h3 id="ETag"><a href="#ETag" class="headerlink" title="ETag"></a>ETag</h3><p>ä½œä¸ºç¼“å­˜çš„ä¸€ç§å¼ºæ ¡éªŒå™¨ï¼ŒETag å“åº”å¤´æ˜¯ä¸€ä¸ªå¯¹ç”¨æˆ·ä»£ç†(User Agent)ä¸é€æ˜çš„å€¼ã€‚å¦‚æœèµ„æºè¯·æ±‚çš„å“åº”å¤´é‡Œå«æœ‰ ETag, å®¢æˆ·ç«¯å¯ä»¥åœ¨åç»­çš„è¯·æ±‚çš„å¤´ä¸­å¸¦ä¸Š If-None-Match å¤´æ¥éªŒè¯ç¼“å­˜ã€‚<br>Last-Modified å“åº”å¤´å¯ä»¥ä½œä¸ºä¸€ç§å¼±æ ¡éªŒå™¨ã€‚è¯´å®ƒå¼±æ˜¯å› ä¸ºå®ƒåªèƒ½ç²¾ç¡®åˆ°ä¸€ç§’ã€‚å¦‚æœå“åº”å¤´é‡Œå«æœ‰è¿™ä¸ªä¿¡æ¯ï¼Œå®¢æˆ·ç«¯å¯ä»¥åœ¨åç»­çš„è¯·æ±‚ä¸­å¸¦ä¸Š If-Modified-Since æ¥éªŒè¯ç¼“å­˜ã€‚</p>
<h2 id="Vary-å“åº”"><a href="#Vary-å“åº”" class="headerlink" title="Vary å“åº”"></a>Vary å“åº”</h2><p>Vary HTTP å“åº”å¤´å†³å®šäº†å¯¹äºåç»­çš„è¯·æ±‚å¤´ï¼Œå¦‚ä½•åˆ¤æ–­æ˜¯è¯·æ±‚ä¸€ä¸ªæ–°çš„èµ„æºè¿˜æ˜¯ä½¿ç”¨ç¼“å­˜çš„æ–‡ä»¶ã€‚</p>
<p>å½“ç¼“å­˜æœåŠ¡å™¨æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œåªæœ‰å½“å‰çš„è¯·æ±‚å’ŒåŸå§‹ï¼ˆç¼“å­˜ï¼‰çš„è¯·æ±‚å¤´è·Ÿç¼“å­˜çš„å“åº”å¤´é‡Œçš„ Vary éƒ½åŒ¹é…ï¼Œæ‰èƒ½ä½¿ç”¨ç¼“å­˜çš„å“åº”ã€‚</p>
<p><img src="/images/2020-08-25/HTTPVary.png" alt="HTPPVary"></p>
<p>ä½¿ç”¨ vary å¤´æœ‰åˆ©äºå†…å®¹æœåŠ¡çš„åŠ¨æ€å¤šæ ·æ€§ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ Vary: User-Agent å¤´ï¼Œç¼“å­˜æœåŠ¡å™¨éœ€è¦é€šè¿‡ UA åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ç¼“å­˜çš„é¡µé¢ã€‚å¦‚æœéœ€è¦åŒºåˆ†ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯çš„å±•ç¤ºå†…å®¹ï¼Œåˆ©ç”¨è¿™ç§æ–¹å¼å°±èƒ½é¿å…åœ¨ä¸åŒçš„ç»ˆç«¯å±•ç¤ºé”™è¯¯çš„å¸ƒå±€ã€‚å¦å¤–ï¼Œå®ƒå¯ä»¥å¸®åŠ© Google æˆ–è€…å…¶ä»–æœç´¢å¼•æ“æ›´å¥½åœ°å‘ç°é¡µé¢çš„ç§»åŠ¨ç‰ˆæœ¬ï¼Œå¹¶ä¸”å‘Šè¯‰æœç´¢å¼•æ“æ²¡æœ‰å¼•å…¥ <a href="https://en.wikipedia.org/wiki/Cloaking" target="_blank" rel="noopener">Cloaking</a>ã€‚</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/08/25/HTTP%E7%BC%93%E5%AD%98/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-HTTPåè®®" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/22/HTTP%E5%8D%8F%E8%AE%AE/">HTTPåè®®</a>
    </h1>
  

        
        <a href="/2020/08/22/HTTP%E5%8D%8F%E8%AE%AE/" class="archive-article-date">
  	<time datetime="2020-08-22T08:31:39.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-08-22</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTP,HyperText Transfer Protocolï¼‰æ˜¯ä¸€ä¸ªç”¨äºä¼ è¾“è¶…åª’ä½“æ–‡æ¡£çš„åº”ç”¨å±‚åè®®ï¼ˆTCP-ä¼ è¾“å±‚ï¼ŒIP-ç½‘ç»œå±‚ï¼‰ã€‚HTTP éµå¾ªç»å…¸çš„å®¢æˆ·ç«¯-æœåŠ¡ç«¯æ¨¡å‹ï¼Œå®¢æˆ·ç«¯æ‰“å¼€ä¸€ä¸ªè¿æ¥ä»¥å‘å‡ºè¯·æ±‚ï¼Œç„¶åç­‰å¾…å®ƒæ”¶åˆ°æœåŠ¡å™¨ç«¯å“åº”ã€‚HTTP æ˜¯æ— çŠ¶æ€åè®®ï¼Œè¿™æ„å‘³ç€æœåŠ¡å™¨ä¸ä¼šåœ¨ä¸¤ä¸ªè¯·æ±‚ä¹‹é—´ä¿ç•™ä»»ä½•æ•°æ®ï¼ˆçŠ¶æ€ï¼‰ã€‚</p>
<h2 id="HTTP-æ¦‚è¿°"><a href="#HTTP-æ¦‚è¿°" class="headerlink" title="HTTP æ¦‚è¿°"></a>HTTP æ¦‚è¿°</h2><p>ä¸€ä¸ªå®Œæ•´çš„ Web æ–‡æ¡£é€šå¸¸æ˜¯ç”±ä¸åŒçš„å­æ–‡æ¡£æ‹¼æ¥è€Œæˆçš„ï¼Œåƒæ˜¯æ–‡æœ¬ã€å¸ƒå±€æè¿°ã€å›¾ç‰‡ã€è§†é¢‘ã€è„šæœ¬ç­‰ç­‰ï¼Œå¦‚ä¸‹æ˜¯ä¸€ä¸ª web document ä»ç½‘ç»œä¸Šçš„è·å–é€”å¾„ï¼š<br><img src="/images/2020-08-22/fetch-page.png" alt="fetchPage"></p>
<h3 id="åŸºäº-HTTP-çš„ç»„ä»¶ç³»ç»Ÿ"><a href="#åŸºäº-HTTP-çš„ç»„ä»¶ç³»ç»Ÿ" class="headerlink" title="åŸºäº HTTP çš„ç»„ä»¶ç³»ç»Ÿ"></a>åŸºäº HTTP çš„ç»„ä»¶ç³»ç»Ÿ</h3><p>HTTP æ˜¯ä¸€ä¸ª client-server åè®®ï¼Œæ¯ä¸€ä¸ªå‘é€åˆ°æœåŠ¡å™¨çš„è¯·æ±‚ï¼Œéƒ½ä¼šè¢«æœåŠ¡å™¨å¤„ç†å¹¶è¿”å›ä¸€ä¸ªæ¶ˆæ¯ï¼Œä¹Ÿå°±æ˜¯ responseã€‚åœ¨è¿™ä¸ªè¯·æ±‚ä¸å“åº”ä¹‹é—´ï¼Œè¿˜æœ‰è®¸è®¸å¤šå¤šçš„è¢«ç§°ä¸º proxies çš„å®ä½“ï¼Œä»–ä»¬çš„ä½œç”¨ä¸è¡¨ç°å„ä¸ç›¸åŒï¼Œæ¯”å¦‚æœ‰äº›æ˜¯ç½‘å…³ï¼Œè¿˜æœ‰äº›æ˜¯ caches ç­‰ã€‚</p>
<p><strong>å®¢æˆ·ç«¯ï¼ˆuser-agentï¼‰</strong></p>
<p>user-agent å°±æ˜¯ä»»ä½•èƒ½å¤Ÿä¸ºç”¨æˆ·å‘èµ·è¡Œä¸ºçš„å·¥å…·ã€‚è¿™ä¸ªè§’è‰²é€šå¸¸éƒ½æ˜¯ç”±æµè§ˆå™¨æ¥æ‰®æ¼”ã€‚</p>
<p><strong>Web æœåŠ¡ç«¯</strong></p>
<p>Web Server æœåŠ¡å¹¶æä¾›å®¢æˆ·ç«¯æ‰€è¯·æ±‚çš„æ–‡æ¡£ã€‚Server åªæ˜¯è™šæ‹Ÿæ„ä¹‰ä¸Šä»£è¡¨ä¸€ä¸ªæœºå™¨ï¼šå®ƒå¯ä»¥æ˜¯å…±äº«è´Ÿè½½ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰çš„ä¸€ç»„æœåŠ¡å™¨ç»„æˆçš„è®¡ç®—æœºé›†ç¾¤ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ç§å¤æ‚çš„è½¯ä»¶ï¼Œé€šè¿‡å‘å…¶ä»–è®¡ç®—æœºï¼ˆå¦‚ç¼“å­˜ï¼Œæ•°æ®åº“æœåŠ¡å™¨ï¼Œç”µå­å•†åŠ¡æœåŠ¡å™¨ â€¦ï¼‰å‘èµ·è¯·æ±‚æ¥è·å–éƒ¨åˆ†æˆ–å…¨éƒ¨èµ„æºã€‚</p>
<p><strong>ä»£ç†ï¼ˆProxiesï¼‰</strong></p>
<p>åœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ï¼Œæœ‰è®¸å¤šè®¡ç®—æœºå’Œå…¶ä»–è®¾å¤‡è½¬å‘äº† HTTP æ¶ˆæ¯ï¼Œå®ƒæ—¢å¯ä»¥è¡¨ç°å¾—é€æ˜ï¼Œåˆå¯ä»¥ä¸é€æ˜ï¼ˆâ€œæ”¹å˜è¯·æ±‚â€ä¼šé€šè¿‡å®ƒä»¬ï¼‰ã€‚ä»£ç†ä¸»è¦æœ‰å¦‚ä¸‹å‡ ç§ä½œç”¨ï¼š</p>
<ul>
<li>ç¼“å­˜</li>
<li>è¿‡æ»¤</li>
<li>è´Ÿè½½å‡è¡¡</li>
<li>è®¤è¯</li>
<li>æ—¥å¿—è®°å½•</li>
</ul>
<h3 id="HTTP-çš„åŸºæœ¬æ€§è´¨"><a href="#HTTP-çš„åŸºæœ¬æ€§è´¨" class="headerlink" title="HTTP çš„åŸºæœ¬æ€§è´¨"></a>HTTP çš„åŸºæœ¬æ€§è´¨</h3><p>HTTP æ˜¯ç®€å•çš„ã€å¯æ‰©å±•çš„ã€æ— çŠ¶æ€æœ‰ä¼šè¯çš„ã€å¯é é“¾æ¥</p>
<h3 id="HTTP-å¯æ§åˆ¶çš„ç‰¹æ€§"><a href="#HTTP-å¯æ§åˆ¶çš„ç‰¹æ€§" class="headerlink" title="HTTP å¯æ§åˆ¶çš„ç‰¹æ€§"></a>HTTP å¯æ§åˆ¶çš„ç‰¹æ€§</h3><ul>
<li>ç¼“å­˜ï¼ˆæœåŠ¡ç«¯å‘Šè¯‰ä»£ç†å’Œå®¢æˆ·ç«¯ç¼“å­˜å†…å®¹å’Œç¼“å­˜æ—¶é—´ï¼‰</li>
<li>å¼€æ”¾åŒæºé™åˆ¶ï¼ˆä¿®æ”¹å¤´éƒ¨ï¼Œéœ€è¦è€ƒè™‘å®‰å…¨å› ç´ ï¼‰</li>
<li>è®¤è¯ï¼ˆåŸºæœ¬è®¤è¯å¯ä»¥é€šè¿‡ HTTP çš„ Authenticate æˆ–è€… HTTP Cookies æ¥è®¾ç½®æŒ‡å®šçš„ä¼šè¯)</li>
<li>ä»£ç†å’Œéš§é“</li>
<li>ä¼šè¯</li>
</ul>
<h3 id="HTTP-æµ"><a href="#HTTP-æµ" class="headerlink" title="HTTP æµ"></a>HTTP æµ</h3><p>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„äº¤äº’æµç¨‹ï¼Œåœ¨è¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚è€Œä¸” HTTP æµæ°´çº¿å·²è¢«è¯æ˜å¾ˆéš¾åœ¨ç°æœ‰çš„ç½‘ç»œä¸­å®ç°ï¼Œæ‰€ä»¥åœ¨åç»­ç”±è¡¨ç°çš„æ›´ç¨³å¥çš„ HTTP/2 çš„å¸§æ‰€å–ä»£ã€‚</p>
<h3 id="HTTP-æŠ¥æ–‡"><a href="#HTTP-æŠ¥æ–‡" class="headerlink" title="HTTP æŠ¥æ–‡"></a>HTTP æŠ¥æ–‡</h3><p>HTTP/1.1 ä»¥åŠæ›´æ—©çš„ HTTP åè®®æŠ¥æ–‡éƒ½æ˜¯è¯­ä¹‰å¯è¯»çš„ã€‚åœ¨ HTTP/2 ä¸­ï¼Œè¿™äº›æŠ¥æ–‡è¢«åµŒå…¥åˆ°äº†ä¸€ä¸ªæ–°çš„äºŒè¿›åˆ¶ç»“æ„ï¼Œå¸§ã€‚å¸§å…è®¸å®ç°å¾ˆå¤šä¼˜åŒ–ï¼Œæ¯”å¦‚æŠ¥æ–‡å¤´éƒ¨çš„å‹ç¼©å’Œå¤ç”¨ã€‚å³ä½¿åªæœ‰åŸå§‹ HTTP æŠ¥æ–‡çš„ä¸€éƒ¨åˆ†ä»¥ HTTP/2 å‘é€å‡ºæ¥ï¼Œæ¯æ¡æŠ¥æ–‡çš„è¯­ä¹‰ä¾æ—§ä¸å˜ï¼Œå®¢æˆ·ç«¯ä¼šé‡ç»„åŸå§‹ HTTP/1.1 è¯·æ±‚ã€‚å› æ­¤ç”¨ HTTP/1.1 æ ¼å¼æ¥ç†è§£ HTTP/2 æŠ¥æ–‡ä»æ—§æœ‰æ•ˆã€‚</p>
<p>æœ‰ä¸¤ç§ HTTP æŠ¥æ–‡çš„ç±»å‹ï¼Œè¯·æ±‚ä¸å“åº”ï¼Œæ¯ç§éƒ½æœ‰å…¶ç‰¹å®šçš„æ ¼å¼ã€‚</p>
<p><strong>è¯·æ±‚</strong><br>HTTP è¯·æ±‚çš„ä¸€ä¸ªä¾‹å­ï¼š<br><img src="/images/2020-08-22/HTTP_Request.png" alt="HTTP Request"></p>
<ul>
<li>method: ä¸€ä¸ªåŠ¨è¯åƒ GET, POST æˆ–è€…ä¸€ä¸ªåè¯åƒ OPTIONSï¼ŒHEAD æ¥å®šä¹‰å®¢æˆ·ç«¯çš„åŠ¨ä½œè¡Œä¸º</li>
<li>path: è·å–çš„èµ„æºçš„è·¯å¾„ï¼Œå³ URL</li>
<li>version of the protocalï¼šç‰ˆæœ¬å·</li>
<li>headers: ä¸ºæœåŠ¡ç«¯è¡¨è¾¾å…¶ä»–ä¿¡æ¯çš„å¯é€‰å¤´éƒ¨ headers</li>
<li>å¯¹äºä¸€äº›åƒ POST è¿™æ ·çš„æ–¹æ³•ï¼ŒæŠ¥æ–‡çš„ body å°±åŒ…å«äº†å‘é€çš„èµ„æºï¼Œè¿™ä¸å“åº”æŠ¥æ–‡çš„ body ç±»ä¼¼ã€‚</li>
</ul>
<p><strong>å“åº”</strong><br>HTTP å“åº”çš„ä¸€ä¸ªä¾‹å­ï¼š<br><img src="/images/2020-08-22/HTTP_Response.png" alt="HTTP Response"></p>
<ul>
<li>status codeï¼šçŠ¶æ€ç </li>
<li>status messageï¼šçŠ¶æ€ä¿¡æ¯</li>
<li>å¯é€‰é¡¹ï¼Œæ¯”èµ·è¯·æ±‚æŠ¥æ–‡ï¼Œå“åº”æŠ¥æ–‡ä¸­æ›´å¸¸è§åœ°åŒ…å«è·å–çš„èµ„æº body</li>
</ul>
<p>HTTP æ˜¯ä¸€ç§ç®€å•å¯æ‰©å±•çš„åè®®ï¼Œå…¶ Client-Server çš„ç»“æ„ä»¥åŠè½»æ¾æ‰©å±•å¤´éƒ¨ä¿¡æ¯çš„èƒ½åŠ›ä½¿å¾— HTTP å¯ä»¥å’Œ Web å…±åŒå‘å±•ã€‚</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/08/22/HTTP%E5%8D%8F%E8%AE%AE/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-ES7ã€ES8ã€ES9ã€ES10æ–°ç‰¹æ€§å¤§ç›˜ç‚¹" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/27/ES7%E3%80%81ES8%E3%80%81ES9%E3%80%81ES10%E6%96%B0%E7%89%B9%E6%80%A7%E5%A4%A7%E7%9B%98%E7%82%B9/">ES7ã€ES8ã€ES9ã€ES10æ–°ç‰¹æ€§å¤§ç›˜ç‚¹</a>
    </h1>
  

        
        <a href="/2020/06/27/ES7%E3%80%81ES8%E3%80%81ES9%E3%80%81ES10%E6%96%B0%E7%89%B9%E6%80%A7%E5%A4%A7%E7%9B%98%E7%82%B9/" class="archive-article-date">
  	<time datetime="2020-06-27T12:19:45.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-06-27</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä» ECMAScript 2016ï¼ˆES7ï¼‰å¼€å§‹ï¼Œç‰ˆæœ¬å‘å¸ƒå˜å¾—æ›´åŠ é¢‘ç¹ï¼Œæ¯å¹´å‘å¸ƒä¸€ä¸ªæ–°ç‰ˆæœ¬ã€‚é¦–å…ˆå…ˆçœ‹ä¸€ä¸‹æ–°ç‰¹æ€§çš„æ€»è§ˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/images/2020-06-27/all.png" alt="All"></p>
<h2 id="ES7-æ–°ç‰¹æ€§"><a href="#ES7-æ–°ç‰¹æ€§" class="headerlink" title="ES7 æ–°ç‰¹æ€§"></a>ES7 æ–°ç‰¹æ€§</h2><h3 id="1-Array-prototype-includes-æ–¹æ³•"><a href="#1-Array-prototype-includes-æ–¹æ³•" class="headerlink" title="1.Array.prototype.includes()æ–¹æ³•"></a>1.Array.prototype.includes()æ–¹æ³•</h3><p>åœ¨ ES6 ä¸­æˆ‘ä»¬æœ‰ String.prototype.includes()å¯ä»¥æŸ¥è¯¢ç»™å®šå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œåœ¨ ES7 ä¸­ï¼Œæˆ‘ä»¬åœ¨æ•°ç»„ä¸­ä¹Ÿå¯ä»¥ç”¨ Array.prototype.includes æ–¹æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œæ ¹æ®æƒ…å†µï¼Œå¦‚æœåŒ…å«åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const arr &#x3D; [1, 3, 5, 2, &#39;8&#39;, NaN, -0]</span><br><span class="line">arr.includes(1) &#x2F;&#x2F; true</span><br><span class="line">arr.includes(1, 2) &#x2F;&#x2F; false è¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœç´¢çš„èµ·å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º0</span><br><span class="line">arr.includes(&#39;1&#39;) &#x2F;&#x2F; false</span><br><span class="line">arr.includes(NaN) &#x2F;&#x2F; true</span><br><span class="line">arr.includes(+0) &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>

<p>åœ¨ ES7 ä¹‹å‰æƒ³åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼Œæœ‰å¦‚ä¸‹ä¸¤ç§æ–¹æ³•,ä½†éƒ½ä¸å¦‚ includes æ¥å¾—ç›´è§‚ï¼š</p>
<ul>
<li>indexOf()<br>indexOf()æ–¹æ³•è¿”å›åœ¨æ•°ç»„ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªç»™å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›-1ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">if (arr.indexOf(el) !&#x3D;&#x3D; -1) &#123;</span><br><span class="line">  &#x2F;&#x2F; ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸è¿‡è¿™ç§æ–¹æ³•æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼Œä¸€æ˜¯ä¸å¤Ÿè¯­ä¹‰åŒ–ï¼Œè¦å…ˆæ‰¾åˆ°å‚æ•°å€¼çš„ç¬¬ä¸€ä¸ªå‡ºç°ä½ç½®ï¼Œæ‰€ä»¥è¦å»æ¯”è¾ƒæ˜¯å¦ä¸ç­‰äº-1ï¼Œè¡¨è¾¾èµ·æ¥ä¸å¤Ÿç›´è§‚ã€‚äºŒæ˜¯ï¼Œå®ƒå†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ===ï¼‰è¿›è¡Œåˆ¤æ–­ï¼Œè¿™ä¼šå¯¼è‡´å¯¹ NaN çš„è¯¯åˆ¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[NaN].indexOf(NaN)&#x2F;&#x2F; -1</span><br></pre></td></tr></table></figure>

<ul>
<li>find() å’Œ findIndex()<br>æ•°ç»„å®ä¾‹çš„ find æ–¹æ³•ï¼Œç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ã€‚å¦å¤–ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å‘ç° NaNï¼Œå¼¥è¡¥äº†æ•°ç»„çš„ indexOf æ–¹æ³•çš„ä¸è¶³ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[1, 4, -5, 10].find((n) &#x3D;&gt; n &lt; 0) &#x2F;&#x2F; -5</span><br><span class="line">[1, 5, 10, 15].findIndex(function(value) &#123;</span><br><span class="line">  return value &gt; 9;</span><br><span class="line">&#125;) &#x2F;&#x2F; 2</span><br><span class="line">[NaN].findIndex(y &#x3D;&gt; Object.is(NaN, y)) &#x2F;&#x2F; 0</span><br></pre></td></tr></table></figure>

<p>Array.prototype.includes()çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/includes.jpg" alt="includes"></p>
<h3 id="2-æ±‚å¹‚è¿ç®—ç¬¦"><a href="#2-æ±‚å¹‚è¿ç®—ç¬¦" class="headerlink" title="2.æ±‚å¹‚è¿ç®—ç¬¦**"></a>2.æ±‚å¹‚è¿ç®—ç¬¦**</h3><p>åœ¨ ES7 ä¸­å¼•å…¥äº†æŒ‡æ•°è¿ç®—ç¬¦ï¼Œå…·æœ‰ä¸ Math.pow()ç­‰æ•ˆçš„è®¡ç®—ç»“æœ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(2**10);&#x2F;&#x2F; è¾“å‡º1024</span><br><span class="line">console.log(Math.pow(2, 10)) &#x2F;&#x2F; è¾“å‡º1024</span><br></pre></td></tr></table></figure>

<p>æ±‚å¹‚è¿ç®—ç¬¦çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/**.jpg" alt="**"></p>
<h2 id="ES8-æ–°ç‰¹æ€§"><a href="#ES8-æ–°ç‰¹æ€§" class="headerlink" title="ES8 æ–°ç‰¹æ€§"></a>ES8 æ–°ç‰¹æ€§</h2><h3 id="1-Async-Await"><a href="#1-Async-Await" class="headerlink" title="1.Async/Await"></a>1.Async/Await</h3><p>æˆ‘ä»¬éƒ½çŸ¥é“ä½¿ç”¨ Promise èƒ½å¾ˆå¥½åœ°è§£å†³å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼Œä½†å¦‚æœå¤„ç†æµç¨‹æ¯”è¾ƒå¤æ‚çš„è¯ï¼Œé‚£ä¹ˆæ•´æ®µä»£ç å°†å……æ–¥ç€ thenï¼Œè¯­ä¹‰åŒ–ä¸æ˜æ˜¾ï¼Œä»£ç ä¸èƒ½å¾ˆå¥½åœ°è¡¨ç¤ºæ‰§è¡Œæµç¨‹ï¼Œé‚£æœ‰æ²¡æœ‰æ¯” Promise æ›´ä¼˜é›…çš„å¼‚æ­¥æ–¹å¼å‘¢ï¼Ÿ</p>
<p>å‡å¦‚æœ‰è¿™æ ·ä¸€ä¸ªä½¿ç”¨åœºæ™¯ï¼šéœ€è¦å…ˆè¯·æ±‚ a é“¾æ¥ï¼Œç­‰è¿”å›ä¿¡æ¯ä¹‹åï¼Œå†è¯·æ±‚ b é“¾æ¥çš„å¦å¤–ä¸€ä¸ªèµ„æºã€‚ä¸‹é¢ä»£ç å±•ç¤ºçš„æ˜¯ä½¿ç”¨ fetch æ¥å®ç°è¿™æ ·çš„éœ€æ±‚ï¼Œfetch è¢«å®šä¹‰åœ¨ window å¯¹è±¡ä¸­ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fetch(&#39;https:&#x2F;&#x2F;xxx1&#x2F;&#39;)</span><br><span class="line">  .then(response &#x3D;&gt; &#123;</span><br><span class="line">    console.log(response)</span><br><span class="line">    return fetch(&#39;https:&#x2F;&#x2F;xxx2&#x2F;&#39;)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(response &#x3D;&gt; &#123;</span><br><span class="line">    console.log(response)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(error &#x3D;&gt; &#123;</span><br><span class="line">    console.log(error)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>è™½ç„¶ä¸Šè¿°ä»£ç å¯ä»¥å®ç°è¿™ä¸ªéœ€æ±‚ï¼Œä½†è¯­ä¹‰åŒ–ä¸æ˜æ˜¾ï¼Œä»£ç ä¸èƒ½å¾ˆå¥½åœ°è¡¨ç¤ºæ‰§è¡Œæµç¨‹ã€‚åŸºäºè¿™ä¸ªåŸå› ï¼ŒES8 å¼•å…¥äº† async/awaitï¼Œè¿™æ˜¯ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ä¸ªé‡å¤§æ”¹è¿›ï¼Œæä¾›äº†åœ¨ä¸é˜»å¡ä¸»çº¿ç¨‹çš„æƒ…å†µä¸‹ä½¿ç”¨åŒæ­¥ä»£ç å®ç°å¼‚æ­¥è®¿é—®èµ„æºçš„èƒ½åŠ›ï¼Œå¹¶ä¸”ä½¿å¾—ä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">async function foo () &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    let response1 &#x3D; await fetch(&#39;https:&#x2F;&#x2F;xxx1&#x2F;&#39;)</span><br><span class="line">    console.log(response1)</span><br><span class="line">    let response2 &#x3D; await fetch(&#39;https:&#x2F;&#x2F;xxx2&#x2F;&#39;)</span><br><span class="line">    console.log(response2)</span><br><span class="line">  &#125; catch (err) &#123;</span><br><span class="line">    console.error(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ä¸Šé¢ä»£ç ï¼Œä½ ä¼šå‘ç°æ•´ä¸ªå¼‚æ­¥å¤„ç†çš„é€»è¾‘éƒ½æ˜¯ä½¿ç”¨åŒæ­¥ä»£ç çš„æ–¹å¼æ¥å®ç°çš„ï¼Œè€Œä¸”è¿˜æ”¯æŒ try catch æ¥æ•è·å¼‚å¸¸ï¼Œè¿™æ„Ÿè§‰å°±åœ¨å†™åŒæ­¥ä»£ç ï¼Œæ‰€ä»¥æ˜¯éå¸¸ç¬¦åˆäººçš„çº¿æ€§æ€ç»´çš„ã€‚éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œawait ä¸å¯ä»¥è„±ç¦» async å•ç‹¬ä½¿ç”¨ï¼Œawait åé¢ä¸€å®šæ˜¯ Promise å¯¹è±¡ï¼Œå¦‚æœä¸æ˜¯ä¼šè‡ªåŠ¨åŒ…è£…æˆ Promise å¯¹è±¡ã€‚</p>
<!-- æ ¹æ® MDN å®šä¹‰ï¼Œasync æ˜¯ä¸€ä¸ªé€šè¿‡å¼‚æ­¥æ‰§è¡Œå¹¶éšå¼è¿”å› Promise ä½œä¸ºç»“æœçš„å‡½æ•°ã€‚ -->

<p>Async/Await çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/async.jpg" alt="async"></p>
<h3 id="2-Object-values-ï¼ŒObject-entries"><a href="#2-Object-values-ï¼ŒObject-entries" class="headerlink" title="2.Object.values()ï¼ŒObject.entries()"></a>2.Object.values()ï¼ŒObject.entries()</h3><p>ES5 å¼•å…¥äº† Object.keys æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰å±æ€§çš„é”®åã€‚ES8 å¼•å…¥äº†è·Ÿ Object.keys é…å¥—çš„ Object.values å’Œ Object.entriesï¼Œä½œä¸ºéå†ä¸€ä¸ªå¯¹è±¡çš„è¡¥å……æ‰‹æ®µï¼Œä¾› forâ€¦of å¾ªç¯ä½¿ç”¨ã€‚</p>
<p>Object.values æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰å±æ€§çš„é”®å€¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const obj &#x3D; &#123; foo: &#39;bar&#39;, baz: 42 &#125;;</span><br><span class="line">Object.values(obj) &#x2F;&#x2F; [&quot;bar&quot;, 42]</span><br><span class="line">const obj &#x3D; &#123; 100: &#39;a&#39;, 2: &#39;b&#39;, 7: &#39;c&#39; &#125;;</span><br><span class="line">Object.values(obj) &#x2F;&#x2F; [&quot;b&quot;, &quot;c&quot;, &quot;a&quot;]</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå±æ€§åä¸ºæ•°å€¼çš„å±æ€§ï¼Œæ˜¯æŒ‰ç…§æ•°å€¼å¤§å°ï¼Œä»å°åˆ°å¤§éå†çš„ï¼Œå› æ­¤è¿”å›çš„é¡ºåºæ˜¯ bã€cã€aã€‚</p>
<p>Object.entries()æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰å±æ€§çš„é”®å€¼å¯¹æ•°ç»„ã€‚è¿™ä¸ªç‰¹æ€§æˆ‘ä»¬åé¢ä»‹ç» ES10 çš„ Object.fromEntries()è¿˜ä¼šå†æåˆ°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const obj &#x3D; &#123; foo: &#39;bar&#39;, baz: 42 &#125;;</span><br><span class="line">Object.entries(obj) &#x2F;&#x2F; [ [&quot;foo&quot;, &quot;bar&quot;], [&quot;baz&quot;, 42] ]</span><br><span class="line">const obj &#x3D; &#123; 10: &#39;xxx&#39;, 1: &#39;yyy&#39;, 3: &#39;zzz&#39; &#125;;</span><br><span class="line">Object.entries(obj); &#x2F;&#x2F; [[&#39;1&#39;, &#39;yyy&#39;], [&#39;3&#39;, &#39;zzz&#39;], [&#39;10&#39;: &#39;xxx&#39;]]</span><br></pre></td></tr></table></figure>

<p>Object.values()ä¸ Object.entries()å…¼å®¹æ€§ä¸€è‡´ï¼Œä¸‹é¢ä»¥ Object.values()ä¸ºä¾‹:<br><img src="/images/2020-06-27/values.jpg" alt="values"></p>
<h3 id="3-String-padding"><a href="#3-String-padding" class="headerlink" title="3.String padding"></a>3.String padding</h3><p>åœ¨ ES8 ä¸­ String æ–°å¢äº†ä¸¤ä¸ªå®ä¾‹å‡½æ•° String.prototype.padStart å’Œ String.prototype.padEndï¼Œå…è®¸å°†ç©ºå­—ç¬¦ä¸²æˆ–å…¶ä»–å­—ç¬¦ä¸²æ·»åŠ åˆ°åŸå§‹å­—ç¬¦ä¸²çš„å¼€å¤´æˆ–ç»“å°¾ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸‹ä½¿ç”¨è¯­æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String.padStart(targetLength,[padString])</span><br></pre></td></tr></table></figure>

<ul>
<li>targetLength(å¿…å¡«):å½“å‰å­—ç¬¦ä¸²éœ€è¦å¡«å……åˆ°çš„ç›®æ ‡é•¿åº¦ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å°äºå½“å‰å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™è¿”å›å½“å‰å­—ç¬¦ä¸²æœ¬èº«ã€‚</li>
<li>padString(å¯é€‰):å¡«å……å­—ç¬¦ä¸²ã€‚å¦‚æœå­—ç¬¦ä¸²å¤ªé•¿ï¼Œä½¿å¡«å……åçš„å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡äº†ç›®æ ‡é•¿åº¦ï¼Œåˆ™åªä¿ç•™æœ€å·¦ä¾§çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†ä¼šè¢«æˆªæ–­ï¼Œæ­¤å‚æ•°çš„ç¼ºçœå€¼ä¸º â€œ â€œã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#39;x&#39;.padStart(4, &#39;ab&#39;) &#x2F;&#x2F; &#39;abax&#39;</span><br><span class="line">&#39;x&#39;.padEnd(5, &#39;ab&#39;) &#x2F;&#x2F; &#39;xabab&#39;</span><br></pre></td></tr></table></figure>

<p>æœ‰æ—¶å€™æˆ‘ä»¬å¤„ç†æ—¥æœŸã€é‡‘é¢çš„æ—¶å€™ç»å¸¸è¦æ ¼å¼åŒ–ï¼Œè¿™ä¸ªç‰¹æ€§å°±æ´¾ä¸Šç”¨åœºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#39;12&#39;.padStart(10, &#39;YYYY-MM-DD&#39;) &#x2F;&#x2F; &quot;YYYY-MM-12&quot;</span><br><span class="line">&#39;09-12&#39;.padStart(10, &#39;YYYY-MM-DD&#39;) &#x2F;&#x2F; &quot;YYYY-09-12&quot;</span><br></pre></td></tr></table></figure>

<p>String padding çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/padding.jpg" alt="padding"></p>
<h3 id="4-Object-getOwnPropertyDescriptors"><a href="#4-Object-getOwnPropertyDescriptors" class="headerlink" title="4.Object.getOwnPropertyDescriptors()"></a>4.Object.getOwnPropertyDescriptors()</h3><p>ES5 çš„ Object.getOwnPropertyDescriptor()æ–¹æ³•ä¼šè¿”å›æŸä¸ªå¯¹è±¡å±æ€§çš„æè¿°å¯¹è±¡ï¼ˆdescriptorï¼‰ã€‚ES8 å¼•å…¥äº† Object.getOwnPropertyDescriptors()æ–¹æ³•ï¼Œè¿”å›æŒ‡å®šå¯¹è±¡æ‰€æœ‰è‡ªèº«å±æ€§ï¼ˆéç»§æ‰¿å±æ€§ï¼‰çš„æè¿°å¯¹è±¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const obj &#x3D; &#123;</span><br><span class="line">  name: &#39;smm&#39;,</span><br><span class="line">  get bar () &#123;</span><br><span class="line">    return &#39;abc&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">console.log(Object.getOwnPropertyDescriptors(obj))</span><br></pre></td></tr></table></figure>

<p>å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š<br><img src="/images/2020-06-27/obj.png" alt="obj"></p>
<p>è¯¥æ–¹æ³•çš„å¼•å…¥ç›®çš„ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³ Object.assign()æ— æ³•æ­£ç¡®æ‹·è´ get å±æ€§å’Œ set å±æ€§çš„é—®é¢˜ã€‚æˆ‘ä»¬æ¥çœ‹ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const source &#x3D; &#123;</span><br><span class="line">  set foo (value) &#123;</span><br><span class="line">    console.log(value)</span><br><span class="line">  &#125;,</span><br><span class="line">  get bar () &#123;</span><br><span class="line">    return &#39;smm&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const target1 &#x3D; &#123;&#125;</span><br><span class="line">Object.assign(target1, source)</span><br><span class="line">console.log(Object.getOwnPropertyDescriptor(target1, &#39;foo&#39;))</span><br></pre></td></tr></table></figure>

<p>è¿”å›å¦‚ä¸‹ç»“æœï¼š<br><img src="/images/2020-06-27/assign.png" alt="assign"></p>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œsource å¯¹è±¡çš„ foo å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªèµ‹å€¼å‡½æ•°ï¼ŒObject.assign æ–¹æ³•å°†è¿™ä¸ªå±æ€§æ‹·è´ç»™ target1 å¯¹è±¡ï¼Œç»“æœè¯¥å±æ€§çš„å€¼å˜æˆäº† undefinedã€‚è¿™æ˜¯å› ä¸º Object.assign æ–¹æ³•æ€»æ˜¯æ‹·è´ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œè€Œä¸ä¼šæ‹·è´å®ƒèƒŒåçš„èµ‹å€¼æ–¹æ³•æˆ–å–å€¼æ–¹æ³•ã€‚<br>è¿™æ—¶ Object.getOwnPropertyDescriptors()æ–¹æ³•é…åˆ Object.defineProperties()æ–¹æ³•ï¼Œå°±å¯ä»¥å®ç°æ­£ç¡®æ‹·è´ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const source &#x3D; &#123;</span><br><span class="line">  set foo (value) &#123;</span><br><span class="line">    console.log(value)</span><br><span class="line">  &#125;,</span><br><span class="line">  get bar () &#123;</span><br><span class="line">    return &#39;smm&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">const target2 &#x3D; &#123;&#125;</span><br><span class="line">Object.defineProperties(target2, Object.getOwnPropertyDescriptors(source))</span><br><span class="line">console.log(Object.getOwnPropertyDescriptor(target2, &#39;foo&#39;))</span><br></pre></td></tr></table></figure>

<p>è¿”å›å¦‚ä¸‹ç»“æœï¼š<br><img src="/images/2020-06-27/getOwnPropertyDescriptor.png" alt="getOwnPropertyDescriptor"></p>
<p>Object.getOwnPropertyDescriptors()çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/getOwnPropertyDescriptors.jpg" alt="getOwnPropertyDescriptors"></p>
<h2 id="ES9-æ–°ç‰¹æ€§"><a href="#ES9-æ–°ç‰¹æ€§" class="headerlink" title="ES9 æ–°ç‰¹æ€§"></a>ES9 æ–°ç‰¹æ€§</h2><h3 id="1-for-await-of"><a href="#1-for-await-of" class="headerlink" title="1.for await of"></a>1.for await of</h3><p>for of æ–¹æ³•èƒ½å¤Ÿéå†å…·æœ‰ Symbol.iterator æ¥å£çš„åŒæ­¥è¿­ä»£å™¨æ•°æ®ï¼Œä½†æ˜¯ä¸èƒ½éå†å¼‚æ­¥è¿­ä»£å™¨ã€‚ES9 æ–°å¢çš„ for await of å¯ä»¥ç”¨æ¥éå†å…·æœ‰ Symbol.asyncIterator æ–¹æ³•çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿå°±æ˜¯å¼‚æ­¥è¿­ä»£å™¨ï¼Œä¸”ä¼šç­‰å¾…å‰ä¸€ä¸ªæˆå‘˜çš„çŠ¶æ€æ”¹å˜åæ‰ä¼šéå†åˆ°ä¸‹ä¸€ä¸ªæˆå‘˜ï¼Œç›¸å½“äº async å‡½æ•°å†…éƒ¨çš„ awaitã€‚ç°åœ¨æˆ‘ä»¬æœ‰ä¸‰ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œæƒ³è¦å®ç°ä¾æ¬¡è¾“å‡ºç»“æœï¼Œè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; for oféå†</span><br><span class="line">function Gen (time) &#123;</span><br><span class="line">  return new Promise(function (resolve, reject) &#123;</span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">      resolve(time)</span><br><span class="line">    &#125;, time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">async function test () &#123;</span><br><span class="line">  let arr &#x3D; [Gen(2000), Gen(100), Gen(3000)]</span><br><span class="line">  for (let item of arr) &#123;</span><br><span class="line">    console.log(Date.now(), item.then(console.log))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">test()</span><br></pre></td></tr></table></figure>

<p>å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š<br><img src="/images/2020-06-27/for-of.png" alt="for-of"></p>
<p>ä¸Šè¿°ä»£ç è¯å®äº† for of æ–¹æ³•ä¸èƒ½éå†å¼‚æ­¥è¿­ä»£å™¨ï¼Œå¾—åˆ°çš„ç»“æœå¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€æœŸå¾…çš„ï¼Œäºæ˜¯ for await of å°±ç²‰å¢¨ç™»åœºå•¦!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function Gen (time) &#123;</span><br><span class="line">  return new Promise(function (resolve, reject) &#123;</span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">      resolve(time)</span><br><span class="line">    &#125;, time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">async function test () &#123;</span><br><span class="line">  let arr &#x3D; [Gen(2000), Gen(100), Gen(3000)]</span><br><span class="line">  for await (let item of arr) &#123;</span><br><span class="line">    console.log(Date.now(), item)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">test()</span><br><span class="line">&#x2F;&#x2F; 1575536194608 2000</span><br><span class="line">&#x2F;&#x2F; 1575536194608 100</span><br><span class="line">&#x2F;&#x2F; 1575536195608 3000</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ for await of éå†æ—¶ï¼Œä¼šç­‰å¾…å‰ä¸€ä¸ª Promise å¯¹è±¡çš„çŠ¶æ€æ”¹å˜åï¼Œå†éå†åˆ°ä¸‹ä¸€ä¸ªæˆå‘˜ã€‚</p>
<p>å¼‚æ­¥è¿­ä»£å™¨çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/for-await-of.jpg" alt="for-await-of"></p>
<h3 id="2-Object-Rest-Spread"><a href="#2-Object-Rest-Spread" class="headerlink" title="2.Object Rest Spread"></a>2.Object Rest Spread</h3><p>ES6 ä¸­æ·»åŠ çš„æœ€æ„æ€çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯ spread æ“ä½œç¬¦ã€‚ä½ ä¸ä»…å¯ä»¥ç”¨å®ƒæ›¿æ¢ cancat()å’Œ slice()æ–¹æ³•ï¼Œä½¿æ•°ç»„çš„æ“ä½œ(å¤åˆ¶ã€åˆå¹¶)æ›´åŠ ç®€å•ï¼Œè¿˜å¯ä»¥åœ¨æ•°ç»„å¿…é¡»ä»¥æ‹†è§£çš„æ–¹å¼ä½œä¸ºå‡½æ•°å‚æ•°çš„æƒ…å†µä¸‹ï¼Œspread æ“ä½œç¬¦ä¹Ÿå¾ˆå®ç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const arr1 &#x3D; [10, 20, 30];</span><br><span class="line">const copy &#x3D; [...arr1]; &#x2F;&#x2F; å¤åˆ¶</span><br><span class="line">console.log(copy);    &#x2F;&#x2F; [10, 20, 30]</span><br><span class="line">const arr2 &#x3D; [40, 50];</span><br><span class="line">const merge &#x3D; [...arr1, ...arr2]; &#x2F;&#x2F; åˆå¹¶</span><br><span class="line">console.log(merge);    &#x2F;&#x2F; [10, 20, 30, 40, 50]</span><br><span class="line">console.log(Math.max(...arr));    &#x2F;&#x2F; 30 æ‹†è§£</span><br></pre></td></tr></table></figure>

<p>ES9 é€šè¿‡å‘å¯¹è±¡æ–‡æœ¬æ·»åŠ æ‰©å±•å±æ€§è¿›ä¸€æ­¥æ‰©å±•äº†è¿™ç§è¯­æ³•ã€‚ä»–å¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ‹·è´åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸Šï¼Œå‚è€ƒä»¥ä¸‹æƒ…å½¢:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const input &#x3D; &#123;</span><br><span class="line">  a: 1,</span><br><span class="line">  b: 2,</span><br><span class="line">  c: 1</span><br><span class="line">&#125;</span><br><span class="line">const output &#x3D; &#123;</span><br><span class="line">  ...input,</span><br><span class="line">  c: 3</span><br><span class="line">&#125;</span><br><span class="line">console.log(output) &#x2F;&#x2F; &#123;a: 1, b: 2, c: 3&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç å¯ä»¥æŠŠ input å¯¹è±¡çš„æ•°æ®éƒ½æ·»åŠ åˆ° output å¯¹è±¡ä¸­ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå­˜åœ¨ç›¸åŒçš„å±æ€§åï¼Œåªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const input &#x3D; &#123;</span><br><span class="line">  a: 1,</span><br><span class="line">  b: 2</span><br><span class="line">&#125;</span><br><span class="line">const output &#x3D; &#123;</span><br><span class="line">  ...input,</span><br><span class="line">  c: 3</span><br><span class="line">&#125;</span><br><span class="line">input.a&#x3D;&#39;smm&#39;</span><br><span class="line">console.log(input,output) &#x2F;&#x2F; &#123;a: &quot;smm&quot;, b: 2&#125; &#123;a: 1, b: 2, c: 3&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œä¿®æ”¹ input å¯¹è±¡ä¸­çš„å€¼ï¼Œoutput å¹¶æ²¡æœ‰æ”¹å˜ï¼Œè¯´æ˜æ‰©å±•è¿ç®—ç¬¦æ‹·è´ä¸€ä¸ªå¯¹è±¡ï¼ˆç±»ä¼¼è¿™æ · obj2 = {â€¦obj1}ï¼‰ï¼Œå®ç°åªæ˜¯ä¸€ä¸ªå¯¹è±¡çš„æµ…æ‹·è´ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡çš„è¯ï¼Œè¯¥å¯¹è±¡çš„å¼•ç”¨ä¼šè¢«æ‹·è´ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const obj &#x3D; &#123;x: &#123;y: 10&#125;&#125;;</span><br><span class="line">const copy1 &#x3D; &#123;...obj&#125;;</span><br><span class="line">const copy2 &#x3D; &#123;...obj&#125;;</span><br><span class="line">obj.x.y&#x3D;&#39;smm&#39;</span><br><span class="line">console.log(copy1,copy2) &#x2F;&#x2F; x: &#123;y: &quot;smm&quot;&#125; x: &#123;y: &quot;smm&quot;&#125;</span><br><span class="line">console.log(copy1.x &#x3D;&#x3D;&#x3D; copy2.x);    &#x2F;&#x2F; â†’ true</span><br></pre></td></tr></table></figure>

<p>copy1.x å’Œ copy2.x æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œæ‰€ä»¥ä»–ä»¬ä¸¥æ ¼ç›¸ç­‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const input &#x3D; &#123;</span><br><span class="line">  a: 1,</span><br><span class="line">  b: 2,</span><br><span class="line">  c: 3</span><br><span class="line">&#125;</span><br><span class="line">let &#123; a, ...rest &#125; &#x3D; input</span><br><span class="line">console.log(a, rest) &#x2F;&#x2F; 1 &#123;b: 2, c: 3&#125;</span><br></pre></td></tr></table></figure>

<p>å½“å¯¹è±¡ key-value ä¸ç¡®å®šçš„æ—¶å€™ï¼ŒæŠŠå¿…é€‰çš„ key èµ‹å€¼ç»™å˜é‡ï¼Œç”¨ä¸€ä¸ªå˜é‡æ”¶æ•›å…¶ä»–å¯é€‰çš„ key æ•°æ®ï¼Œè¿™åœ¨ä¹‹å‰æ˜¯åšä¸åˆ°çš„ã€‚æ³¨æ„ï¼Œrest å±æ€§å¿…é¡»å§‹ç»ˆå‡ºç°åœ¨å¯¹è±¡çš„æœ«å°¾ï¼Œå¦åˆ™å°†æŠ›å‡ºé”™è¯¯ã€‚<br>Rest ä¸ Spread å…¼å®¹æ€§ä¸€è‡´ï¼Œä¸‹åˆ—ä»¥ spread ä¸ºä¾‹ï¼š<br><img src="/images/2020-06-27/spread.jpg" alt="spread"></p>
<h3 id="3-Promise-prototype-finally"><a href="#3-Promise-prototype-finally" class="headerlink" title="3.Promise.prototype.finally()"></a>3.Promise.prototype.finally()</h3><p>Promise.prototype.finally() æ–¹æ³•è¿”å›ä¸€ä¸ª Promiseï¼Œåœ¨ promise æ‰§è¡Œç»“æŸæ—¶ï¼Œæ— è®ºç»“æœæ˜¯ fulfilled æˆ–è€…æ˜¯ rejectedï¼Œåœ¨æ‰§è¡Œ then()å’Œ catch()åï¼Œéƒ½ä¼šæ‰§è¡Œ finally æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fetch(&#39;https:&#x2F;&#x2F;xxx.com&#39;)</span><br><span class="line">  .then((response) &#x3D;&gt; &#123;</span><br><span class="line">    console.log(response.status);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch((error) &#x3D;&gt; &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;)</span><br><span class="line">  .finally(() &#x3D;&gt; &#123;</span><br><span class="line">    document.querySelector(&#39;#spinner&#39;).style.display &#x3D; &#39;none&#39;;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>æ— è®ºæ“ä½œæ˜¯å¦æˆåŠŸï¼Œå½“æ‚¨éœ€è¦åœ¨æ“ä½œå®Œæˆåè¿›è¡Œä¸€äº›æ¸…ç†æ—¶ï¼Œfinally()æ–¹æ³•å°±æ´¾ä¸Šç”¨åœºäº†ã€‚è¿™ä¸ºæŒ‡å®šæ‰§è¡Œå®Œ promise åï¼Œæ— è®ºç»“æœæ˜¯ fulfilled è¿˜æ˜¯ rejected éƒ½éœ€è¦æ‰§è¡Œçš„ä»£ç æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œé¿å…åŒæ ·çš„è¯­å¥éœ€è¦åœ¨ then()å’Œ catch()ä¸­å„å†™ä¸€æ¬¡çš„æƒ…å†µã€‚<br>Promise.prototype.finally()çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/finally.jpg" alt="finally"></p>
<h3 id="4-æ–°çš„æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ€§"><a href="#4-æ–°çš„æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ€§" class="headerlink" title="4.æ–°çš„æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ€§"></a>4.æ–°çš„æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ€§</h3><p>ES9 ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ·»åŠ äº†å››ä¸ªæ–°ç‰¹æ€§ï¼Œè¿›ä¸€æ­¥æé«˜äº† JavaScript çš„å­—ç¬¦ä¸²å¤„ç†èƒ½åŠ›ã€‚è¿™äº›ç‰¹ç‚¹å¦‚ä¸‹:</p>
<ul>
<li>s (dotAll) æ ‡å¿—</li>
<li>å‘½åæ•è·ç»„</li>
<li>Lookbehind åè¡Œæ–­è¨€</li>
<li>Unicode å±æ€§è½¬ä¹‰</li>
</ul>
<h4 id="ï¼ˆ1ï¼‰s-dotAll-flag"><a href="#ï¼ˆ1ï¼‰s-dotAll-flag" class="headerlink" title="ï¼ˆ1ï¼‰s(dotAll)flag"></a>ï¼ˆ1ï¼‰s(dotAll)flag</h4><p>æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œç‚¹ï¼ˆ.ï¼‰æ˜¯ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œä»£è¡¨ä»»æ„çš„å•ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªä¾‹å¤–ã€‚ä¸€ä¸ªæ˜¯å››ä¸ªå­—èŠ‚çš„ UTF-16 å­—ç¬¦ï¼Œè¿™ä¸ªå¯ä»¥ç”¨ u ä¿®é¥°ç¬¦è§£å†³ï¼›å¦ä¸€ä¸ªæ˜¯è¡Œç»ˆæ­¢ç¬¦,å¦‚æ¢è¡Œç¬¦(\n)æˆ–å›è½¦ç¬¦(\r),è¿™ä¸ªå¯ä»¥é€šè¿‡ ES9 çš„ s(dotAll)flagï¼Œåœ¨åŸæ­£åˆ™è¡¨è¾¾å¼åŸºç¡€ä¸Šæ·»åŠ  s è¡¨ç¤º:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(&#x2F;foo.bar&#x2F;.test(&#39;foo\nbar&#39;)) &#x2F;&#x2F; false</span><br><span class="line">console.log(&#x2F;foo.bar&#x2F;s.test(&#39;foo\nbar&#39;)) &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰å‘½åæ•è·ç»„"><a href="#ï¼ˆ2ï¼‰å‘½åæ•è·ç»„" class="headerlink" title="ï¼ˆ2ï¼‰å‘½åæ•è·ç»„"></a>ï¼ˆ2ï¼‰å‘½åæ•è·ç»„</h4><p>ES9 å¼•å…¥äº†å‘½åæ•è·ç»„ï¼Œå…è®¸ä¸ºæ¯ä¸€ä¸ªç»„åŒ¹é…æŒ‡å®šä¸€ä¸ªåå­—ï¼Œæ—¢ä¾¿äºé˜…è¯»ä»£ç ï¼Œåˆä¾¿äºå¼•ç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const re &#x3D; &#x2F;(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)&#x2F;;</span><br><span class="line">const match &#x3D; re.exec(&#39;2020-06-27&#39;);</span><br><span class="line">console.log(match.groups);          &#x2F;&#x2F; â†’ &#123;year: &quot;2019&quot;, month: &quot;01&quot;, day: &quot;01&quot;&#125;</span><br><span class="line">console.log(match.groups.year);     &#x2F;&#x2F; â†’ 2020</span><br><span class="line">console.log(match.groups.month);    &#x2F;&#x2F; â†’ 06</span><br><span class="line">console.log(match.groups.day);      &#x2F;&#x2F; â†’ 27</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­ï¼Œâ€œå‘½åæ•è·ç»„â€åœ¨åœ†æ‹¬å·å†…éƒ¨ï¼Œæ¨¡å¼çš„å¤´éƒ¨æ·»åŠ â€œé—®å· + å°–æ‹¬å· + ç»„åâ€ï¼ˆ?ï¼‰ï¼Œç„¶åå°±å¯ä»¥åœ¨ exec æ–¹æ³•è¿”å›ç»“æœçš„ groups å±æ€§ä¸Šå¼•ç”¨è¯¥ç»„åã€‚</p>
<p>å‘½åæ•è·ç»„ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨ replace()æ–¹æ³•ä¸­ï¼Œä¾‹å¦‚å°†æ—¥æœŸè½¬æ¢ä¸ºç¾å›½çš„ MM-DD-YYYY æ ¼å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const re &#x3D; &#x2F;(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)&#x2F;</span><br><span class="line">const usDate &#x3D; &#39;2020-06-27&#39;.replace(re, &#39;$&lt;month&gt;-$&lt;day&gt;-$&lt;year&gt;&#39;)</span><br><span class="line">console.log(usDate) &#x2F;&#x2F; 06-27-2020</span><br></pre></td></tr></table></figure>

<h4 id="ï¼ˆ3ï¼‰Lookbehind-åè¡Œæ–­è¨€"><a href="#ï¼ˆ3ï¼‰Lookbehind-åè¡Œæ–­è¨€" class="headerlink" title="ï¼ˆ3ï¼‰Lookbehind åè¡Œæ–­è¨€"></a>ï¼ˆ3ï¼‰Lookbehind åè¡Œæ–­è¨€</h4><p>JavaScript è¯­è¨€çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œåªæ”¯æŒå…ˆè¡Œæ–­è¨€ï¼Œä¸æ”¯æŒåè¡Œæ–­è¨€ï¼Œå…ˆè¡Œæ–­è¨€æˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ä¸ºâ€å…ˆé‡åˆ°ä¸€ä¸ªæ¡ä»¶ï¼Œå†åˆ¤æ–­åé¢æ˜¯å¦æ»¡è¶³â€ï¼Œå¦‚ä¸‹é¢ä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">et test &#x3D; &#39;hello world&#39;</span><br><span class="line">console.log(test.match(&#x2F;hello(?&#x3D;\sworld)&#x2F;))</span><br><span class="line">&#x2F;&#x2F; [&quot;hello&quot;, index: 0, input: &quot;hello world&quot;, groups: undefined]</span><br></pre></td></tr></table></figure>

<p>ä½†æœ‰æ—¶æˆ‘ä»¬æƒ³åˆ¤æ–­å‰é¢æ˜¯ world çš„ helloï¼Œè¿™ä¸ªä»£ç æ˜¯å®ç°ä¸äº†çš„ã€‚åœ¨ ES9 å°±æ”¯æŒè¿™ä¸ªåè¡Œæ–­è¨€äº†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let test &#x3D; &#39;world hello&#39;</span><br><span class="line">console.log(test.match(&#x2F;(?&lt;&#x3D;world\s)hello&#x2F;))</span><br><span class="line">&#x2F;&#x2F; [&quot;hello&quot;, index: 6, input: &quot;world hello&quot;, groups: undefined]</span><br></pre></td></tr></table></figure>

<p>(?&lt;â€¦)æ˜¯åè¡Œæ–­è¨€çš„ç¬¦å·ï¼Œ(?..)æ˜¯å…ˆè¡Œæ–­è¨€çš„ç¬¦å·ï¼Œç„¶åç»“åˆ =(ç­‰äº)ã€!(ä¸ç­‰)ã€\1(æ•è·åŒ¹é…)ã€‚</p>
<h4 id="ï¼ˆ4ï¼‰Unicode-å±æ€§è½¬ä¹‰"><a href="#ï¼ˆ4ï¼‰Unicode-å±æ€§è½¬ä¹‰" class="headerlink" title="ï¼ˆ4ï¼‰Unicode å±æ€§è½¬ä¹‰"></a>ï¼ˆ4ï¼‰Unicode å±æ€§è½¬ä¹‰</h4><p>ES2018 å¼•å…¥äº†ä¸€ç§æ–°çš„ç±»çš„å†™æ³•\p{â€¦}å’Œ\P{â€¦}ï¼Œå…è®¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç¬¦åˆ Unicode æŸç§å±æ€§çš„æ‰€æœ‰å­—ç¬¦ã€‚æ¯”å¦‚ä½ å¯ä»¥ä½¿ç”¨\p{Number}æ¥åŒ¹é…æ‰€æœ‰çš„ Unicode æ•°å­—ï¼Œä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³åŒ¹é…çš„ Unicode å­—ç¬¦ ã‰› å­—ç¬¦ä¸²:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const str &#x3D; &#39;ã‰›&#39;;</span><br><span class="line">console.log(&#x2F;\d&#x2F;u.test(str));    &#x2F;&#x2F; â†’ false</span><br><span class="line">console.log(&#x2F;\p&#123;Number&#125;&#x2F;u.test(str));     &#x2F;&#x2F; â†’ true</span><br></pre></td></tr></table></figure>

<p>åŒæ ·çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨\p{Alphabetic}æ¥åŒ¹é…æ‰€æœ‰çš„ Unicode å•è¯å­—ç¬¦:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const str &#x3D; &#39;Ø¶&#39;;</span><br><span class="line">console.log(&#x2F;\p&#123;Alphabetic&#125;&#x2F;u.test(str));     &#x2F;&#x2F; â†’ true</span><br><span class="line">&#x2F;&#x2F; the \w shorthand cannot match Ø¶</span><br><span class="line">console.log(&#x2F;\w&#x2F;u.test(str));    &#x2F;&#x2F; â†’ false</span><br></pre></td></tr></table></figure>

<p>åŒæ ·æœ‰ä¸€ä¸ªè´Ÿå‘çš„ Unicode å±æ€§è½¬ä¹‰æ¨¡æ¿ \P{â€¦}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">console.log(&#x2F;\P&#123;Number&#125;&#x2F;u.test(&#39;ã‰›&#39;));    &#x2F;&#x2F; â†’ false</span><br><span class="line">console.log(&#x2F;\P&#123;Number&#125;&#x2F;u.test(&#39;Ø¶&#39;));    &#x2F;&#x2F; â†’ true</span><br><span class="line">console.log(&#x2F;\P&#123;Alphabetic&#125;&#x2F;u.test(&#39;ã‰›&#39;));    &#x2F;&#x2F; â†’ true</span><br><span class="line">console.log(&#x2F;\P&#123;Alphabetic&#125;&#x2F;u.test(&#39;Ø¶&#39;));    &#x2F;&#x2F; â†’ false</span><br></pre></td></tr></table></figure>

<p>é™¤äº†å­—æ¯å’Œæ•°å­—ä¹‹å¤–ï¼ŒUnicode å±æ€§è½¬ä¹‰ä¸­è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–ä¸€äº›å±æ€§ã€‚</p>
<p>ä»¥ä¸Šè¿™å‡ ä¸ªç‰¹æ€§çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/regular.jpg" alt="regular"></p>
<h2 id="ES10-æ–°ç‰¹æ€§"><a href="#ES10-æ–°ç‰¹æ€§" class="headerlink" title="ES10 æ–°ç‰¹æ€§"></a>ES10 æ–°ç‰¹æ€§</h2><h3 id="1-Array-prototype-flat"><a href="#1-Array-prototype-flat" class="headerlink" title="1.Array.prototype.flat()"></a>1.Array.prototype.flat()</h3><p>flat() æ–¹æ³•ä¼šæŒ‰ç…§ä¸€ä¸ªå¯æŒ‡å®šçš„æ·±åº¦é€’å½’éå†æ•°ç»„ï¼Œå¹¶å°†æ‰€æœ‰å…ƒç´ ä¸éå†åˆ°çš„å­æ•°ç»„ä¸­çš„å…ƒç´ åˆå¹¶ä¸ºä¸€ä¸ªæ–°æ•°ç»„è¿”å›ã€‚arr.flat(depth)ï¼Œ é»˜è®¤å€¼æ˜¯ 1ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const numbers1 &#x3D; [1, 2, [3, 4, [5, 6]]]</span><br><span class="line">console.log(numbers1.flat())&#x2F;&#x2F; [1, 2, 3, 4, [5, 6]]</span><br><span class="line">const numbers2 &#x3D; [1, 2, [3, 4, [5, 6]]]</span><br><span class="line">console.log(numbers2.flat(2))&#x2F;&#x2F; [1, 2, 3, 4, 5, 6]</span><br></pre></td></tr></table></figure>

<p>Array.prototype.flat çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/flat.jpg" alt="flat"></p>
<h3 id="2-Array-prototype-flatMap"><a href="#2-Array-prototype-flatMap" class="headerlink" title="2.Array.prototype.flatMap()"></a>2.Array.prototype.flatMap()</h3><p>flatMap() æ–¹æ³•é¦–å…ˆä½¿ç”¨æ˜ å°„å‡½æ•°æ˜ å°„æ¯ä¸ªå…ƒç´ ï¼Œç„¶åå°†ç»“æœå‹ç¼©æˆä¸€ä¸ªæ–°æ•°ç»„ã€‚ä»æ–¹æ³•çš„åå­—ä¸Šä¹Ÿå¯ä»¥çœ‹å‡ºæ¥å®ƒåŒ…å«ä¸¤éƒ¨åˆ†åŠŸèƒ½ä¸€ä¸ªæ˜¯ mapï¼Œä¸€ä¸ªæ˜¯ flatï¼ˆæ·±åº¦ä¸º 1ï¼‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let arr &#x3D; [1, 2, 3]</span><br><span class="line">console.log(arr.map(item &#x3D;&gt; [item * 2]).flat()) &#x2F;&#x2F; [2, 4, 6]</span><br><span class="line">console.log(arr.flatMap(item &#x3D;&gt; [item * 2])) &#x2F;&#x2F; [2, 4, 6]</span><br></pre></td></tr></table></figure>

<p>å®é™…ä¸Š flatMap æ˜¯ç»¼åˆäº† map å’Œ flat çš„æ“ä½œï¼Œæ‰€ä»¥å®ƒä¹Ÿåªèƒ½æ‰“å¹³ä¸€å±‚ã€‚<br>Array.prototype.flatmap çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/flatMap.jpg" alt="flatMap"></p>
<h3 id="3-Object-fromEntries"><a href="#3-Object-fromEntries" class="headerlink" title="3.Object.fromEntries()"></a>3.Object.fromEntries()</h3><p>Object.fromEntries è¿™ä¸ªæ–°çš„ API å®ç°äº†ä¸ Object.entries ç›¸åçš„æ“ä½œã€‚è¿™ä½¿å¾—æ ¹æ®å¯¹è±¡çš„ entries å¾ˆå®¹æ˜“å¾—åˆ° objectã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const object &#x3D; &#123; x: 23, y:24 &#125;;</span><br><span class="line">const entries &#x3D; Object.entries(object); &#x2F;&#x2F; [[&#39;x&#39;, 23], [&#39;y&#39;, 24]]</span><br><span class="line">const result &#x3D; Object.fromEntries(entries); &#x2F;&#x2F; &#123; x: 23, y: 24 &#125;</span><br></pre></td></tr></table></figure>

<p>Object.entries è¿™ä¸ªæ–¹æ³•å¯ä»¥å°†å¯¹è±¡è½¬æ¢ä¸ºæ•°ç»„,è¿™æ ·å¯¹è±¡å°±å¯ä»¥ä½¿ç”¨æ•°ç»„åŸå‹ä¸­çš„ä¼—å¤šå†…ç½®æ–¹æ³•ï¼Œæ¯”å¦‚ map, filterã€reduceï¼Œç„¶åé€šè¿‡ Object.fromEntries()å†æ¬¡è½¬åŒ–ä¸ºå¯¹è±¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; ç”¨Object.fromEntries()æ¥å®ç°</span><br><span class="line">const obj &#x3D; &#123;</span><br><span class="line">  a: 21,</span><br><span class="line">  b: 22,</span><br><span class="line">  c: 23</span><br><span class="line">&#125;</span><br><span class="line">let res &#x3D; Object.fromEntries(Object.entries(obj).filter(([a, b]) &#x3D;&gt; b &gt; 21))</span><br><span class="line">console.log(res) &#x2F;&#x2F; &#123;b: 22, c: 23&#125;</span><br></pre></td></tr></table></figure>

<p>Object.fromEntries()çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/fromEntries.jpg" alt="fromEntries"></p>
<h3 id="4-String-trimStart-å’Œ-String-trimEnd"><a href="#4-String-trimStart-å’Œ-String-trimEnd" class="headerlink" title="4.String.trimStart å’Œ String.trimEnd"></a>4.String.trimStart å’Œ String.trimEnd</h3><p>trimStart() æ–¹æ³•ä»å­—ç¬¦ä¸²çš„å¼€å¤´åˆ é™¤ç©ºæ ¼ï¼ŒtrimLeft()æ˜¯æ­¤æ–¹æ³•çš„åˆ«åã€‚<br>trimEnd() æ–¹æ³•ä»ä¸€ä¸ªå­—ç¬¦ä¸²çš„å³ç«¯ç§»é™¤ç©ºç™½å­—ç¬¦ï¼ŒtrimRight æ˜¯ trimEnd çš„åˆ«åã€‚<br>String.trimStart å’Œ String.trimEnd ä¸¤è€…å…¼å®¹æ€§ä¸€è‡´ï¼Œä¸‹å›¾ä»¥ trimStart ä¸ºä¾‹ï¼š<br><img src="/images/2020-06-27/trimStart.jpg" alt="trimStart"></p>
<h3 id="5-String-prototype-matchAll"><a href="#5-String-prototype-matchAll" class="headerlink" title="5.String.prototype.matchAll"></a>5.String.prototype.matchAll</h3><p>é€šè¿‡ ES10 çš„ String.prototype.matchAll æ–¹æ³•ï¼Œå¯ä»¥ä¸€æ¬¡æ€§å–å‡ºæ‰€æœ‰åŒ¹é…ã€‚string.matchAll(regex)è¿”å›çš„æ˜¯éå†å™¨ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ forâ€¦of å¾ªç¯å–å‡ºã€‚<br>String.prototype.matchAll çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/matchAll.jpg" alt="matchAll"></p>
<h3 id="6-tryâ€¦catch"><a href="#6-tryâ€¦catch" class="headerlink" title="6.tryâ€¦catch"></a>6.tryâ€¦catch</h3><p>åœ¨ ES10 ä¸­ï¼Œtry-catch è¯­å¥ä¸­çš„å‚æ•°å˜ä¸ºäº†ä¸€ä¸ªå¯é€‰é¡¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">  console.log(&#39;Foobar&#39;)</span><br><span class="line">&#125; catch &#123;</span><br><span class="line">  console.error(&#39;Bar&#39;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>tryâ€¦catch çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/tryCatch.jpg" alt="tryCatch"></p>
<h3 id="7-BigInt"><a href="#7-BigInt" class="headerlink" title="7.BigInt"></a>7.BigInt</h3><p>JavaScript æ‰€æœ‰æ•°å­—éƒ½ä¿å­˜æˆ 64 ä½æµ®ç‚¹æ•°ï¼Œè¿™ç»™æ•°å€¼çš„è¡¨ç¤ºå¸¦æ¥äº†ä¸¤å¤§é™åˆ¶ã€‚ä¸€æ˜¯æ•°å€¼çš„ç²¾åº¦åªèƒ½åˆ° 53 ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆç›¸å½“äº 16 ä¸ªåè¿›åˆ¶ä½ï¼‰ï¼Œå¤§äºè¿™ä¸ªèŒƒå›´çš„æ•´æ•°ï¼ŒJavaScript æ˜¯æ— æ³•ç²¾ç¡®è¡¨ç¤ºçš„ï¼Œè¿™ä½¿å¾— JavaScript ä¸é€‚åˆè¿›è¡Œç§‘å­¦å’Œé‡‘èæ–¹é¢çš„ç²¾ç¡®è®¡ç®—ã€‚äºŒæ˜¯å¤§äºæˆ–ç­‰äº 2 çš„ 1024 æ¬¡æ–¹çš„æ•°å€¼ï¼ŒJavaScript æ— æ³•è¡¨ç¤ºï¼Œä¼šè¿”å› Infinityã€‚<br>ES10 å¼•å…¥äº†ä¸€ç§æ–°çš„æ•°æ®ç±»å‹ BigIntï¼ˆå¤§æ•´æ•°ï¼‰ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚BigInt åªç”¨æ¥è¡¨ç¤ºæ•´æ•°ï¼Œæ²¡æœ‰ä½æ•°çš„é™åˆ¶ï¼Œä»»ä½•ä½æ•°çš„æ•´æ•°éƒ½å¯ä»¥ç²¾ç¡®è¡¨ç¤ºã€‚<br>åˆ›å»º BigInt ç±»å‹çš„å€¼ä¹Ÿéå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨æ•°å­—åé¢åŠ ä¸Š n å³å¯ã€‚ä¾‹å¦‚ï¼Œ123 å˜ä¸º 123nã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å…¨å±€æ–¹æ³• BigInt(value) è½¬åŒ–ï¼Œå…¥å‚ value ä¸ºæ•°å­—æˆ–æ•°å­—å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const aNumber &#x3D; 111;</span><br><span class="line">const aBigInt &#x3D; BigInt(aNumber);</span><br><span class="line">aBigInt &#x3D;&#x3D;&#x3D; 111n &#x2F;&#x2F; true</span><br><span class="line">typeof aBigInt &#x3D;&#x3D;&#x3D; &#39;bigint&#39; &#x2F;&#x2F; true</span><br><span class="line">typeof 111 &#x2F;&#x2F; &quot;number&quot;</span><br><span class="line">typeof 111n &#x2F;&#x2F; &quot;bigint&quot;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœç®—ä¸Š BigIntï¼ŒJavaScript ä¸­åŸå§‹ç±»å‹å°±ä» 6 ä¸ªå˜ä¸ºäº† 7 ä¸ªã€‚</p>
<ul>
<li>Boolean</li>
<li>Null</li>
<li>Undefined</li>
<li>Number</li>
<li>String</li>
<li>Symbol(new in ECMAScript 2015)</li>
<li>BigInt (new in ECMAScript 2019)</li>
</ul>
<p>BigInt çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/bigInt.jpg" alt="bigInt"></p>
<h3 id="8-Symbol-prototype-description"><a href="#8-Symbol-prototype-description" class="headerlink" title="8.Symbol.prototype.description"></a>8.Symbol.prototype.description</h3><p>Symbol çš„æè¿°åªè¢«å­˜å‚¨åœ¨å†…éƒ¨çš„ [[Description]]ï¼Œæ²¡æœ‰ç›´æ¥å¯¹å¤–æš´éœ²ï¼Œæˆ‘ä»¬åªæœ‰è°ƒç”¨ Symbol çš„ toString() æ—¶æ‰å¯ä»¥è¯»å–è¿™ä¸ªå±æ€§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Symbol(&#39;desc&#39;).description;  &#x2F;&#x2F; &quot;desc&quot;</span><br><span class="line">Symbol(&#39;&#39;).description;      &#x2F;&#x2F; &quot;&quot;</span><br><span class="line">Symbol().description;        &#x2F;&#x2F; undefined</span><br></pre></td></tr></table></figure>

<p>Symbol.prototype.description çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/description.jpg" alt="description"></p>
<h3 id="9-Function-prototype-toString"><a href="#9-Function-prototype-toString" class="headerlink" title="9.Function.prototype.toString()"></a>9.Function.prototype.toString()</h3><p>ES2019 ä¸­ï¼ŒFunction.toString()å‘ç”Ÿäº†å˜åŒ–ã€‚ä¹‹å‰æ‰§è¡Œè¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå¾—åˆ°çš„å­—ç¬¦ä¸²æ˜¯å»ç©ºç™½ç¬¦å·çš„ã€‚è€Œç°åœ¨ï¼Œå¾—åˆ°çš„å­—ç¬¦ä¸²å‘ˆç°å‡ºåŸæœ¬æºç çš„æ ·å­ï¼š<br>Function.prototype.toString()çš„æ”¯æŒæƒ…å†µï¼š<br><img src="/images/2020-06-27/toString.jpg" alt="toString"></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/06/27/ES7%E3%80%81ES8%E3%80%81ES9%E3%80%81ES10%E6%96%B0%E7%89%B9%E6%80%A7%E5%A4%A7%E7%9B%98%E7%82%B9/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-HTTP2ä¹‹å¸§" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/17/HTTP2%E4%B9%8B%E5%B8%A7/">HTTP2ä¹‹å¸§</a>
    </h1>
  

        
        <a href="/2020/05/17/HTTP2%E4%B9%8B%E5%B8%A7/" class="archive-article-date">
  	<time datetime="2020-05-17T10:39:15.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-05-17</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>å»ºç«‹ HTTP / 2 è¿æ¥åï¼Œç«¯ç‚¹å³å¯å¼€å§‹äº¤æ¢å¸§ã€‚</p>
<h2 id="å¸§çš„æ ¼å¼"><a href="#å¸§çš„æ ¼å¼" class="headerlink" title="å¸§çš„æ ¼å¼"></a>å¸§çš„æ ¼å¼</h2><p>æ‰€æœ‰å¸§å‡ä»¥å›ºå®šçš„ 9 ä¸ªå­—èŠ‚æ ‡é¢˜å¼€å¤´ï¼Œåè·Ÿä¸€ä¸ªå¯å˜çš„é•¿åº¦æœ‰æ•ˆè½½è·ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“+<br>| Length (24) |<br>+â€”â€”â€”â€”â€”+â€”â€”â€”â€”â€”+â€”â€”â€”â€”â€”+<br>| Type (8) | Flags (8) |<br>+-+â€”â€”â€”â€”-+â€”â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+<br>|R| Stream Identifier (31) |<br>+=+=============================================================+<br>| Frame Payload (0â€¦) â€¦<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+</p>
<p>å¸§å¤´çš„å­—æ®µå®šä¹‰ä¸ºï¼š<br>Lengthï¼šå¸§æœ‰æ•ˆè½½è·çš„é•¿åº¦ï¼Œè¡¨ç¤ºä¸ºæ— ç¬¦å· 24 ä½æ•´æ•°ã€‚ä¸å¾—å¤§äº 2 ^ 14ï¼ˆ16,384ï¼‰ï¼Œé™¤éæ¥æ”¶è€…è®¾ç½® SETTINGS_MAX_FRAME_SIZEã€‚<br>å¸§å¤´çš„ 9 ä¸ªå­—èŠ‚ç»„ä¸åŒ…å«åœ¨è¯¥å€¼ä¸­ã€‚<br>Typeï¼šå¸§çš„ 8 ä½ç±»å‹ã€‚å¸§ç±»å‹å†³å®šäº†å¸§çš„æ ¼å¼å’Œè¯­ä¹‰ï¼Œä»»ä½•ç±»å‹æœªçŸ¥çš„å¸§å°†è¢«å¿½ç•¥å¹¶ä¸¢å¼ƒã€‚<br>Flagsï¼šä¸€ä¸ª 8 ä½çš„å­—æ®µï¼Œç•™ç»™å¸§ç”¨ä¸€ä¸ªç‰¹å®šçš„å¸ƒå°”å€¼æ ‡å¿—å®ƒçš„ç±»å‹ã€‚æ²¡æœ‰ç‰¹å®šæ ‡å¿—ç±»å‹çš„å¸§ï¼Œå‘é€æ—¶å¿…é¡»å¿½ç•¥ï¼Œå¹¶ä¸”å¿…é¡»ä¿æŒæœªè®¾ç½®çŠ¶ï¼ˆ0x0ï¼‰ã€‚<br>Rï¼šä¿ç•™çš„ 1 ä½å­—æ®µã€‚è¯¥ä½çš„è¯­ä¹‰æ˜¯ä¸ç¡®å®šçš„ï¼Œå‘é€æ—¶è¯¥ä½å¿…é¡»ä¿æŒæœªè®¾ç½®çŠ¶æ€ï¼ˆ0x0ï¼‰ï¼Œä¸”å¿…é¡»ä¸ºæ¥æ”¶æ—¶å¿½ç•¥ã€‚<br>Stream Identifierï¼šæµæ ‡è¯†ç¬¦ï¼Œæ˜¯æ— ç¬¦å·çš„ 31 ä½æ•´æ•°ã€‚<br>Frame Payloadï¼šå¸§æœ‰æ•ˆè´Ÿè½½çš„ç»“æ„å’Œå†…å®¹å®Œå…¨å–å†³äºåœ¨å¸§çš„ç±»å‹ã€‚</p>
<h2 id="å¸§çš„å¤§å°"><a href="#å¸§çš„å¤§å°" class="headerlink" title="å¸§çš„å¤§å°"></a>å¸§çš„å¤§å°</h2><p>å¸§æœ‰æ•ˆè´Ÿè½½çš„å¤§å°å—æ¥æ”¶è€…çš„ SETTINGS_MAX_FRAME_SIZE è®¾ç½®ã€‚è¿™ä¸ªè®¾ç½®å¯ä»¥æ˜¯ 2 ^ 14ï¼ˆ16,384ï¼‰å’Œ 2 ^ 24-1ï¼ˆ16,777,215ï¼‰ä¹‹é—´çš„ä»»ä½•å€¼ã€‚<br>æ‰€æœ‰å®ç°éƒ½å¿…é¡»èƒ½å¤Ÿæ¥æ”¶å¹¶ä¸”å¤„ç†é•¿åº¦ä¸è¶…è¿‡ 2 ^ 14 ä¸ªå­—èŠ‚çš„å¸§ï¼Œå†åŠ ä¸Š 9 ä¸ªå­—èŠ‚çš„å¸§æ ‡é¢˜ï¼ˆç¬¬ 4.1 èŠ‚ï¼‰ã€‚æè¿°å¸§çš„å¤§å°æ—¶ï¼Œä¸åŒ…å«å¸§å¤´ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæŸäº›ç‰¹å®šçš„å¸§ï¼Œä¾‹å¦‚ï¼šPINGï¼Œå…è®¸çš„æœ‰æ•ˆè½½è·æ•°æ®é‡æœ‰å…¶ä»–é™åˆ¶ã€‚</p>
</blockquote>
<p>å¦‚æœä¸€ä¸ªå¸§è¶…è¿‡ SETTINGS_MAX_FRAME_SIZE ä¸­å®šä¹‰çš„å¤§å°ï¼Œæˆ–è€…è¶…è¿‡ä»»ä½•ä¸ºå¸§ç±»å‹å®šä¹‰çš„é™åˆ¶ï¼Œæˆ–è€…å¤ªå°è€Œæ— æ³•åŒ…å«å¿…å¡«å¸§æ•°æ®ï¼Œ ç«¯ç‚¹å¿…é¡»å‘é€ä¸€ä¸ªé”™è¯¯ä»£ç  FRAME_SIZE_ERRORã€‚å¸§ä¸­çš„å¸§å¤§å°é”™è¯¯å¯èƒ½ä¼šæ”¹å˜æ•´ä¸ªè¿æ¥çš„çŠ¶æ€ï¼Œå¿…é¡»è§†ä¸ºè¿æ¥é”™è¯¯ï¼› è¿™åŒ…æ‹¬ä»»ä½•å¸¦æœ‰æ ‡é¢˜çš„å¸§å—ï¼ˆå³ HEADERSï¼ŒPUSH_PROMISE å’Œ CONTINUATIONï¼‰ï¼Œè®¾ç½®ä»¥åŠä»»ä½•æµæ ‡è¯†ç¬¦ä¸º 0 çš„å¸§ã€‚</p>
<p>ç«¯ç‚¹ä¸èƒ½ä½¿ç”¨å¸§ä¸­çš„æ‰€æœ‰å¯ç”¨ç©ºé—´ã€‚é€šè¿‡ä½¿ç”¨å°äºæœ€å¤§å¤§å°çš„å¸§å¯ä»¥æé«˜å“åº”é€Ÿåº¦ã€‚å‘é€å¤§å¸§å¯èƒ½ä¼šå¯¼è‡´å»¶è¿Ÿï¼ˆä¾‹å¦‚ RST_STREAMï¼Œ WINDOW_UPDATE æˆ– PRIORITYï¼‰ï¼Œè¾ƒå¤§å¸§çš„å»¶è¿Ÿå¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚</p>
<h2 id="å¤´éƒ¨çš„å‹ç¼©å’Œè§£å‹ç¼©"><a href="#å¤´éƒ¨çš„å‹ç¼©å’Œè§£å‹ç¼©" class="headerlink" title="å¤´éƒ¨çš„å‹ç¼©å’Œè§£å‹ç¼©"></a>å¤´éƒ¨çš„å‹ç¼©å’Œè§£å‹ç¼©</h2><p>åƒ HTTP / 1 ä¸­ä¸€æ ·ï¼ŒHTTP / 2 ä¸­çš„å¤´éƒ¨å­—æ®µæ˜¯å¸¦æœ‰ä¸€ä¸ªæˆ–æ›´å¤šç›¸å…³ä¿¡æ¯çš„å€¼ã€‚<br>å¤´éƒ¨åˆ—è¡¨æ˜¯é›¶ä¸ªæˆ–å¤šä¸ªå¤´éƒ¨å­—æ®µçš„é›†åˆã€‚ ä»€ä¹ˆæ—¶å€™é€šè¿‡è¿æ¥ä¼ è¾“ï¼Œå¤´éƒ¨åˆ—è¡¨ä¼šåºåˆ—åŒ–ä¸€ä¸ªå¤´éƒ¨å—ä½¿ç”¨ HTTP å¤´éƒ¨å‹ç¼©[COMPRESSION]ã€‚ç„¶åå°†åºåˆ—åŒ–çš„å¤´éƒ¨å—åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚åºåˆ—ï¼Œç§°ä¸ºå¤´éƒ¨ç‰‡æ®µï¼Œå¹¶åœ¨ HEADERSï¼ŒPUSH_PROMISE æˆ– CONTINUATION ä¸­ä½œä¸ºæœ‰æ•ˆè´Ÿè½½ã€‚</p>
<p>Cookie å¤´éƒ¨[COOKIE]ç”± HTTP ä¸“é—¨å¤„ç†æ˜ å°„ã€‚<br>æ¥æ”¶ç«¯ç‚¹é€šè¿‡ä¸²è”é‡ç»„å¤´éƒ¨çš„ç‰‡æ®µï¼Œç„¶åè§£å‹ç¼©è¯¥å—ä»¥é‡å»ºå¤´éƒ¨åˆ—è¡¨ã€‚</p>
<p>å®Œæ•´çš„å¤´éƒ¨åŒ…æ‹¬ä»¥ä¸‹ä»»ä¸€é¡¹ï¼š</p>
<ul>
<li>è®¾ç½®äº† END_HEADERS æ ‡å¿—çš„å•ä¸ª HEADERS æˆ– PUSH_PROMISE å¸§</li>
<li>ä¸€ä¸ª HEADERS æˆ– PUSH_PROMISE å¸§è®¾ç½®äº†æ¸…é™¤ END_HEADERS æ ‡å¿—ï¼Œæˆ–è€…ä¸€ä¸ªæˆ–å¤šä¸ª CONTINUATION å¸§å¹¶ä¸”æœ€åä¸€ä¸ª CONTINUATION å¸§è®¾ç½®äº† END_HEADERS æ ‡å¿—</li>
</ul>
<p>å¤´éƒ¨å‹ç¼©æ˜¯æœ‰çŠ¶æ€çš„ã€‚ ä¸€ç§å‹ç¼©å†…å®¹å’Œä¸€ç§è§£å‹ç¼©å†…å®¹ç”¨äºæ•´ä¸ªè¿æ¥ã€‚è§£ç å¤´éƒ¨ä¸­çš„é”™è¯¯å¿…é¡»è¢«è§†ä¸ºç±»å‹ä¸º COMPRESSION_ERROR è¿æ¥é”™è¯¯ã€‚</p>
<p>æ¯ä¸ªå¤´éƒ¨å—éƒ½ä½œä¸ºç¦»æ•£å•å…ƒè¿›è¡Œå¤„ç†ã€‚å¤´éƒ¨å—å¿…é¡»ä½œä¸ºè¿ç»­çš„å¸§åºåˆ—å‘é€ï¼Œæ²¡æœ‰ä»»ä½•å…¶ä»–ç±»å‹æˆ–æ¥è‡ªä»»ä½•å…¶ä»–æµçš„äº¤ç»‡å¸§ã€‚HEADERS æˆ– CONTINUATION å¸§åºåˆ—ä¸­çš„æœ€åä¸€ä¸ªå¸§è®¾ç½®äº† END_HEADERS æ ‡å¿—ã€‚PUSH_PROMISE æˆ– CONTINUATION å¸§åºåˆ—ä¸­çš„æœ€åä¸€ä¸ªå¸§è®¾ç½®äº† END_HEADERS æ ‡å¿—ã€‚è¿™å…è®¸å¤´éƒ¨å—åœ¨é€»è¾‘ä¸Šç­‰æ•ˆäºå•ä¸ªå¸§ã€‚</p>
<p>å¤´éƒ¨ç‰‡æ®µåªèƒ½ä½œä¸º HEADERSï¼ŒPUSH_PROMISE æˆ– CONTINUATION å¸§çš„æœ‰æ•ˆè½½è·å‘é€ï¼Œå› ä¸ºè¿™äº›å¸§æºå¸¦å¯ä»¥ä¿®æ”¹æ¥æ”¶æ–¹ç»´æŠ¤çš„å‹ç¼©ä¸Šä¸‹æ–‡çš„æ•°æ®ã€‚æ¥æ”¶æ–¹å³ä½¿è¦ä¸¢å¼ƒå¸§ï¼Œä¹Ÿè¦æ¥æ”¶ HEADERSï¼ŒPUSH_PROMISE æˆ– CONTINUATION å¹¶é‡æ–°ç»„è£…å¤´éƒ¨å¹¶æ‰§è¡Œè§£å‹ç¼©ã€‚å¦‚æœæ¥æ”¶æ–¹æœªè§£å‹ç¼©å¤´å—ï¼Œåˆ™å¿…é¡»ä»¥ç±»å‹ä¸º COMPRESSION_ERROR çš„è¿æ¥é”™è¯¯ç»ˆæ­¢è¿æ¥ã€‚</p>
<h2 id="å„ä¸ªå¸§"><a href="#å„ä¸ªå¸§" class="headerlink" title="å„ä¸ªå¸§"></a>å„ä¸ªå¸§</h2><p>è¯¥è§„èŒƒå®šä¹‰äº†è®¸å¤šå¸§ç±»å‹ï¼Œæ¯ç§ç±»å‹éƒ½ç”±å”¯ä¸€çš„ 8 ä½ä»£ç æ ‡è¯†ã€‚æ¯ç§å¸§ç±»å‹åœ¨æ•´ä¸ªè¿æ¥æˆ–å•ä¸ªæµçš„å»ºç«‹å’Œç®¡ç†ä¸­éƒ½å…·æœ‰ä¸åŒçš„ç›®çš„ã€‚<br>ç‰¹å®šå¸§ç±»å‹çš„ä¼ è¾“å¯ä»¥æ›´æ”¹è¿æ¥çŠ¶æ€ã€‚å¦‚æœç«¯ç‚¹æ— æ³•ç»´æŠ¤è¿æ¥çŠ¶æ€çš„åŒæ­¥è§†å›¾ï¼Œåˆ™å°†æ— æ³•å†æˆåŠŸè¿›è¡Œè¿æ¥å†…çš„é€šä¿¡ã€‚å› æ­¤ï¼Œç«¯ç‚¹å¯¹çŠ¶æ€æœ‰ä¸€ä¸ªå…±åŒçš„ç†è§£æ˜¯å¾ˆé‡è¦çš„ï¼Œå³ä½¿ç”¨ä»»ä½•å¸§ã€‚</p>
<h3 id="DATA"><a href="#DATA" class="headerlink" title="DATA"></a>DATA</h3><p>DATA å¸§ï¼ˆtype=0x0ï¼‰ä¼ è¾¾ä¸æµç›¸å…³çš„ä»»æ„é•¿åº¦å¯å˜çš„å­—èŠ‚åºåˆ—ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªæˆ–å¤šä¸ª DATA å¸§ç”¨äºæ‰¿è½½ HTTP è¯·æ±‚æˆ–å“åº”æœ‰æ•ˆè´Ÿè½½ã€‚DATA å¸§çš„è´Ÿè½½å¦‚ä¸‹æ‰€ç¤ºï¼š<br>+â€”â€”â€”â€”â€”+<br>|Pad Length? (8)|<br>+â€”â€”â€”â€”â€”+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“+<br>| Data (<em>) â€¦<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+<br>| Padding (</em>) â€¦<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+</p>
<h3 id="HEADERS"><a href="#HEADERS" class="headerlink" title="HEADERS"></a>HEADERS</h3><p>HEADERS å¸§ï¼ˆtype=0x1ï¼‰ç”¨äºæ‰“å¼€æµï¼Œå¹¶é™„å¸¦ä¸€ä¸ªå¤´éƒ¨ç‰‡æ®µã€‚ HEADERS å¸§å¯ä»¥æ˜¯ â€œidleâ€(â€œç©ºé—²â€), â€œreserved (local)â€(â€œä¿ç•™ï¼ˆæœ¬åœ°ï¼‰â€), â€œopenâ€(â€œæ‰“å¼€â€)æˆ– â€œhalf-closed (remote)â€(â€œåŠå…³é—­ï¼ˆè¿œç¨‹ï¼‰â€)çŠ¶æ€ä¸‹åœ¨æµä¸Šå‘é€ã€‚HEADERS å¸§çš„è´Ÿè½½å¦‚ä¸‹æ‰€ç¤ºï¼š<br>+â€”â€”â€”â€”â€”+<br>|Pad Length? (8)|<br>+-+â€”â€”â€”â€”-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“+<br>|E| Stream Dependency? (31) |<br>+-+â€”â€”â€”â€”-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“+<br>| Weight? (8) |<br>+-+â€”â€”â€”â€”-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“+<br>| Header Block Fragment (<em>) â€¦<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+<br>| Padding (</em>) â€¦<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+</p>
<h3 id="PRIORITY"><a href="#PRIORITY" class="headerlink" title="PRIORITY"></a>PRIORITY</h3><p>PRIORITY å¸§ï¼ˆtype=0x2ï¼‰æŒ‡å®šå‘é€æ–¹å»ºè®®çš„æµçš„ä¼˜å…ˆçº§ã€‚ å®ƒå¯ä»¥ä»¥ä»»ä½•æµçŠ¶æ€å‘é€ï¼ŒåŒ…æ‹¬ç©ºé—²æˆ–å…³é—­çš„æµã€‚PRIORITY å¸§çš„è´Ÿè½½å¦‚ä¸‹æ‰€ç¤ºï¼š<br>+-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+<br>|E| Stream Dependency (31) |<br>+-+â€”â€”â€”â€”-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“+<br>| Weight (8) |<br>+-+â€”â€”â€”â€”-+</p>
<h3 id="RST-STREAM"><a href="#RST-STREAM" class="headerlink" title="RST_STREAM"></a>RST_STREAM</h3><p>RST_STREAM å¸§ï¼ˆtype=0x3ï¼‰å…è®¸ç«‹å³ç»ˆæ­¢æµã€‚ å‘é€ RST_STREAM ä»¥è¯·æ±‚å–æ¶ˆæµæˆ–æŒ‡ç¤ºå‘ç”Ÿäº†é”™è¯¯æƒ…å†µã€‚RST_STREAM å¸§çš„è´Ÿè½½å¦‚ä¸‹æ‰€ç¤ºï¼š<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+<br>| Error Code (32) |<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+</p>
<h3 id="SETTINGS"><a href="#SETTINGS" class="headerlink" title="SETTINGS"></a>SETTINGS</h3><p>SETTINGS å¸§ï¼ˆtype=0x4ï¼‰ä¼ è¾¾å½±å“ç«¯ç‚¹é€šä¿¡æ–¹å¼çš„é…ç½®å‚æ•°ï¼Œä¾‹å¦‚å¯¹ç­‰ä½“è¡Œä¸ºçš„åå¥½å’Œçº¦æŸã€‚SETTINGS å¸§è¿˜ç”¨äºç¡®è®¤å·²æ¥æ”¶è¿™äº›å‚æ•°ã€‚ å•ç‹¬åœ°ï¼ŒSETTINGS å‚æ•°ä¹Ÿå¯ä»¥ç§°ä¸ºâ€œè®¾ç½®â€ã€‚SETTINGS å¸§çš„è´Ÿè½½å¦‚ä¸‹æ‰€ç¤ºï¼š<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+<br>| Identifier (16) |<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+<br>| Value (32) |<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+</p>
<h3 id="PUSH-PROMISE"><a href="#PUSH-PROMISE" class="headerlink" title="PUSH_PROMISE"></a>PUSH_PROMISE</h3><p>PUSH<em>PROMISE å¸§ï¼ˆtype=0x5ï¼‰ç”¨äºåœ¨å‘é€æ–¹æ‰“ç®—åˆå§‹åŒ–çš„æµä¹‹å‰æå‰é€šçŸ¥å¯¹ç­‰ç»ˆç»“ç‚¹ã€‚PUSH_PROMISE å¸§åŒ…æ‹¬ç«¯ç‚¹è®¡åˆ’åˆ›å»ºçš„æµçš„æ— ç¬¦å· 31 ä½æ ‡è¯†ç¬¦ï¼Œä»¥åŠä¸ºæµæä¾›é™„åŠ ä¸Šä¸‹æ–‡çš„ä¸€ç»„æŠ¥å¤´ã€‚PUSH_PROMISE å¸§çš„è´Ÿè½½å¦‚ä¸‹æ‰€ç¤ºï¼š<br>+â€”â€”â€”â€”â€”+<br>|Pad Length? (8)|<br>+-+â€”â€”â€”â€”-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“+<br>|R| Promised Stream ID (31) |<br>+-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+<br>| Header Block Fragment (</em>) â€¦<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+<br>| Padding (_) â€¦<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+</p>
<h3 id="PING"><a href="#PING" class="headerlink" title="PING"></a>PING</h3><p>PING å¸§ï¼ˆtype=0x6ï¼‰æ˜¯ä¸€ç§ç”¨äºæµ‹é‡æ¥è‡ªå‘é€æ–¹çš„æœ€å°å¾€è¿”æ—¶é—´çš„æœºåˆ¶ï¼Œä»¥åŠç¡®å®šç©ºé—²è¿æ¥æ˜¯å¦ä»ç„¶æœ‰æ•ˆã€‚å¯ä»¥ä»ä»»ä½•ç«¯ç‚¹å‘é€ PING å¸§ã€‚PING å¸§çš„è´Ÿè½½å¦‚ä¸‹æ‰€ç¤ºï¼š<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+<br>| |<br>| Opaque Data (64) |<br>| |<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+</p>
<h3 id="GOAWAY"><a href="#GOAWAY" class="headerlink" title="GOAWAY"></a>GOAWAY</h3><p>GOAWAY å¸§ï¼ˆtype=0x7ï¼‰ç”¨äºå¯åŠ¨è¿æ¥å…³é—­æˆ–å‘å‡ºä¸¥é‡é”™è¯¯æƒ…å†µä¿¡å·ã€‚ GOAWAY å…è®¸ç«¯ç‚¹åœæ­¢æ¥å—æ–°æµï¼ŒåŒæ—¶ä»ç„¶å®Œæˆå¯¹å…ˆå‰å»ºç«‹çš„æµçš„å¤„ç†ã€‚GOAWAY å¸§çš„è´Ÿè½½å¦‚ä¸‹æ‰€ç¤ºï¼š<br>+-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+<br>|R| Last-Stream-ID (31) |<br>+-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+<br>| Error Code (32) |<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+<br>| Additional Debug Data (*) |<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+</p>
<h3 id="WINDOW-UPDATE"><a href="#WINDOW-UPDATE" class="headerlink" title="WINDOW_UPDATE"></a>WINDOW_UPDATE</h3><p>WINDOW_UPDATE å¸§ï¼ˆtype=0x8ï¼‰ç”¨äºå®ç°æµæ§åˆ¶ã€‚WINDOW_UPDATE å¸§çš„è´Ÿè½½å¦‚ä¸‹æ‰€ç¤ºï¼š<br>+-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+<br>|R| Window Size Increment (31) |<br>+-+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-+</p>
<h3 id="CONTINUATION"><a href="#CONTINUATION" class="headerlink" title="CONTINUATION"></a>CONTINUATION</h3><p>CONTINUATION å¸§ï¼ˆtype=0x9ï¼‰ç”¨äºç»§ç»­ä¸€ç³»åˆ—å¤´å—ç‰‡æ®µã€‚åªè¦å‰ä¸€å¸§åœ¨åŒä¸€æµä¸Šå¹¶ä¸”æ˜¯æ²¡æœ‰è®¾ç½® END_HEADERS æ ‡å¿—çš„ HEADERSï¼ŒPUSH_PROMISE æˆ– CONTINUATION å¸§ï¼Œå°±å¯ä»¥å‘é€ä»»æ„æ•°é‡çš„ CONTINUATION å¸§ã€‚CONTINUATION å¸§çš„è´Ÿè½½å¦‚ä¸‹æ‰€ç¤ºï¼š<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+<br>| Header Block Fragment (*) â€¦<br>+â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”+</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/05/17/HTTP2%E4%B9%8B%E5%B8%A7/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-å…¥é—¨Webpack" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/18/%E5%85%A5%E9%97%A8Webpack/">å…¥é—¨webpack</a>
    </h1>
  

        
        <a href="/2020/04/18/%E5%85%A5%E9%97%A8Webpack/" class="archive-article-date">
  	<time datetime="2020-04-18T13:15:36.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-04-18</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>webpack å¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œä½†å¤§å®¶çš„æ°´å¹³æ˜¯é‡åˆ°é—®é¢˜ç™¾åº¦ä¸€ä¸‹ï¼Œè¿˜æ˜¯å¯¹å„ä¸ªé…ç½®éƒ½ç†Ÿæ‚‰æŒæ¡å°±çœ‹ä¸ªäººçš„èƒ½åŠ›å•¦ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯å¯¹å„ä¸ªé…ç½®è¿›è¡Œä¸€ä¸ªè®²è§£ï¼Œé¦–å…ˆæ¥çœ‹çœ‹è¿™ä¸ª webpack çš„é…ç½®æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&#x2F; ä¸€ä¸ªå¸¸è§çš„&#96;webpack&#96;é…ç½®æ–‡ä»¶</span><br><span class="line">const webpack &#x3D; require(&#39;webpack&#39;);</span><br><span class="line">const HtmlWebpackPlugin &#x3D; require(&#39;html-webpack-plugin&#39;);</span><br><span class="line">const ExtractTextPlugin &#x3D; require(&#39;extract-text-webpack-plugin&#39;);</span><br><span class="line"></span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">        entry: __dirname + &quot;&#x2F;app&#x2F;main.js&quot;, &#x2F;&#x2F;å·²å¤šæ¬¡æåŠçš„å”¯ä¸€å…¥å£æ–‡ä»¶</span><br><span class="line">        output: &#123;</span><br><span class="line">            path: __dirname + &quot;&#x2F;build&quot;,</span><br><span class="line">            filename: &quot;bundle-[hash].js&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        devtool: &#39;none&#39;,</span><br><span class="line">        devServer: &#123;</span><br><span class="line">            contentBase: &quot;.&#x2F;public&quot;, &#x2F;&#x2F;æœ¬åœ°æœåŠ¡å™¨æ‰€åŠ è½½çš„é¡µé¢æ‰€åœ¨çš„ç›®å½•</span><br><span class="line">            historyApiFallback: true, &#x2F;&#x2F;ä¸è·³è½¬</span><br><span class="line">            inline: true,</span><br><span class="line">            hot: true</span><br><span class="line">        &#125;,</span><br><span class="line">        module: &#123;</span><br><span class="line">            rules: [&#123;</span><br><span class="line">                    test: &#x2F;(\.jsx|\.js)$&#x2F;,</span><br><span class="line">                    use: &#123;</span><br><span class="line">                        loader: &quot;babel-loader&quot;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    exclude: &#x2F;node_modules&#x2F;</span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    test: &#x2F;\.css$&#x2F;,</span><br><span class="line">                    use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">                        fallback: &quot;style-loader&quot;,</span><br><span class="line">                        use: [&#123;</span><br><span class="line">                            loader: &quot;css-loader&quot;,</span><br><span class="line">                            options: &#123;</span><br><span class="line">                                modules: true,</span><br><span class="line">                                localIdentName: &#39;[name]__[local]--[hash:base64:5]&#39;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;, &#123;</span><br><span class="line">                          loader: &quot;postcss-loader&quot;</span><br><span class="line">                        &#125;],</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new webpack.optimize.UglifyJsPlugin(),</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: __dirname + &quot;&#x2F;app&#x2F;index.tmpl.html&quot; &#x2F;&#x2F;new ä¸€ä¸ªè¿™ä¸ªæ’ä»¶çš„å®ä¾‹ï¼Œå¹¶ä¼ å…¥ç›¸å…³çš„å‚æ•°</span><br><span class="line">        &#125;),</span><br><span class="line">        new webpack.optimize.OccurrenceOrderPlugin(),</span><br><span class="line">        new webpack.optimize.UglifyJsPlugin(),</span><br><span class="line">        new ExtractTextPlugin(&quot;style.css&quot;)</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="ä»€ä¹ˆæ˜¯-webpack"><a href="#ä»€ä¹ˆæ˜¯-webpack" class="headerlink" title="ä»€ä¹ˆæ˜¯ webpack"></a>ä»€ä¹ˆæ˜¯ webpack</h2><p>webpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(dependency graph)ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚<br>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œwebpack æŠŠä½ çš„é¡¹ç›®å½“åšä¸€ä¸ªæ•´ä½“ï¼Œé€šè¿‡ä¸€ä¸ªç»™å®šçš„ä¸»æ–‡ä»¶ï¼ˆå¦‚ï¼šindex.jsï¼‰ï¼Œä»è¿™ä¸ªæ–‡ä»¶å¼€å§‹æ‰¾åˆ°ä½ çš„é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–æ–‡ä»¶ï¼Œä½¿ç”¨ loaders å¤„ç†å®ƒä»¬ï¼Œæœ€åæ‰“åŒ…ä¸ºä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰æµè§ˆå™¨å¯è¯†åˆ«çš„ JavaScript æ–‡ä»¶ã€‚<br><img src="/images/2020-04-19/webpack.png" alt="webpack"></p>
<h2 id="å¼€å§‹ä½¿ç”¨"><a href="#å¼€å§‹ä½¿ç”¨" class="headerlink" title="å¼€å§‹ä½¿ç”¨"></a>å¼€å§‹ä½¿ç”¨</h2><p>ä»‹ç»å®ŒåŸºæœ¬æ¦‚å¿µåï¼Œæˆ‘ä»¬å¼€å§‹ä¸€æ­¥æ­¥çš„å¼€å§‹å­¦ä¹ ä½¿ç”¨ Webpackã€‚</p>
<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;å…¨å±€å®‰è£…</span><br><span class="line">npm install -g webpack</span><br><span class="line">npm install -g webpack-cli (webpack 4+è¿˜éœ€è¦å®‰è£… CLI)</span><br></pre></td></tr></table></figure>

<h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><p>åœ¨æ­¤ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªå¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ–‡ä»¶ï¼š<br><img src="/images/2020-04-19/files.png" alt="files"></p>
<h3 id="ç»ˆç«¯ä½¿ç”¨"><a href="#ç»ˆç«¯ä½¿ç”¨" class="headerlink" title="ç»ˆç«¯ä½¿ç”¨"></a>ç»ˆç«¯ä½¿ç”¨</h3><p>webpack å¯ä»¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ï¼Œåœ¨åŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># &#123;extry file&#125;å‡ºå¡«å†™å…¥å£æ–‡ä»¶çš„è·¯å¾„ï¼Œæœ¬æ–‡ä¸­å°±æ˜¯ä¸Šè¿°main.jsçš„è·¯å¾„ï¼Œ</span><br><span class="line"># &#123;destination for bundled file&#125;å¤„å¡«å†™æ‰“åŒ…æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„</span><br><span class="line">webpack &#123;entry file&#125; &#123;destination for bundled file&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é€šè¿‡é…ç½®æ–‡ä»¶ä½¿ç”¨"><a href="#é€šè¿‡é…ç½®æ–‡ä»¶ä½¿ç”¨" class="headerlink" title="é€šè¿‡é…ç½®æ–‡ä»¶ä½¿ç”¨"></a>é€šè¿‡é…ç½®æ–‡ä»¶ä½¿ç”¨</h3><p>Webpack æ‹¥æœ‰å¾ˆå¤šå…¶å®ƒçš„æ¯”è¾ƒé«˜çº§çš„åŠŸèƒ½ï¼ˆæ¯”å¦‚è¯´æœ¬æ–‡åé¢ä¼šä»‹ç»çš„ loaders å’Œ pluginsï¼‰ï¼Œè¿™äº›åŠŸèƒ½å…¶å®éƒ½å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ¨¡å¼å®ç°ï¼Œä½†æ˜¯ä¸å¤ªæ–¹ä¾¿ä¸”å®¹æ˜“å‡ºé”™çš„ã€‚æ›´å¥½çš„åŠæ³•æ˜¯å®šä¹‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªç®€å•çš„ JavaScript æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰çš„ä¸æ‰“åŒ…ç›¸å…³çš„ä¿¡æ¯æ”¾åœ¨é‡Œé¢ã€‚<br>æˆ‘ä»¬åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ª webpack.config.js æ–‡ä»¶:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  entry:  __dirname + &quot;&#x2F;app&#x2F;main.js&quot;,&#x2F;&#x2F;å·²å¤šæ¬¡æåŠçš„å”¯ä¸€å…¥å£æ–‡ä»¶</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: __dirname + &quot;&#x2F;public&quot;,&#x2F;&#x2F;æ‰“åŒ…åçš„æ–‡ä»¶å­˜æ”¾çš„åœ°æ–¹</span><br><span class="line">    filename: &quot;bundle.js&quot;&#x2F;&#x2F;æ‰“åŒ…åè¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶å</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ›´å¿«æ·çš„æ‰§è¡Œæ‰“åŒ…ä»»åŠ¡"><a href="#æ›´å¿«æ·çš„æ‰§è¡Œæ‰“åŒ…ä»»åŠ¡" class="headerlink" title="æ›´å¿«æ·çš„æ‰§è¡Œæ‰“åŒ…ä»»åŠ¡"></a>æ›´å¿«æ·çš„æ‰§è¡Œæ‰“åŒ…ä»»åŠ¡</h3><p>åœ¨ package.json ä¸­å¯¹ scripts å¯¹è±¡è¿›è¡Œç›¸å…³è®¾ç½®</p>
<h2 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h2><p>åœ¨ä»‹ç»äº†ä½¿ç”¨åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ webpack ä¸­æœ€ä¸»è¦çš„å†…å®¹ã€‚</p>
<p>é¦–å…ˆæ˜¯ loaderã€‚</p>
<p>loader è®© webpack èƒ½å¤Ÿå»å¤„ç†é‚£äº›é JavaScript æ–‡ä»¶ï¼ˆwebpack è‡ªèº«åªç†è§£ JavaScriptï¼‰ã€‚loader å¯ä»¥å°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶è½¬æ¢ä¸º webpack èƒ½å¤Ÿå¤„ç†çš„æœ‰æ•ˆæ¨¡å—ï¼Œç„¶åä½ å°±å¯ä»¥åˆ©ç”¨ webpack çš„æ‰“åŒ…èƒ½åŠ›ï¼Œå¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ã€‚</p>
<p>æœ¬è´¨ä¸Šï¼Œwebpack loader å°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶ï¼Œè½¬æ¢ä¸ºåº”ç”¨ç¨‹åºçš„ä¾èµ–å›¾ï¼ˆå’Œæœ€ç»ˆçš„ bundleï¼‰å¯ä»¥ç›´æ¥å¼•ç”¨çš„æ¨¡å—ã€‚</p>
<p>loaders éœ€è¦å•ç‹¬å®‰è£…å¹¶ä¸”éœ€è¦åœ¨ webpack.config.js ä¸­çš„ modules å…³é”®å­—ä¸‹è¿›è¡Œé…ç½®ï¼ŒLoaders çš„é…ç½®åŒ…æ‹¬ä»¥ä¸‹å‡ æ–¹é¢ï¼š</p>
<ul>
<li>testï¼šä¸€ä¸ªç”¨ä»¥åŒ¹é… loaders æ‰€å¤„ç†æ–‡ä»¶çš„æ‹“å±•åçš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆå¿…é¡»ï¼‰</li>
<li>loaderï¼šloader çš„åç§°ï¼ˆå¿…é¡»ï¼‰</li>
<li>include/exclude:æ‰‹åŠ¨æ·»åŠ å¿…é¡»å¤„ç†çš„æ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰æˆ–å±è”½ä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹ï¼‰ï¼ˆå¯é€‰ï¼‰ï¼›</li>
<li>queryï¼šä¸º loaders æä¾›é¢å¤–çš„è®¾ç½®é€‰é¡¹ï¼ˆå¯é€‰ï¼‰</li>
</ul>
<p>ä¸‹é¢ç®€å•åˆ—ä¸¾äº†ä¸€äº›å¸¸ç”¨çš„ loader</p>
<h3 id="babel-loader"><a href="#babel-loader" class="headerlink" title="babel-loader"></a>babel-loader</h3><p><a href="https://www.webpackjs.com/loaders/babel-loader/" target="_blank" rel="noopener">babel-loader</a> åº”è¯¥æ˜¯ä½¿ç”¨æœ€å¤šçš„ loader äº†ï¼Œå®ƒè´Ÿè´£å°† ECMAScript 2015+ ç‰ˆæœ¬çš„ä»£ç è½¬æ¢ä¸ºå‘åå…¼å®¹çš„ JavaScript è¯­æ³•ï¼Œä»¥ä¾¿èƒ½å¤Ÿè¿è¡Œåœ¨å½“å‰å’Œæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨æˆ–å…¶ä»–ç¯å¢ƒä¸­ã€‚<br>ä¸‹é¢åˆ—ä¸¾ä¸€ä¸ªç®€å•çš„é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">       rules: [</span><br><span class="line">           &#123;</span><br><span class="line">               test: &#x2F;(\.jsx|\.js)$&#x2F;,</span><br><span class="line">               use: &#123;</span><br><span class="line">                   loader: &quot;babel-loader&quot;,</span><br><span class="line">                   options: &#123;</span><br><span class="line">                       presets: [</span><br><span class="line">                           &quot;env&quot;, &quot;react&quot;</span><br><span class="line">                       ]</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;,</span><br><span class="line">               exclude: &#x2F;node_modules&#x2F;</span><br><span class="line">           &#125;</span><br><span class="line">       ]</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>åƒä¸Šé¢é‚£ç§ç®€å•çš„é…ç½®å¯ä»¥ç›´æ¥æ”¾åœ¨ webpack.config.js ä¸­ï¼Œä½†å¦‚æœ babel çš„é…ç½®å¾ˆå¤æ‚ï¼Œä¹Ÿå¯ä»¥åŠ .babelrc è¿›è¡Œé…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;.babelrc</span><br><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [&quot;react&quot;, &quot;env&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="css-loader-amp-style-loader"><a href="#css-loader-amp-style-loader" class="headerlink" title="css-loader &amp; style-loader"></a>css-loader &amp; style-loader</h3><p>webpack æä¾›ä¸¤ä¸ªå·¥å…·å¤„ç†æ ·å¼è¡¨ï¼Œ<a href="https://www.webpackjs.com/loaders/css-loader/" target="_blank" rel="noopener">css-loader</a> å’Œ <a href="https://www.webpackjs.com/loaders/style-loader/" target="_blank" rel="noopener">style-loader</a>ï¼ŒäºŒè€…å¤„ç†çš„ä»»åŠ¡ä¸åŒï¼Œcss-loader ä½¿ä½ èƒ½å¤Ÿä½¿ç”¨ç±»ä¼¼@import å’Œ url(â€¦)çš„æ–¹æ³•å®ç° require()çš„åŠŸèƒ½,style-loader å°†æ‰€æœ‰çš„è®¡ç®—åçš„æ ·å¼åŠ å…¥é¡µé¢ä¸­ï¼ŒäºŒè€…ç»„åˆåœ¨ä¸€èµ·ä½¿ä½ èƒ½å¤ŸæŠŠæ ·å¼è¡¨åµŒå…¥ webpack æ‰“åŒ…åçš„ JS æ–‡ä»¶ä¸­ã€‚<br>åœ¨è¿‡å»çš„ä¸€äº›å¹´é‡Œï¼ŒJavaScript é€šè¿‡ä¸€äº›æ–°çš„è¯­è¨€ç‰¹æ€§ï¼Œæ›´å¥½çš„å·¥å…·ä»¥åŠæ›´å¥½çš„å®è·µæ–¹æ³•ï¼ˆæ¯”å¦‚è¯´æ¨¡å—åŒ–ï¼‰å‘å±•å¾—éå¸¸è¿…é€Ÿã€‚æ¨¡å—ä½¿å¾—å¼€å‘è€…æŠŠå¤æ‚çš„ä»£ç è½¬åŒ–ä¸ºå°çš„ï¼Œå¹²å‡€çš„ï¼Œä¾èµ–å£°æ˜æ˜ç¡®çš„å•å…ƒï¼Œé…åˆä¼˜åŒ–å·¥å…·ï¼Œä¾èµ–ç®¡ç†å’ŒåŠ è½½ç®¡ç†å¯ä»¥è‡ªåŠ¨å®Œæˆã€‚<br>ä¸è¿‡å‰ç«¯çš„å¦å¤–ä¸€éƒ¨åˆ†ï¼ŒCSS å‘å±•å°±ç›¸å¯¹æ…¢ä¸€äº›ï¼Œå¤§å¤šçš„æ ·å¼è¡¨å´ä¾æ—§å·¨å¤§ä¸”å……æ»¡äº†å…¨å±€ç±»åï¼Œç»´æŠ¤å’Œä¿®æ”¹éƒ½éå¸¸å›°éš¾ã€‚<br>è¢«ç§°ä¸º CSS modules çš„æŠ€æœ¯æ„åœ¨æŠŠ JS çš„æ¨¡å—åŒ–æ€æƒ³å¸¦å…¥ CSS ä¸­æ¥ï¼Œé€šè¿‡ CSS æ¨¡å—ï¼Œæ‰€æœ‰çš„ç±»åï¼ŒåŠ¨ç”»åé»˜è®¤éƒ½åªä½œç”¨äºå½“å‰æ¨¡å—ã€‚Webpack å¯¹ CSS æ¨¡å—åŒ–æä¾›äº†éå¸¸å¥½çš„æ”¯æŒï¼Œåªéœ€è¦åœ¨ CSS loader ä¸­è¿›è¡Œç®€å•é…ç½®å³å¯ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥æŠŠ CSS çš„ç±»åä¼ é€’åˆ°ç»„ä»¶çš„ä»£ç ä¸­ï¼Œè¿™æ ·åšæœ‰æ•ˆé¿å…äº†å…¨å±€æ±¡æŸ“ã€‚å¦‚ä¸‹æ‰€ç¤º:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        &#123;</span><br><span class="line">            test: &#x2F;\.css$&#x2F;,</span><br><span class="line">            use: [</span><br><span class="line">                &#123;</span><br><span class="line">                    loader: &quot;style-loader&quot;</span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    loader: &quot;css-loader&quot;,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        modules: true, &#x2F;&#x2F; æŒ‡å®šå¯ç”¨css modules</span><br><span class="line">                        localIdentName: &#39;[name]__[local]--[hash:base64:5]&#39; &#x2F;&#x2F; æŒ‡å®šcssçš„ç±»åæ ¼å¼</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼ŒSass å’Œ Less ç­‰ä¹‹ç±»çš„ css é¢„å¤„ç†å™¨ï¼Œä¹Ÿæœ‰å®ƒçš„ loaderã€‚å¦‚ä¸‹ï¼š</p>
<ul>
<li><a href="https://www.webpackjs.com/loaders/less-loader/" target="_blank" rel="noopener">less-loader</a></li>
<li><a href="https://www.webpackjs.com/loaders/sass-loader/" target="_blank" rel="noopener">sass-loader</a></li>
</ul>
<p>è¿˜å­˜åœ¨ä¸€ä¸ª CSS çš„å¤„ç†å¹³å°-PostCSSï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ çš„ CSS å®ç°æ›´å¤šçš„åŠŸèƒ½ï¼Œ å…·ä½“å°±ä¸å†ç½—åˆ—äº†ï¼Œå¤§å®¶å¯ä»¥å»<a href="https://github.com/postcss/postcss" target="_blank" rel="noopener">å®˜ç½‘</a>äº†è§£</p>
<h2 id="plugins"><a href="#plugins" class="headerlink" title="plugins"></a>plugins</h2><p>æ’ä»¶æ˜¯ webpack çš„æ”¯æŸ±åŠŸèƒ½ã€‚webpack è‡ªèº«ä¹Ÿæ˜¯æ„å»ºäºï¼Œä½ åœ¨ webpack é…ç½®ä¸­ç”¨åˆ°çš„ç›¸åŒçš„æ’ä»¶ç³»ç»Ÿä¹‹ä¸Šï¼<br>æ’ä»¶ç›®çš„åœ¨äºè§£å†³ loader æ— æ³•å®ç°çš„å…¶ä»–äº‹ã€‚</p>
<p>åœ¨æ­¤åˆ—å‡ºä¸€äº›å¸¸ç”¨çš„æ’ä»¶ï¼Œå…·ä½“çš„å†…å®¹ï¼Œè¯·ç§»æ­¥<a href="https://www.webpackjs.com/plugins/" target="_blank" rel="noopener">webpack å®˜ç½‘</a>æŸ¥çœ‹ã€‚<br>webpack.DefinePlugin â€” åœ¨æ‰“åŒ…é˜¶æ®µå®šä¹‰å…¨å±€å˜é‡<br>webpack.HashedModuledIdsPlugin â€” ä¿æŒ module.id ç¨³å®š<br>webpack.NoEmitOnErrorsPlugin â€” å±è”½é”™è¯¯<br>webpack.ProvidePlugin â€” æä¾›åº“<br>copy-webpack-plugin â€” å¯ä»¥å¸®åŠ©æ‹·è´å†…å®¹</p>
<p>æœ¬æ–‡åªæ˜¯ç®€å•è®²è§£äº†ä¸€äº›å¸¸ç”¨çš„ webpack å±æ€§ï¼Œå…¶å®æ›´å¤šçš„å­¦ä¹ è¿˜æ˜¯åœ¨æ—¥å¸¸å¼€å‘ä¸­é‡åˆ°é—®é¢˜ï¼Œè§£å†³é—®é¢˜ã€‚ä¹‹å‰è‡ªå·±å¯¹è¿™å—å…³æ³¨ä¸å¤šï¼Œä½†è¦æˆé•¿ä¸ºä¸€ä¸ªä¸­é«˜é˜¶å‰ç«¯ä¹Ÿåº”è¯¥å‚¨å¤‡è¿™äº›å·¥ç¨‹åŒ–çš„çŸ¥è¯†ã€‚æ€»ä¹‹ï¼Œç»§ç»­åŠ æ²¹å§ï¼â›½ï¸</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/04/18/%E5%85%A5%E9%97%A8Webpack/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-VirtualDOMç®—æ³•" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/22/VirtualDOM%E7%AE%97%E6%B3%95/">Virtual DOMç®—æ³•</a>
    </h1>
  

        
        <a href="/2020/03/22/VirtualDOM%E7%AE%97%E6%B3%95/" class="archive-article-date">
  	<time datetime="2020-03-22T09:35:45.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-03-22</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœ¬æ–‡ç”¨ 300~400 è¡Œä»£ç å®ç°ä¸€ä¸ªåŸºæœ¬çš„ Virtual DOM ç®—æ³•ã€‚</p>
<h2 id="Virtual-DOM-ç®—æ³•"><a href="#Virtual-DOM-ç®—æ³•" class="headerlink" title="Virtual DOM ç®—æ³•"></a>Virtual DOM ç®—æ³•</h2><p>DOM æ˜¯å¾ˆæ…¢çš„ã€‚å¦‚ä¸‹ï¼Œä¸€ä¸ªç®€å•çš„ div å…ƒç´ çš„å±æ€§æœ‰ä»¥ä¸‹è¿™ä¹ˆå¤šã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let div &#x3D; document.createElement(&#39;div&#39;)</span><br><span class="line">let str;</span><br><span class="line">for(let key in div) &#123;</span><br><span class="line">    str &#x3D; str + key + &#39; &#39;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">align title lang translate dir hidden accessKey draggable spellcheck autocapitalize contentEditable isContentEditable inputMode offsetParent offsetTop offsetLeft offsetWidth offsetHeight style innerText outerText oncopy oncut onpaste onabort onblur oncancel oncanplay oncanplaythrough onchange onclick onclose oncontextmenu oncuechange ondblclick ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop ondurationchange onemptied onended onerror onfocus onformdata oninput oninvalid onkeydown onkeypress onkeyup onload onloadeddata onloadedmetadata onloadstart onmousedown onmouseenter onmouseleave onmousemove onmouseout onmouseover onmouseup onmousewheel onpause onplay onplaying onprogress onratechange onreset onresize onscroll onseeked onseeking onselect onstalled onsubmit onsuspend ontimeupdate ontoggle onvolumechange onwaiting onwheel onauxclick ongotpointercapture onlostpointercapture onpointerdown onpointermove onpointerup onpointercancel onpointerover onpointerout onpointerenter onpointerleave onselectstart onselectionchange onanimationend onanimationiteration onanimationstart ontransitionend dataset nonce autofocus tabIndex click attachInternals focus blur enterKeyHint onpointerrawupdate namespaceURI prefix localName tagName id className classList slot attributes shadowRoot part assignedSlot innerHTML outerHTML scrollTop scrollLeft scrollWidth scrollHeight clientTop clientLeft clientWidth clientHeight attributeStyleMap onbeforecopy onbeforecut onbeforepaste onsearch elementTiming previousElementSibling nextElementSibling children firstElementChild lastElementChild childElementCount onfullscreenchange onfullscreenerror onwebkitfullscreenchange onwebkitfullscreenerror hasAttributes getAttributeNames getAttribute getAttributeNS setAttribute setAttributeNS removeAttribute removeAttributeNS toggleAttribute hasAttribute hasAttributeNS getAttributeNode getAttributeNodeNS setAttributeNode setAttributeNodeNS removeAttributeNode attachShadow closest matches webkitMatchesSelector getElementsByTagName getElementsByTagNameNS getElementsByClassName insertAdjacentElement insertAdjacentText setPointerCapture releasePointerCapture hasPointerCapture insertAdjacentHTML requestPointerLock getClientRects getBoundingClientRect scrollIntoView scroll scrollTo scrollBy scrollIntoViewIfNeeded animate computedStyleMap before after replaceWith remove prepend append querySelector querySelectorAll requestFullscreen webkitRequestFullScreen webkitRequestFullscreen ELEMENT_NODE ATTRIBUTE_NODE TEXT_NODE CDATA_SECTION_NODE ENTITY_REFERENCE_NODE ENTITY_NODE PROCESSING_INSTRUCTION_NODE COMMENT_NODE DOCUMENT_NODE DOCUMENT_TYPE_NODE DOCUMENT_FRAGMENT_NODE NOTATION_NODE DOCUMENT_POSITION_DISCONNECTED DOCUMENT_POSITION_PRECEDING DOCUMENT_POSITION_FOLLOWING DOCUMENT_POSITION_CONTAINS DOCUMENT_POSITION_CONTAINED_BY DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC nodeType nodeName baseURI isConnected ownerDocument parentNode parentElement childNodes firstChild lastChild previousSibling nextSibling nodeValue textContent hasChildNodes getRootNode normalize cloneNode isEqualNode isSameNode compareDocumentPosition contains lookupPrefix lookupNamespaceURI isDefaultNamespace insertBefore appendChild replaceChild removeChild addEventListener removeEventListener dispatchEvent &quot;</span><br></pre></td></tr></table></figure>

<p>è¿™ä»…ä»…æ˜¯ç¬¬ä¸€å±‚ã€‚çœŸæ­£çš„ DOM å…ƒç´ éå¸¸åºå¤§ï¼Œè¿™æ˜¯å› ä¸ºæ ‡å‡†å°±æ˜¯è¿™ä¹ˆè®¾è®¡çš„ã€‚è€Œä¸”æ“ä½œå®ƒä»¬çš„æ—¶å€™ä½ è¦å°å¿ƒç¿¼ç¿¼ï¼Œè½»å¾®çš„è§¦ç¢°å¯èƒ½å°±ä¼šå¯¼è‡´é¡µé¢é‡æ’ï¼Œè¿™å¯æ˜¯æ€æ­»æ€§èƒ½çš„ç½ªé­ç¥¸é¦–ã€‚<br>ç›¸å¯¹äº DOM å¯¹è±¡ï¼ŒåŸç”Ÿçš„ JavaScript å¯¹è±¡å¤„ç†èµ·æ¥æ›´å¿«ï¼Œè€Œä¸”æ›´ç®€å•ã€‚DOM æ ‘ä¸Šçš„ç»“æ„ã€å±æ€§ä¿¡æ¯æˆ‘ä»¬éƒ½å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨ JavaScript å¯¹è±¡è¡¨ç¤ºå‡ºæ¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">let element &#x3D; &#123;</span><br><span class="line">  tagName: &#39;ul&#39;, &#x2F;&#x2F; èŠ‚ç‚¹æ ‡ç­¾å</span><br><span class="line">  props: &#123; &#x2F;&#x2F; DOMçš„å±æ€§ï¼Œç”¨ä¸€ä¸ªå¯¹è±¡å­˜å‚¨é”®å€¼å¯¹</span><br><span class="line">    id: &#39;list&#39;</span><br><span class="line">  &#125;,</span><br><span class="line">  children: [ &#x2F;&#x2F; è¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹</span><br><span class="line">    &#123;tagName: &#39;li&#39;, props: &#123;class: &#39;item&#39;&#125;, children: [&quot;Item 1&quot;]&#125;,</span><br><span class="line">    &#123;tagName: &#39;li&#39;, props: &#123;class: &#39;item&#39;&#125;, children: [&quot;Item 2&quot;]&#125;,</span><br><span class="line">    &#123;tagName: &#39;li&#39;, props: &#123;class: &#39;item&#39;&#125;, children: [&quot;Item 3&quot;]&#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢å¯¹åº”çš„ HTML æ˜¯:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id&#x3D;&#39;list&#39;&gt;</span><br><span class="line">  &lt;li class&#x3D;&#39;item&#39;&gt;Item 1&lt;&#x2F;li&gt;</span><br><span class="line">  &lt;li class&#x3D;&#39;item&#39;&gt;Item 2&lt;&#x2F;li&gt;</span><br><span class="line">  &lt;li class&#x3D;&#39;item&#39;&gt;Item 3&lt;&#x2F;li&gt;</span><br><span class="line">&lt;&#x2F;ul&gt;</span><br></pre></td></tr></table></figure>

<p>æ—¢ç„¶ DOM æ ‘çš„ä¿¡æ¯å¯ä»¥ç”¨ JavaScript å¯¹è±¡æ¥è¡¨ç¤ºï¼Œåè¿‡æ¥ï¼Œå°±å¯ä»¥æ ¹æ®è¿™ä¸ªç”¨ JavaScript å¯¹è±¡è¡¨ç¤ºçš„æ ‘ç»“æ„æ¥æ„å»ºä¸€æ£µçœŸæ­£çš„ DOM æ ‘ã€‚</p>
<p>è¿™æ ·çŠ¶æ€å˜æ›´-&gt;é‡æ–°æ¸²æŸ“æ•´ä¸ªè§†å›¾çš„æ–¹å¼å°±å¯ä»¥å˜ä¸ºï¼šç”¨ JavaScript å¯¹è±¡è¡¨ç¤º DOM ä¿¡æ¯å’Œç»“æ„ï¼Œå½“çŠ¶æ€å˜æ›´çš„æ—¶å€™ï¼Œé‡æ–°æ¸²æŸ“è¿™ä¸ª JavaScript çš„å¯¹è±¡ç»“æ„ã€‚å½“ç„¶è¿™æ ·åšå…¶å®æ²¡ä»€ä¹ˆåµç”¨ï¼Œå› ä¸ºçœŸæ­£çš„é¡µé¢å…¶å®æ²¡æœ‰æ”¹å˜ã€‚</p>
<p>ä½†æ˜¯å¯ä»¥ç”¨æ–°æ¸²æŸ“çš„å¯¹è±¡æ ‘å»å’Œæ—§çš„æ ‘è¿›è¡Œå¯¹æ¯”ï¼Œè®°å½•è¿™ä¸¤æ£µæ ‘å·®å¼‚ã€‚è®°å½•ä¸‹æ¥çš„ä¸åŒå°±æ˜¯æˆ‘ä»¬éœ€è¦å¯¹é¡µé¢çœŸæ­£çš„ DOM æ“ä½œï¼Œç„¶åæŠŠå®ƒä»¬åº”ç”¨åœ¨çœŸæ­£çš„ DOM æ ‘ä¸Šï¼Œé¡µé¢å°±å˜æ›´äº†ã€‚è¿™æ ·å°±å¯ä»¥åšåˆ°ï¼šè§†å›¾çš„ç»“æ„ç¡®å®æ˜¯æ•´ä¸ªå…¨æ–°æ¸²æŸ“äº†ï¼Œä½†æ˜¯æœ€åæ“ä½œ DOM çš„æ—¶å€™ç¡®å®åªå˜æ›´æœ‰ä¸åŒçš„åœ°æ–¹ã€‚</p>
<p>è¿™å°±æ˜¯æ‰€è°“çš„ Virtual DOM ç®—æ³•ã€‚åŒ…æ‹¬å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>ç”¨ JavaScript å¯¹è±¡ç»“æ„è¡¨ç¤º DOM æ ‘çš„ç»“æ„ï¼›ç„¶åç”¨è¿™ä¸ªæ ‘æ„å»ºä¸€ä¸ªçœŸæ­£çš„ DOM æ ‘ï¼Œæ’åˆ°æ–‡æ¡£å½“ä¸­</li>
<li>å½“çŠ¶æ€å˜æ›´çš„æ—¶å€™ï¼Œé‡æ–°æ„é€ ä¸€æ£µæ–°çš„å¯¹è±¡æ ‘ã€‚ç„¶åç”¨æ–°çš„æ ‘å’Œæ—§çš„æ ‘è¿›è¡Œæ¯”è¾ƒï¼Œè®°å½•ä¸¤æ£µæ ‘å·®å¼‚</li>
<li>æŠŠ 2 æ‰€è®°å½•çš„å·®å¼‚åº”ç”¨åˆ°æ­¥éª¤ 1 æ‰€æ„å»ºçš„çœŸæ­£çš„ DOM æ ‘ä¸Šï¼Œè§†å›¾å°±æ›´æ–°äº†</li>
</ol>
<p>Virtual DOM æœ¬è´¨ä¸Šå°±æ˜¯åœ¨ JS å’Œ DOM ä¹‹é—´åšäº†ä¸€ä¸ªç¼“å­˜ã€‚å¯ä»¥ç±»æ¯” CPU å’Œç¡¬ç›˜ï¼Œæ—¢ç„¶ç¡¬ç›˜è¿™ä¹ˆæ…¢ï¼Œæˆ‘ä»¬å°±åœ¨å®ƒä»¬ä¹‹é—´åŠ ä¸ªç¼“å­˜ï¼šæ—¢ç„¶ DOM è¿™ä¹ˆæ…¢ï¼Œæˆ‘ä»¬å°±åœ¨å®ƒä»¬ JS å’Œ DOM ä¹‹é—´åŠ ä¸ªç¼“å­˜ã€‚CPUï¼ˆJSï¼‰åªæ“ä½œå†…å­˜ï¼ˆVirtual DOMï¼‰ï¼Œæœ€åçš„æ—¶å€™å†æŠŠå˜æ›´å†™å…¥ç¡¬ç›˜ï¼ˆDOMï¼‰ã€‚</p>
<h2 id="ç®—æ³•å®ç°"><a href="#ç®—æ³•å®ç°" class="headerlink" title="ç®—æ³•å®ç°"></a>ç®—æ³•å®ç°</h2><h3 id="æ­¥éª¤ä¸€ï¼šç”¨-JS-å¯¹è±¡æ¨¡æ‹Ÿ-DOM-æ ‘"><a href="#æ­¥éª¤ä¸€ï¼šç”¨-JS-å¯¹è±¡æ¨¡æ‹Ÿ-DOM-æ ‘" class="headerlink" title="æ­¥éª¤ä¸€ï¼šç”¨ JS å¯¹è±¡æ¨¡æ‹Ÿ DOM æ ‘"></a>æ­¥éª¤ä¸€ï¼šç”¨ JS å¯¹è±¡æ¨¡æ‹Ÿ DOM æ ‘</h3><p>ç”¨ JavaScript æ¥è¡¨ç¤ºä¸€ä¸ª DOM èŠ‚ç‚¹æ˜¯å¾ˆç®€å•çš„äº‹æƒ…ï¼Œä½ åªéœ€è¦è®°å½•å®ƒçš„èŠ‚ç‚¹ç±»å‹ã€å±æ€§ï¼Œè¿˜æœ‰å­èŠ‚ç‚¹ï¼š<br>element.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function Element (tagName, props, children) &#123;</span><br><span class="line">  this.tagName &#x3D; tagName</span><br><span class="line">  this.props &#x3D; props</span><br><span class="line">  this.children &#x3D; children</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports &#x3D; function (tagName, props, children) &#123;</span><br><span class="line">  return new Element(tagName, props, children)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šé¢çš„ DOM ç»“æ„å°±å¯ä»¥è¿™ä¹ˆè¡¨ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let el &#x3D; require(&#39;.&#x2F;element&#39;)</span><br><span class="line"></span><br><span class="line">let ul &#x3D; el(&#39;ul&#39;, &#123;id: &#39;list&#39;&#125;, [</span><br><span class="line">  el(&#39;li&#39;, &#123;class: &#39;item&#39;&#125;, [&#39;Item 1&#39;]),</span><br><span class="line">  el(&#39;li&#39;, &#123;class: &#39;item&#39;&#125;, [&#39;Item 2&#39;]),</span><br><span class="line">  el(&#39;li&#39;, &#123;class: &#39;item&#39;&#125;, [&#39;Item 3&#39;])</span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œæˆ‘ä»¬æ ¹æ®è¿™ä¸ª ul æ„å»ºçœŸæ­£çš„&lt;ul&gt;ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Element.prototype.render &#x3D; function () &#123;</span><br><span class="line">  let el &#x3D; document.createElement(this.tagName) &#x2F;&#x2F; æ ¹æ®tagNameæ„å»º</span><br><span class="line">  let props &#x3D; this.props</span><br><span class="line"></span><br><span class="line">  for (let propName in props) &#123; &#x2F;&#x2F; è®¾ç½®èŠ‚ç‚¹çš„DOMå±æ€§</span><br><span class="line">    let propValue &#x3D; props[propName]</span><br><span class="line">    el.setAttribute(propName, propValue)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  let children &#x3D; this.children || []</span><br><span class="line"></span><br><span class="line">  children.forEach((child) &#x3D;&gt; &#123;</span><br><span class="line">    let childEl &#x3D; (child instanceof Element)</span><br><span class="line">      ? child.render() &#x2F;&#x2F; å¦‚æœå­èŠ‚ç‚¹ä¹Ÿæ˜¯è™šæ‹ŸDOMï¼Œé€’å½’æ„å»ºDOMèŠ‚ç‚¹</span><br><span class="line">      : document.createTextNode(child) &#x2F;&#x2F; å¦‚æœå­—ç¬¦ä¸²ï¼Œåªæ„å»ºæ–‡æœ¬èŠ‚ç‚¹</span><br><span class="line">    el.appendChild(childEl)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  return el</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>render æ–¹æ³•ä¼šæ ¹æ® tagName æ„å»ºä¸€ä¸ªçœŸæ­£çš„ DOM èŠ‚ç‚¹ï¼Œç„¶åè®¾ç½®è¿™ä¸ªèŠ‚ç‚¹çš„å±æ€§ï¼Œæœ€åé€’å½’åœ°æŠŠè‡ªå·±çš„å­èŠ‚ç‚¹ä¹Ÿæ„å»ºèµ·æ¥ã€‚æ‰€ä»¥åªéœ€è¦ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var ulRoot &#x3D; ul.render()</span><br><span class="line">document.body.appendChild(ulRoot)</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ ulRoot æ˜¯çœŸæ­£çš„ DOM èŠ‚ç‚¹ï¼ŒæŠŠå®ƒå¡å…¥æ–‡æ¡£ä¸­ï¼Œè¿™æ · body é‡Œé¢å°±æœ‰äº†çœŸæ­£çš„&lt;ul&gt;çš„ DOM ç»“æ„:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul id&#x3D;&#39;list&#39;&gt;</span><br><span class="line">  &lt;li class&#x3D;&#39;item&#39;&gt;Item 1&lt;&#x2F;li&gt;</span><br><span class="line">  &lt;li class&#x3D;&#39;item&#39;&gt;Item 2&lt;&#x2F;li&gt;</span><br><span class="line">  &lt;li class&#x3D;&#39;item&#39;&gt;Item 3&lt;&#x2F;li&gt;</span><br><span class="line">&lt;&#x2F;ul&gt;</span><br></pre></td></tr></table></figure>

<p>å®Œæ•´ä»£ç å¯è§ <a href="https://github.com/livoras/simple-virtual-dom/blob/master/lib/element.js" target="_blank" rel="noopener">element.js</a>ã€‚</p>
<h3 id="æ­¥éª¤äºŒï¼šæ¯”è¾ƒä¸¤æ£µè™šæ‹Ÿ-DOM-æ ‘çš„å·®å¼‚"><a href="#æ­¥éª¤äºŒï¼šæ¯”è¾ƒä¸¤æ£µè™šæ‹Ÿ-DOM-æ ‘çš„å·®å¼‚" class="headerlink" title="æ­¥éª¤äºŒï¼šæ¯”è¾ƒä¸¤æ£µè™šæ‹Ÿ DOM æ ‘çš„å·®å¼‚"></a>æ­¥éª¤äºŒï¼šæ¯”è¾ƒä¸¤æ£µè™šæ‹Ÿ DOM æ ‘çš„å·®å¼‚</h3><p>ï¼Œæ¯”è¾ƒä¸¤æ£µ DOM æ ‘çš„å·®å¼‚æ˜¯ Virtual DOM ç®—æ³•æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œè¿™ä¹Ÿæ˜¯æ‰€è°“çš„ Virtual DOM çš„ diff ç®—æ³•ã€‚ä¸¤ä¸ªæ ‘çš„å®Œå…¨çš„ diff ç®—æ³•æ˜¯ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(n^3) çš„é—®é¢˜ã€‚ä½†æ˜¯åœ¨å‰ç«¯å½“ä¸­ï¼Œä½ å¾ˆå°‘ä¼šè·¨è¶Šå±‚çº§åœ°ç§»åŠ¨ DOM å…ƒç´ ã€‚æ‰€ä»¥ Virtual DOM åªä¼šå¯¹åŒä¸€ä¸ªå±‚çº§çš„å…ƒç´ è¿›è¡Œå¯¹æ¯”:<br><img src="/images/2020-03-22/compare-in-level.png" alt="compare-in-level"></p>
<h5 id="1-æ·±åº¦ä¼˜å…ˆéå†ï¼Œè®°å½•å·®å¼‚"><a href="#1-æ·±åº¦ä¼˜å…ˆéå†ï¼Œè®°å½•å·®å¼‚" class="headerlink" title="1.æ·±åº¦ä¼˜å…ˆéå†ï¼Œè®°å½•å·®å¼‚"></a>1.æ·±åº¦ä¼˜å…ˆéå†ï¼Œè®°å½•å·®å¼‚</h5><p>åœ¨å®é™…çš„ä»£ç ä¸­ï¼Œä¼šå¯¹æ–°æ—§ä¸¤æ£µæ ‘è¿›è¡Œä¸€ä¸ªæ·±åº¦ä¼˜å…ˆçš„éå†ï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šæœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è®°ï¼š<br><img src="/images/2020-03-22/dfs-walk.png" alt="dfs-walk"><br>åœ¨æ·±åº¦ä¼˜å…ˆéå†çš„æ—¶å€™ï¼Œæ¯éå†åˆ°ä¸€ä¸ªèŠ‚ç‚¹å°±æŠŠè¯¥èŠ‚ç‚¹å’Œæ–°çš„çš„æ ‘è¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœæœ‰å·®å¼‚çš„è¯å°±è®°å½•åˆ°ä¸€ä¸ªå¯¹è±¡é‡Œé¢ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; diff å‡½æ•°ï¼Œå¯¹æ¯”ä¸¤æ£µæ ‘</span><br><span class="line">function diff (oldTree, newTree) &#123;</span><br><span class="line">  var index &#x3D; 0 &#x2F;&#x2F; å½“å‰èŠ‚ç‚¹çš„æ ‡å¿—</span><br><span class="line">  var patches &#x3D; &#123;&#125; &#x2F;&#x2F; ç”¨æ¥è®°å½•æ¯ä¸ªèŠ‚ç‚¹å·®å¼‚çš„å¯¹è±¡</span><br><span class="line">  dfsWalk(oldTree, newTree, index, patches)</span><br><span class="line">  return patches</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å¯¹ä¸¤æ£µæ ‘è¿›è¡Œæ·±åº¦ä¼˜å…ˆéå†</span><br><span class="line">function dfsWalk (oldNode, newNode, index, patches) &#123;</span><br><span class="line">  &#x2F;&#x2F; å¯¹æ¯”oldNodeå’ŒnewNodeçš„ä¸åŒï¼Œè®°å½•ä¸‹æ¥</span><br><span class="line">  patches[index] &#x3D; [...]</span><br><span class="line"></span><br><span class="line">  diffChildren(oldNode.children, newNode.children, index, patches)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; éå†å­èŠ‚ç‚¹</span><br><span class="line">function diffChildren (oldChildren, newChildren, index, patches) &#123;</span><br><span class="line">  var leftNode &#x3D; null</span><br><span class="line">  var currentNodeIndex &#x3D; index</span><br><span class="line">  oldChildren.forEach(function (child, i) &#123;</span><br><span class="line">    var newChild &#x3D; newChildren[i]</span><br><span class="line">    currentNodeIndex &#x3D; (leftNode &amp;&amp; leftNode.count) &#x2F;&#x2F; è®¡ç®—èŠ‚ç‚¹çš„æ ‡è¯†</span><br><span class="line">      ? currentNodeIndex + leftNode.count + 1</span><br><span class="line">      : currentNodeIndex + 1</span><br><span class="line">    dfsWalk(child, newChild, currentNodeIndex, patches) &#x2F;&#x2F; æ·±åº¦éå†å­èŠ‚ç‚¹</span><br><span class="line">    leftNode &#x3D; child</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚ï¼Œä¸Šé¢çš„ div å’Œæ–°çš„ div æœ‰å·®å¼‚ï¼Œå½“å‰çš„æ ‡è®°æ˜¯ 0ï¼Œé‚£ä¹ˆï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">patches[0] &#x3D; [&#123;difference&#125;, &#123;difference&#125;, ...] &#x2F;&#x2F; ç”¨æ•°ç»„å­˜å‚¨æ–°æ—§èŠ‚ç‚¹çš„ä¸åŒ</span><br></pre></td></tr></table></figure>

<p>åŒç† p æ˜¯ patches[1]ï¼Œul æ˜¯ patches[3]ï¼Œç±»æ¨ã€‚</p>
<h5 id="2-å·®å¼‚ç±»å‹"><a href="#2-å·®å¼‚ç±»å‹" class="headerlink" title="2.å·®å¼‚ç±»å‹"></a>2.å·®å¼‚ç±»å‹</h5><p>èŠ‚ç‚¹çš„å·®å¼‚æŒ‡çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¯¹ DOM æ“ä½œå¯èƒ½ä¼šæœ‰ï¼š</p>
<ol>
<li>æ›¿æ¢æ‰åŸæ¥çš„èŠ‚ç‚¹ï¼Œä¾‹å¦‚æŠŠä¸Šé¢çš„ div æ¢æˆäº† section</li>
<li>ç§»åŠ¨ã€åˆ é™¤ã€æ–°å¢å­èŠ‚ç‚¹ï¼Œä¾‹å¦‚ä¸Šé¢ div çš„å­èŠ‚ç‚¹ï¼ŒæŠŠ p å’Œ ul é¡ºåºäº’æ¢</li>
<li>ä¿®æ”¹äº†èŠ‚ç‚¹çš„å±æ€§</li>
<li>å¯¹äºæ–‡æœ¬èŠ‚ç‚¹ï¼Œæ–‡æœ¬å†…å®¹å¯èƒ½ä¼šæ”¹å˜ã€‚ä¾‹å¦‚ä¿®æ”¹ä¸Šé¢çš„æ–‡æœ¬èŠ‚ç‚¹ 2 å†…å®¹ä¸º Virtual DOM 2ã€‚</li>
</ol>
<p>æ‰€ä»¥æˆ‘ä»¬å®šä¹‰äº†å‡ ç§å·®å¼‚ç±»å‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const REPLACE &#x3D; 0</span><br><span class="line">const REORDER &#x3D; 1</span><br><span class="line">const PROPS &#x3D; 2</span><br><span class="line">const TEXT &#x3D; 3</span><br></pre></td></tr></table></figure>

<p>å¯¹äºèŠ‚ç‚¹æ›¿æ¢ï¼Œå¦‚ div æ¢æˆ sectionï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">patches[0] &#x3D; [&#123;</span><br><span class="line">  type: REPALCE,</span><br><span class="line">  node: newNode &#x2F;&#x2F; el(&#39;section&#39;, props, children)</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<p>å¯¹äºæ·»åŠ å±æ€§ï¼Œå¦‚ div æ–°å¢äº†å±æ€§ id ä¸º containerï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">patches[0] &#x3D; [&#123;</span><br><span class="line">  type: REPALCE,</span><br><span class="line">  node: newNode &#x2F;&#x2F; el(&#39;section&#39;, props, children)</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  type: PROPS,</span><br><span class="line">  props: &#123;</span><br><span class="line">    id: &quot;container&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<p>å¯¹äºæ–‡æœ¬èŠ‚ç‚¹ï¼Œå¦‚ä¸Šé¢çš„æ–‡æœ¬èŠ‚ç‚¹ 2ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">patches[2] &#x3D; [&#123;</span><br><span class="line">  type: TEXT,</span><br><span class="line">  content: &quot;Virtual DOM2&quot;</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<p>å¯¹äºèŠ‚ç‚¹é‡æ–°æ’åºï¼Œå¦‚æœæŒ‰ç…§åŒå±‚çº§è¿›è¡Œé¡ºåºå¯¹æ¯”çš„è¯ï¼Œå®ƒä»¬éƒ½ä¼šè¢«æ›¿æ¢æ‰ï¼Œè¿™æ · DOM å¼€é”€å°±éå¸¸å¤§ã€‚è€Œå®é™…ä¸Šä¸éœ€è¦æ›¿æ¢èŠ‚ç‚¹ï¼Œè€Œåªéœ€è¦ç»è¿‡èŠ‚ç‚¹ç§»åŠ¨å°±å¯ä»¥è¾¾åˆ°ï¼Œæˆ‘ä»¬åªéœ€çŸ¥é“æ€ä¹ˆè¿›è¡Œç§»åŠ¨ã€‚<br>å¦‚ä½•ç§»åŠ¨ï¼Œè¿™ç‰µæ¶‰åˆ°ä¸¤ä¸ªåˆ—è¡¨çš„å¯¹æ¯”ç®—æ³•ï¼Œå°†åœ¨ä¸‹é¢çš„ç« èŠ‚ä»‹ç»ã€‚</p>
<h5 id="3-åˆ—è¡¨å¯¹æ¯”ç®—æ³•"><a href="#3-åˆ—è¡¨å¯¹æ¯”ç®—æ³•" class="headerlink" title="3.åˆ—è¡¨å¯¹æ¯”ç®—æ³•"></a>3.åˆ—è¡¨å¯¹æ¯”ç®—æ³•</h5><p>å‡è®¾ç°åœ¨å¯ä»¥è‹±æ–‡å­—æ¯å”¯ä¸€åœ°æ ‡è¯†æ¯ä¸€ä¸ªå­èŠ‚ç‚¹ï¼š<br>æ—§çš„èŠ‚ç‚¹é¡ºåºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a b c d e f g h i</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å¯¹èŠ‚ç‚¹è¿›è¡Œäº†åˆ é™¤ã€æ’å…¥ã€ç§»åŠ¨çš„æ“ä½œã€‚æ–°å¢ j èŠ‚ç‚¹ï¼Œåˆ é™¤ e èŠ‚ç‚¹ï¼Œç§»åŠ¨ h èŠ‚ç‚¹ï¼š<br>æ–°çš„èŠ‚ç‚¹é¡ºåºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a b c h d f g i j</span><br></pre></td></tr></table></figure>

<p>çŸ¥é“äº†æ–°æ—§çš„é¡ºåºï¼Œæ±‚æœ€å°çš„æ’å…¥ã€åˆ é™¤æ“ä½œï¼ˆç§»åŠ¨å¯ä»¥çœ‹æˆæ˜¯åˆ é™¤å’Œæ’å…¥æ“ä½œçš„ç»“åˆï¼‰ã€‚è¿™ä¸ªé—®é¢˜æŠ½è±¡å‡ºæ¥å…¶å®æ˜¯å­—ç¬¦ä¸²çš„æœ€å°ç¼–è¾‘è·ç¦»é—®é¢˜ï¼Œæœ€å¸¸è§çš„è§£å†³ç®—æ³•æ˜¯ç¼–è¾‘è·ç¦»ç®—æ³•ï¼ˆLevenshtein Distanceï¼‰ï¼Œé€šè¿‡åŠ¨æ€è§„åˆ’æ±‚è§£ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(M * N)ã€‚ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸éœ€è¦çœŸçš„è¾¾åˆ°æœ€å°çš„æ“ä½œï¼Œæˆ‘ä»¬åªéœ€è¦ä¼˜åŒ–ä¸€äº›æ¯”è¾ƒå¸¸è§çš„ç§»åŠ¨æƒ…å†µï¼Œç‰ºç‰²ä¸€å®š DOM æ“ä½œï¼Œè®©ç®—æ³•æ—¶é—´å¤æ‚åº¦è¾¾åˆ°çº¿æ€§çš„ï¼ˆO(max(M, N))ã€‚å…·ä½“ç®—æ³•ç»†èŠ‚æ¯”è¾ƒå¤šï¼Œæ„Ÿå…´è¶£çš„ç›´æ¥çœ‹<a href="https://github.com/livoras/list-diff/blob/master/lib/diff.js" target="_blank" rel="noopener">ä»£ç </a>å§ã€‚<br>æˆ‘ä»¬èƒ½å¤Ÿè·å–åˆ°æŸä¸ªçˆ¶èŠ‚ç‚¹çš„å­èŠ‚ç‚¹çš„æ“ä½œï¼Œå°±å¯ä»¥è®°å½•ä¸‹æ¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">patches[0] &#x3D; [&#123;</span><br><span class="line">  type: REORDER,</span><br><span class="line">  moves: [&#123;remove or insert&#125;, &#123;remove or insert&#125;, ...]</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<p>tagName æ˜¯å¯é‡å¤çš„ï¼Œä¸èƒ½ç”¨è¿™ä¸ªæ¥è¿›è¡Œå¯¹æ¯”ã€‚æ‰€ä»¥éœ€è¦ç»™å­èŠ‚ç‚¹åŠ ä¸Šå”¯ä¸€æ ‡è¯† keyï¼Œåˆ—è¡¨å¯¹æ¯”çš„æ—¶å€™ï¼Œä½¿ç”¨ key è¿›è¡Œå¯¹æ¯”ï¼Œè¿™æ ·æ‰èƒ½å¤ç”¨è€çš„ DOM æ ‘ä¸Šçš„èŠ‚ç‚¹ã€‚<br>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ·±åº¦ä¼˜å…ˆéå†ä¸¤æ£µæ ‘ï¼Œæ¯å±‚çš„èŠ‚ç‚¹è¿›è¡Œå¯¹æ¯”ï¼Œè®°å½•ä¸‹æ¯ä¸ªèŠ‚ç‚¹çš„å·®å¼‚äº†ã€‚å®Œæ•´ diff ç®—æ³•ä»£ç å¯è§ <a href="https://github.com/livoras/simple-virtual-dom/blob/master/lib/diff.js" target="_blank" rel="noopener">diff.js</a>ã€‚</p>
<h3 id="æ­¥éª¤ä¸‰ï¼šæŠŠå·®å¼‚åº”ç”¨åˆ°çœŸæ­£çš„-DOM-æ ‘ä¸Š"><a href="#æ­¥éª¤ä¸‰ï¼šæŠŠå·®å¼‚åº”ç”¨åˆ°çœŸæ­£çš„-DOM-æ ‘ä¸Š" class="headerlink" title="æ­¥éª¤ä¸‰ï¼šæŠŠå·®å¼‚åº”ç”¨åˆ°çœŸæ­£çš„ DOM æ ‘ä¸Š"></a>æ­¥éª¤ä¸‰ï¼šæŠŠå·®å¼‚åº”ç”¨åˆ°çœŸæ­£çš„ DOM æ ‘ä¸Š</h3><p>å› ä¸ºæ­¥éª¤ä¸€æ‰€æ„å»ºçš„ JavaScript å¯¹è±¡æ ‘å’Œ render å‡ºæ¥çœŸæ­£çš„ DOM æ ‘çš„ä¿¡æ¯ã€ç»“æ„æ˜¯ä¸€æ ·çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯¹é‚£æ£µ DOM æ ‘ä¹Ÿè¿›è¡Œæ·±åº¦ä¼˜å…ˆçš„éå†ï¼Œéå†çš„æ—¶å€™ä»æ­¥éª¤äºŒç”Ÿæˆçš„ patches å¯¹è±¡ä¸­æ‰¾å‡ºå½“å‰éå†çš„èŠ‚ç‚¹å·®å¼‚ï¼Œç„¶åè¿›è¡Œ DOM æ“ä½œã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">function patch (node, patches) &#123;</span><br><span class="line">  var walker &#x3D; &#123;index: 0&#125;</span><br><span class="line">  dfsWalk(node, walker, patches)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function dfsWalk (node, walker, patches) &#123;</span><br><span class="line">  var currentPatches &#x3D; patches[walker.index] &#x2F;&#x2F; ä»patchesæ‹¿å‡ºå½“å‰èŠ‚ç‚¹çš„å·®å¼‚</span><br><span class="line"></span><br><span class="line">  var len &#x3D; node.childNodes</span><br><span class="line">    ? node.childNodes.length</span><br><span class="line">    : 0</span><br><span class="line">  for (var i &#x3D; 0; i &lt; len; i++) &#123; &#x2F;&#x2F; æ·±åº¦éå†å­èŠ‚ç‚¹</span><br><span class="line">    var child &#x3D; node.childNodes[i]</span><br><span class="line">    walker.index++</span><br><span class="line">    dfsWalk(child, walker, patches)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if (currentPatches) &#123;</span><br><span class="line">    applyPatches(node, currentPatches) &#x2F;&#x2F; å¯¹å½“å‰èŠ‚ç‚¹è¿›è¡ŒDOMæ“ä½œ</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>applyPatchesï¼Œæ ¹æ®ä¸åŒç±»å‹çš„å·®å¼‚å¯¹å½“å‰èŠ‚ç‚¹è¿›è¡Œ DOM æ“ä½œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function applyPatches (node, currentPatches) &#123;</span><br><span class="line">  currentPatches.forEach(function (currentPatch) &#123;</span><br><span class="line">    switch (currentPatch.type) &#123;</span><br><span class="line">      case REPLACE:</span><br><span class="line">        node.parentNode.replaceChild(currentPatch.node.render(), node)</span><br><span class="line">        break</span><br><span class="line">      case REORDER:</span><br><span class="line">        reorderChildren(node, currentPatch.moves)</span><br><span class="line">        break</span><br><span class="line">      case PROPS:</span><br><span class="line">        setProps(node, currentPatch.props)</span><br><span class="line">        break</span><br><span class="line">      case TEXT:</span><br><span class="line">        node.textContent &#x3D; currentPatch.content</span><br><span class="line">        break</span><br><span class="line">      default:</span><br><span class="line">        throw new Error(&#39;Unknown patch type &#39; + currentPatch.type)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®Œæ•´ä»£ç å¯è§<a href="https://github.com/livoras/simple-virtual-dom/blob/master/lib/patch.js" target="_blank" rel="noopener">patch.js</a>ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Virtual DOM ç®—æ³•ä¸»è¦æ˜¯å®ç°ä¸Šé¢æ­¥éª¤çš„ä¸‰ä¸ªå‡½æ•°ï¼šelementï¼Œdiffï¼Œpatchã€‚ç„¶åå°±å¯ä»¥å®é™…çš„è¿›è¡Œä½¿ç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 1. æ„å»ºè™šæ‹ŸDOM</span><br><span class="line">var tree &#x3D; el(&#39;div&#39;, &#123;&#39;id&#39;: &#39;container&#39;&#125;, [</span><br><span class="line">    el(&#39;h1&#39;, &#123;style: &#39;color: blue&#39;&#125;, [&#39;simple virtal dom&#39;]),</span><br><span class="line">    el(&#39;p&#39;, [&#39;Hello, virtual-dom&#39;]),</span><br><span class="line">    el(&#39;ul&#39;, [el(&#39;li&#39;)])</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 2. é€šè¿‡è™šæ‹ŸDOMæ„å»ºçœŸæ­£çš„DOM</span><br><span class="line">var root &#x3D; tree.render()</span><br><span class="line">document.body.appendChild(root)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 3. ç”Ÿæˆæ–°çš„è™šæ‹ŸDOM</span><br><span class="line">var newTree &#x3D; el(&#39;div&#39;, &#123;&#39;id&#39;: &#39;container&#39;&#125;, [</span><br><span class="line">    el(&#39;h1&#39;, &#123;style: &#39;color: red&#39;&#125;, [&#39;simple virtal dom&#39;]),</span><br><span class="line">    el(&#39;p&#39;, [&#39;Hello, virtual-dom&#39;]),</span><br><span class="line">    el(&#39;ul&#39;, [el(&#39;li&#39;), el(&#39;li&#39;)])</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 4. æ¯”è¾ƒä¸¤æ£µè™šæ‹ŸDOMæ ‘çš„ä¸åŒ</span><br><span class="line">var patches &#x3D; diff(tree, newTree)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 5. åœ¨çœŸæ­£çš„DOMå…ƒç´ ä¸Šåº”ç”¨å˜æ›´</span><br><span class="line">patch(root, patches)</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯éå¸¸ç²—ç³™çš„å®è·µï¼Œå®é™…ä¸­è¿˜éœ€è¦å¤„ç†äº‹ä»¶ç›‘å¬ç­‰ï¼›ç”Ÿæˆè™šæ‹Ÿ DOM çš„æ—¶å€™ä¹Ÿå¯ä»¥åŠ å…¥ JSX è¯­æ³•ã€‚è¿™äº›äº‹æƒ…éƒ½åšäº†çš„è¯ï¼Œå°±å¯ä»¥æ„é€ ä¸€ä¸ªç®€å•çš„ ReactJS äº†ã€‚</p>
<p><a href="https://github.com/livoras/blog/issues/13" target="_blank" rel="noopener">åŸæ–‡é“¾æ¥</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2020/03/22/VirtualDOM%E7%AE%97%E6%B3%95/">å±•å¼€å…¨æ–‡ >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2021 å­™è‹—è‹—
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		toc_hide_index: true,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(e){if(r[e])return r[e].exports;var i=r[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var r={};n.m=t,n.c=r,n.p="./",n(0)}([function(t,n,r){r(195),t.exports=r(191)},function(t,n,r){var e=r(3),i=r(52),o=r(27),u=r(28),c=r(53),f="prototype",a=function(t,n,r){var s,l,h,v,p=t&a.F,d=t&a.G,y=t&a.S,g=t&a.P,b=t&a.B,m=d?e:y?e[n]||(e[n]={}):(e[n]||{})[f],x=d?i:i[n]||(i[n]={}),w=x[f]||(x[f]={});d&&(r=n);for(s in r)l=!p&&m&&void 0!==m[s],h=(l?m:r)[s],v=b&&l?c(h,e):g&&"function"==typeof h?c(Function.call,h):h,m&&u(m,s,h,t&a.U),x[s]!=h&&o(x,s,v),g&&w[s]!=h&&(w[s]=h)};e.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,r){var e=r(6);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(126)("wks"),i=r(76),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(94),i=r(33);t.exports=function(t){return e(i(t))}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(2),i=r(167),o=r(50),u=Object.defineProperty;n.f=r(10)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){t.exports=!r(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(14),i=r(22);t.exports=r(12)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(20),i=r(58),o=r(42),u=Object.defineProperty;n.f=r(12)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(40)("wks"),i=r(23),o=r(5).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(67),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){var e=r(46);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(63),i=r(34);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(21);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(11),i=r(66);t.exports=r(10)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(3),i=r(27),o=r(24),u=r(76)("src"),c="toString",f=Function[c],a=(""+f).split(c);r(52).inspectSource=function(t){return f.call(t)},(t.exports=function(t,n,r,c){var f="function"==typeof r;f&&(o(r,"name")||i(r,"name",n)),t[n]!==r&&(f&&(o(r,u)||i(r,u,t[n]?""+t[n]:a.join(String(n)))),t===e?t[n]=r:c?t[n]?t[n]=r:i(t,n,r):(delete t[n],i(t,n,r)))})(Function.prototype,c,function(){return"function"==typeof this&&this[u]||f.call(this)})},function(t,n,r){var e=r(1),i=r(4),o=r(46),u=function(t,n,r,e){var i=String(o(t)),u="<"+n;return""!==r&&(u+=" "+r+'="'+String(e).replace(/"/g,"&quot;")+'"'),u+">"+i+"</"+n+">"};t.exports=function(t,n){var r={};r[t]=n(u),e(e.P+e.F*i(function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}),"String",r)}},function(t,n,r){var e=r(115),i=r(46);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(116),i=r(66),o=r(30),u=r(50),c=r(24),f=r(167),a=Object.getOwnPropertyDescriptor;n.f=r(10)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(24),i=r(17),o=r(145)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(14).f,i=r(8),o=r(15)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(23);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(5),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n,r){var e=r(21);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(36),u=r(44),c=r(14).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(15)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n,r){var e=r(53),i=r(115),o=r(17),u=r(16),c=r(203);t.exports=function(t,n){var r=1==t,f=2==t,a=3==t,s=4==t,l=6==t,h=5==t||l,v=n||c;return function(n,c,p){for(var d,y,g=o(n),b=i(g),m=e(c,p,3),x=u(b.length),w=0,S=r?v(n,x):f?v(n,0):void 0;x>w;w++)if((h||w in b)&&(d=b[w],y=m(d,w,g),t))if(r)S[w]=y;else if(y)switch(t){case 3:return!0;case 5:return d;case 6:return w;case 2:S.push(d)}else if(s)return!1;return l?-1:a||s?s:S}}},function(t,n,r){var e=r(1),i=r(52),o=r(4);t.exports=function(t,n){var r=(i.Object||{})[t]||Object[t],u={};u[t]=n(r),e(e.S+e.F*o(function(){r(1)}),"Object",u)}},function(t,n,r){var e=r(6);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(91),u=r(13),c="prototype",f=function(t,n,r){var a,s,l,h=t&f.F,v=t&f.G,p=t&f.S,d=t&f.P,y=t&f.B,g=t&f.W,b=v?i:i[n]||(i[n]={}),m=b[c],x=v?e:p?e[n]:(e[n]||{})[c];v&&(r=n);for(a in r)(s=!h&&x&&void 0!==x[a])&&a in b||(l=s?x[a]:r[a],b[a]=v&&"function"!=typeof x[a]?r[a]:y&&s?o(l,e):g&&x[a]==l?function(t){var n=function(n,r,e){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,e)}return t.apply(this,arguments)};return n[c]=t[c],n}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((b.virtual||(b.virtual={}))[a]=l,t&f.R&&m&&!m[a]&&u(m,a,l)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n,r){var e=r(26);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(183),i=r(1),o=r(126)("metadata"),u=o.store||(o.store=new(r(186))),c=function(t,n,r){var i=u.get(t);if(!i){if(!r)return;u.set(t,i=new e)}var o=i.get(n);if(!o){if(!r)return;i.set(n,o=new e)}return o},f=function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},a=function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},s=function(t,n,r,e){c(r,e,!0).set(t,n)},l=function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},v=function(t){i(i.S,"Reflect",t)};t.exports={store:u,map:c,has:f,get:a,set:s,keys:l,key:h,exp:v}},function(t,n,r){"use strict";if(r(10)){var e=r(69),i=r(3),o=r(4),u=r(1),c=r(127),f=r(152),a=r(53),s=r(68),l=r(66),h=r(27),v=r(73),p=r(67),d=r(16),y=r(75),g=r(50),b=r(24),m=r(180),x=r(114),w=r(6),S=r(17),_=r(137),O=r(70),E=r(32),P=r(71).f,j=r(154),F=r(76),M=r(7),A=r(48),N=r(117),T=r(146),I=r(155),k=r(80),L=r(123),R=r(74),C=r(130),D=r(160),U=r(11),W=r(31),G=U.f,B=W.f,V=i.RangeError,z=i.TypeError,q=i.Uint8Array,K="ArrayBuffer",J="Shared"+K,Y="BYTES_PER_ELEMENT",H="prototype",$=Array[H],X=f.ArrayBuffer,Q=f.DataView,Z=A(0),tt=A(2),nt=A(3),rt=A(4),et=A(5),it=A(6),ot=N(!0),ut=N(!1),ct=I.values,ft=I.keys,at=I.entries,st=$.lastIndexOf,lt=$.reduce,ht=$.reduceRight,vt=$.join,pt=$.sort,dt=$.slice,yt=$.toString,gt=$.toLocaleString,bt=M("iterator"),mt=M("toStringTag"),xt=F("typed_constructor"),wt=F("def_constructor"),St=c.CONSTR,_t=c.TYPED,Ot=c.VIEW,Et="Wrong length!",Pt=A(1,function(t,n){return Tt(T(t,t[wt]),n)}),jt=o(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Ft=!!q&&!!q[H].set&&o(function(){new q(1).set({})}),Mt=function(t,n){if(void 0===t)throw z(Et);var r=+t,e=d(t);if(n&&!m(r,e))throw V(Et);return e},At=function(t,n){var r=p(t);if(r<0||r%n)throw V("Wrong offset!");return r},Nt=function(t){if(w(t)&&_t in t)return t;throw z(t+" is not a typed array!")},Tt=function(t,n){if(!(w(t)&&xt in t))throw z("It is not a typed array constructor!");return new t(n)},It=function(t,n){return kt(T(t,t[wt]),n)},kt=function(t,n){for(var r=0,e=n.length,i=Tt(t,e);e>r;)i[r]=n[r++];return i},Lt=function(t,n,r){G(t,n,{get:function(){return this._d[r]}})},Rt=function(t){var n,r,e,i,o,u,c=S(t),f=arguments.length,s=f>1?arguments[1]:void 0,l=void 0!==s,h=j(c);if(void 0!=h&&!_(h)){for(u=h.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(l&&f>2&&(s=a(s,arguments[2],2)),n=0,r=d(c.length),i=Tt(this,r);r>n;n++)i[n]=l?s(c[n],n):c[n];return i},Ct=function(){for(var t=0,n=arguments.length,r=Tt(this,n);n>t;)r[t]=arguments[t++];return r},Dt=!!q&&o(function(){gt.call(new q(1))}),Ut=function(){return gt.apply(Dt?dt.call(Nt(this)):Nt(this),arguments)},Wt={copyWithin:function(t,n){return D.call(Nt(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function(t){return rt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return C.apply(Nt(this),arguments)},filter:function(t){return It(this,tt(Nt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return et(Nt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Nt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(Nt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ut(Nt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Nt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return vt.apply(Nt(this),arguments)},lastIndexOf:function(t){return st.apply(Nt(this),arguments)},map:function(t){return Pt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Nt(this),arguments)},reduceRight:function(t){return ht.apply(Nt(this),arguments)},reverse:function(){for(var t,n=this,r=Nt(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(Nt(this),t)},subarray:function(t,n){var r=Nt(this),e=r.length,i=y(t,e);return new(T(r,r[wt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,d((void 0===n?e:y(n,e))-i))}},Gt=function(t,n){return It(this,dt.call(Nt(this),t,n))},Bt=function(t){Nt(this);var n=At(arguments[1],1),r=this.length,e=S(t),i=d(e.length),o=0;if(i+n>r)throw V(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(Nt(this))},keys:function(){return ft.call(Nt(this))},values:function(){return ct.call(Nt(this))}},zt=function(t,n){return w(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return zt(t,n=g(n,!0))?l(2,t[n]):B(t,n)},Kt=function(t,n,r){return!(zt(t,n=g(n,!0))&&w(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?G(t,n,r):(t[n]=r.value,t)};St||(W.f=qt,U.f=Kt),u(u.S+u.F*!St,"Object",{getOwnPropertyDescriptor:qt,defineProperty:Kt}),o(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Jt=v({},Wt);v(Jt,Vt),h(Jt,bt,Vt.values),v(Jt,{slice:Gt,set:Bt,constructor:function(){},toString:yt,toLocaleString:Ut}),Lt(Jt,"buffer","b"),Lt(Jt,"byteOffset","o"),Lt(Jt,"byteLength","l"),Lt(Jt,"length","e"),G(Jt,mt,{get:function(){return this[_t]}}),t.exports=function(t,n,r,f){f=!!f;var a=t+(f?"Clamped":"")+"Array",l="Uint8Array"!=a,v="get"+t,p="set"+t,y=i[a],g=y||{},b=y&&E(y),m=!y||!c.ABV,S={},_=y&&y[H],j=function(t,r){var e=t._d;return e.v[v](r*n+e.o,jt)},F=function(t,r,e){var i=t._d;f&&(e=(e=Math.round(e))<0?0:e>255?255:255&e),i.v[p](r*n+i.o,e,jt)},M=function(t,n){G(t,n,{get:function(){return j(this,n)},set:function(t){return F(this,n,t)},enumerable:!0})};m?(y=r(function(t,r,e,i){s(t,y,a,"_d");var o,u,c,f,l=0,v=0;if(w(r)){if(!(r instanceof X||(f=x(r))==K||f==J))return _t in r?kt(y,r):Rt.call(y,r);o=r,v=At(e,n);var p=r.byteLength;if(void 0===i){if(p%n)throw V(Et);if((u=p-v)<0)throw V(Et)}else if((u=d(i)*n)+v>p)throw V(Et);c=u/n}else c=Mt(r,!0),u=c*n,o=new X(u);for(h(t,"_d",{b:o,o:v,l:u,e:c,v:new Q(o)});l<c;)M(t,l++)}),_=y[H]=O(Jt),h(_,"constructor",y)):L(function(t){new y(null),new y(t)},!0)||(y=r(function(t,r,e,i){s(t,y,a);var o;return w(r)?r instanceof X||(o=x(r))==K||o==J?void 0!==i?new g(r,At(e,n),i):void 0!==e?new g(r,At(e,n)):new g(r):_t in r?kt(y,r):Rt.call(y,r):new g(Mt(r,l))}),Z(b!==Function.prototype?P(g).concat(P(b)):P(g),function(t){t in y||h(y,t,g[t])}),y[H]=_,e||(_.constructor=y));var A=_[bt],N=!!A&&("values"==A.name||void 0==A.name),T=Vt.values;h(y,xt,!0),h(_,_t,a),h(_,Ot,!0),h(_,wt,y),(f?new y(1)[mt]==a:mt in _)||G(_,mt,{get:function(){return a}}),S[a]=y,u(u.G+u.W+u.F*(y!=g),S),u(u.S,a,{BYTES_PER_ELEMENT:n,from:Rt,of:Ct}),Y in _||h(_,Y,n),u(u.P,a,Wt),R(a),u(u.P+u.F*Ft,a,{set:Bt}),u(u.P+u.F*!N,a,Vt),u(u.P+u.F*(_.toString!=yt),a,{toString:yt}),u(u.P+u.F*o(function(){new y(1).slice()}),a,{slice:Gt}),u(u.P+u.F*(o(function(){return[1,2].toLocaleString()!=new y([1,2]).toLocaleString()})||!o(function(){_.toLocaleString.call([1,2])})),a,{toLocaleString:Ut}),k[a]=N?A:T,e||N||h(_,bt,T)}}else t.exports=function(){}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(21),i=r(5).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(12)&&!r(18)(function(){return 7!=Object.defineProperty(r(57)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var e=r(36),i=r(51),o=r(64),u=r(13),c=r(8),f=r(35),a=r(96),s=r(38),l=r(103),h=r(15)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n,r){var e=r(20),i=r(100),o=r(34),u=r(39)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(57)("iframe"),e=o.length;for(n.style.display="none",r(93).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(63),i=r(34).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(8),i=r(9),o=r(90)(!1),u=r(39)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){t.exports=r(13)},function(t,n,r){var e=r(76)("meta"),i=r(6),o=r(24),u=r(11).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n){t.exports=!1},function(t,n,r){var e=r(2),i=r(173),o=r(133),u=r(145)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(132)("iframe"),e=o.length;for(n.style.display="none",r(135).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(175),i=r(133).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(175),i=r(133);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(28);t.exports=function(t,n,r){for(var i in n)e(t,i,n[i],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(11),o=r(10),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(67),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(33);t.exports=function(t){return Object(e(t))}},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;void 0==i[e]&&r(27)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n,r){var e=r(53),i=r(169),o=r(137),u=r(2),c=r(16),f=r(154),a={},s={},n=t.exports=function(t,n,r,l,h){var v,p,d,y,g=h?function(){return t}:f(t),b=e(r,l,n?2:1),m=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(v=c(t.length);v>m;m++)if((y=n?b(u(p=t[m])[0],p[1]):b(t[m]))===a||y===s)return y}else for(d=g.call(t);!(p=d.next()).done;)if((y=i(d,b,p.value,n))===a||y===s)return y};n.BREAK=a,n.RETURN=s},function(t,n){t.exports={}},function(t,n,r){var e=r(11).f,i=r(24),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(1),i=r(46),o=r(4),u=r(150),c="["+u+"]",f="â€‹Â…",a=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),l=function(t,n,r){var i={},c=o(function(){return!!u[t]()||f[t]()!=f}),a=i[t]=c?n(h):u[t];r&&(i[r]=a),e(e.P+e.F*c,"String",i)},h=l.trim=function(t,n){return t=String(i(t)),1&n&&(t=t.replace(a,"")),2&n&&(t=t.replace(s,"")),t};t.exports=l},function(t,n,r){t.exports={default:r(86),__esModule:!0}},function(t,n,r){t.exports={default:r(87),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(84),o=e(i),u=r(83),c=e(u),f="function"==typeof c.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":typeof t};n.default="function"==typeof c.default&&"symbol"===f(o.default)?function(t){return void 0===t?"undefined":f(t)}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":void 0===t?"undefined":f(t)}},function(t,n,r){r(110),r(108),r(111),r(112),t.exports=r(25).Symbol},function(t,n,r){r(109),r(113),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(9),i=r(106),o=r(105);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){var e=r(88);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(19),i=r(62),o=r(37);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){t.exports=r(5).document&&document.documentElement},function(t,n,r){var e=r(56);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(56);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(60),i=r(22),o=r(38),u={};r(13)(u,r(15)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(19),i=r(9);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){var e=r(23)("meta"),i=r(21),o=r(8),u=r(14).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(18)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n,r){var e=r(14),i=r(20),o=r(19);t.exports=r(12)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(22),o=r(9),u=r(42),c=r(8),f=r(58),a=Object.getOwnPropertyDescriptor;n.f=r(12)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(9),i=r(61).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(8),i=r(77),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(41),i=r(33);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(89),i=r(97),o=r(35),u=r(9);t.exports=r(59)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(104)(!0);r(59)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(5),i=r(8),o=r(12),u=r(51),c=r(64),f=r(99).KEY,a=r(18),s=r(40),l=r(38),h=r(23),v=r(15),p=r(44),d=r(43),y=r(98),g=r(92),b=r(95),m=r(20),x=r(9),w=r(42),S=r(22),_=r(60),O=r(102),E=r(101),P=r(14),j=r(19),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(61).f=O.f=Z,r(37).f=X,r(62).f=tt,o&&!r(36)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(13)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(107);for(var e=r(5),i=r(13),o=r(35),u=r(15)("toStringTag"),c=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){var e=r(45),i=r(7)("toStringTag"),o="Arguments"==e(function(){return arguments}()),u=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,r,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=u(n=Object(t),i))?r:o?e(n):"Object"==(c=e(n))&&"function"==typeof n.callee?"Arguments":c}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(30),i=r(16),o=r(75);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){"use strict";var e=r(3),i=r(1),o=r(28),u=r(73),c=r(65),f=r(79),a=r(68),s=r(6),l=r(4),h=r(123),v=r(81),p=r(136);t.exports=function(t,n,r,d,y,g){var b=e[t],m=b,x=y?"set":"add",w=m&&m.prototype,S={},_=function(t){var n=w[t];o(w,t,"delete"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!s(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,r){return n.call(this,0===t?0:t,r),this})};if("function"==typeof m&&(g||w.forEach&&!l(function(){(new m).entries().next()}))){var O=new m,E=O[x](g?{}:-0,1)!=O,P=l(function(){O.has(1)}),j=h(function(t){new m(t)}),F=!g&&l(function(){for(var t=new m,n=5;n--;)t[x](n,n);return!t.has(-0)});j||(m=n(function(n,r){a(n,m,t);var e=p(new b,n,m);return void 0!=r&&f(r,y,e[x],e),e}),m.prototype=w,w.constructor=m),(P||F)&&(_("delete"),_("has"),y&&_("get")),(F||E)&&_(x),g&&w.clear&&delete w.clear}else m=d.getConstructor(n,t,y,x),u(m.prototype,r),c.NEED=!0;return v(m,t),S[t]=m,i(i.G+i.W+i.F*(m!=b),S),g||d.setStrong(m,t,y),m}},function(t,n,r){"use strict";var e=r(27),i=r(28),o=r(4),u=r(46),c=r(7);t.exports=function(t,n,r){var f=c(t),a=r(u,f,""[t]),s=a[0],l=a[1];o(function(){var n={};return n[f]=function(){return 7},7!=""[t](n)})&&(i(String.prototype,t,s),e(RegExp.prototype,f,2==n?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)}))}
},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(6),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var e=r(7)("iterator"),i=!1;try{var o=[7][e]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var r=!1;try{var o=[7],u=o[e]();u.next=function(){return{done:r=!0}},o[e]=function(){return u},t(o)}catch(t){}return r}},function(t,n,r){t.exports=r(69)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(3),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,r){for(var e,i=r(3),o=r(27),u=r(76),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n){"use strict";var r={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari"),weixin:-1==t.indexOf("MicroMessenger")}}()};t.exports=r},function(t,n,r){"use strict";var e=r(85),i=function(t){return t&&t.__esModule?t:{default:t}}(e),o=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):r[t]||t}function n(t){return e[t]}var r={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},e={};for(var u in r)e[r[u]]=u;return r["&apos;"]="'",e["'"]="&#39;",{encode:function(t){return t?(""+t).replace(/['<> "&]/g,n).replace(/\r?\n/g,"<br/>").replace(/\s/g,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(/<br\s*\/?>/gi,"\n").replace(/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,t).replace(/\u00a0/g," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;r>n;n++)t[n]=o.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,i.default)(t)))for(var e in t)t[e]=o.encodeObject(t[e]);else if("string"==typeof t)return o.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=o},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=function(t){for(var n=e(this),r=o(n.length),u=arguments.length,c=i(u>1?arguments[1]:void 0,r),f=u>2?arguments[2]:void 0,a=void 0===f?r:i(f,r);a>c;)n[c++]=t;return n}},function(t,n,r){"use strict";var e=r(11),i=r(66);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(6),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[e]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,r){t.exports=r(3).document&&document.documentElement},function(t,n,r){var e=r(6),i=r(144).set;t.exports=function(t,n,r){var o,u=n.constructor;return u!==r&&"function"==typeof u&&(o=u.prototype)!==r.prototype&&e(o)&&i&&i(t,o),t}},function(t,n,r){var e=r(80),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(70),i=r(66),o=r(81),u={};r(27)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var e=r(69),i=r(1),o=r(28),u=r(27),c=r(24),f=r(80),a=r(139),s=r(81),l=r(32),h=r(7)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var e=r(3),i=r(151).set,o=e.MutationObserver||e.WebKitMutationObserver,u=e.process,c=e.Promise,f="process"==r(45)(u);t.exports=function(){var t,n,r,a=function(){var e,i;for(f&&(e=u.domain)&&e.exit();t;){i=t.fn,t=t.next;try{i()}catch(e){throw t?r():n=void 0,e}}n=void 0,e&&e.enter()};if(f)r=function(){u.nextTick(a)};else if(o){var s=!0,l=document.createTextNode("");new o(a).observe(l,{characterData:!0}),r=function(){l.data=s=!s}}else if(c&&c.resolve){var h=c.resolve();r=function(){h.then(a)}}else r=function(){i.call(e,a)};return function(e){var i={fn:e,next:void 0};n&&(n.next=i),t||(t=i,r()),n=i}}},function(t,n,r){var e=r(6),i=r(2),o=function(t,n){if(i(t),!e(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{e=r(53)(Function.call,r(31).f(Object.prototype,"__proto__").set,2),e(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return o(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(126)("keys"),i=r(76);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(2),i=r(26),o=r(7)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||void 0==(r=e(u)[o])?n:i(r)}},function(t,n,r){var e=r(67),i=r(46);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(122),i=r(46);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var e=r(67),i=r(46);t.exports=function(t){var n=String(i(this)),r="",o=e(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r Â áš€á â€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(53),c=r(121),f=r(135),a=r(132),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=0,y={},g="onreadystatechange",b=function(){var t=+this;if(y.hasOwnProperty(t)){var n=y[t];delete y[t],n()}},m=function(t){b.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return y[++d]=function(){c("function"==typeof t?t:Function(t),n)},e(d),d},v=function(t){delete y[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(b,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e=g in a("script")?function(t){f.appendChild(a("script"))[g]=function(){f.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";var e=r(3),i=r(10),o=r(69),u=r(127),c=r(27),f=r(73),a=r(4),s=r(68),l=r(67),h=r(16),v=r(71).f,p=r(11).f,d=r(130),y=r(81),g="ArrayBuffer",b="DataView",m="prototype",x="Wrong length!",w="Wrong index!",S=e[g],_=e[b],O=e.Math,E=e.RangeError,P=e.Infinity,j=S,F=O.abs,M=O.pow,A=O.floor,N=O.log,T=O.LN2,I="buffer",k="byteLength",L="byteOffset",R=i?"_b":I,C=i?"_l":k,D=i?"_o":L,U=function(t,n,r){var e,i,o,u=Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?M(2,-24)-M(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=F(t),t!=t||t===P?(i=t!=t?1:0,e=f):(e=A(N(t)/T),t*(o=M(2,-e))<1&&(e--,o*=2),t+=e+a>=1?s/o:s*M(2,1-a),t*o>=2&&(e++,o/=2),e+a>=f?(i=0,e=f):e+a>=1?(i=(t*o-1)*M(2,n),e+=a):(i=t*M(2,a-1)*M(2,n),e=0));n>=8;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;c>0;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u},W=function(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;c>0;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;c>0;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-P:P;e+=M(2,n),s-=u}return(a?-1:1)*e*M(2,s-n)},G=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},B=function(t){return[255&t]},V=function(t){return[255&t,t>>8&255]},z=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},q=function(t){return U(t,52,8)},K=function(t){return U(t,23,4)},J=function(t,n,r){p(t[m],n,{get:function(){return this[r]}})},Y=function(t,n,r,e){var i=+r,o=l(i);if(i!=o||o<0||o+n>t[C])throw E(w);var u=t[R]._b,c=o+t[D],f=u.slice(c,c+n);return e?f:f.reverse()},H=function(t,n,r,e,i,o){var u=+r,c=l(u);if(u!=c||c<0||c+n>t[C])throw E(w);for(var f=t[R]._b,a=c+t[D],s=e(+i),h=0;h<n;h++)f[a+h]=s[o?h:n-h-1]},$=function(t,n){s(t,S,g);var r=+n,e=h(r);if(r!=e)throw E(x);return e};if(u.ABV){if(!a(function(){new S})||!a(function(){new S(.5)})){S=function(t){return new j($(this,t))};for(var X,Q=S[m]=j[m],Z=v(j),tt=0;Z.length>tt;)(X=Z[tt++])in S||c(S,X,j[X]);o||(Q.constructor=S)}var nt=new _(new S(2)),rt=_[m].setInt8;nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||f(_[m],{setInt8:function(t,n){rt.call(this,t,n<<24>>24)},setUint8:function(t,n){rt.call(this,t,n<<24>>24)}},!0)}else S=function(t){var n=$(this,t);this._b=d.call(Array(n),0),this[C]=n},_=function(t,n,r){s(this,_,b),s(t,S,b);var e=t[C],i=l(n);if(i<0||i>e)throw E("Wrong offset!");if(r=void 0===r?e-i:h(r),i+r>e)throw E(x);this[R]=t,this[D]=i,this[C]=r},i&&(J(S,k,"_l"),J(_,I,"_b"),J(_,k,"_l"),J(_,L,"_o")),f(_[m],{getInt8:function(t){return Y(this,1,t)[0]<<24>>24},getUint8:function(t){return Y(this,1,t)[0]},getInt16:function(t){var n=Y(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=Y(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return G(Y(this,4,t,arguments[1]))},getUint32:function(t){return G(Y(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return W(Y(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return W(Y(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){H(this,1,t,B,n)},setUint8:function(t,n){H(this,1,t,B,n)},setInt16:function(t,n){H(this,2,t,V,n,arguments[2])},setUint16:function(t,n){H(this,2,t,V,n,arguments[2])},setInt32:function(t,n){H(this,4,t,z,n,arguments[2])},setUint32:function(t,n){H(this,4,t,z,n,arguments[2])},setFloat32:function(t,n){H(this,4,t,K,n,arguments[2])},setFloat64:function(t,n){H(this,8,t,q,n,arguments[2])}});y(S,g),y(_,b),c(_[m],u.VIEW,!0),n[g]=S,n[b]=_},function(t,n,r){var e=r(3),i=r(52),o=r(69),u=r(182),c=r(11).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(114),i=r(7)("iterator"),o=r(80);t.exports=r(52).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(78),i=r(170),o=r(80),u=r(30);t.exports=r(140)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){function r(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=r},function(t,n){function r(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}t.exports=r},function(t,n){function r(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function i(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(n){try{return s.call(null,t,0)}catch(n){return s.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(n){try{return l.call(null,t)}catch(n){return l.call(this,t)}}}function u(){d&&v&&(d=!1,v.length?p=v.concat(p):y=-1,p.length&&c())}function c(){if(!d){var t=i(u);d=!0;for(var n=p.length;n;){for(v=p,p=[];++y<n;)v&&v[y].run();y=-1,n=p.length}v=null,d=!1,o(t)}}function f(t,n){this.fun=t,this.array=n}function a(){}var s,l,h=t.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(t){s=r}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(t){l=e}}();var v,p=[],d=!1,y=-1;h.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];p.push(new f(t,n)),1!==p.length||d||i(c)},f.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.prependListener=a,h.prependOnceListener=a,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=[].copyWithin||function(t,n){var r=e(this),u=o(r.length),c=i(t,u),f=i(n,u),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?u:i(a,u))-f,u-c),l=1;for(f<c&&c<f+s&&(l=-1,f+=s-1,c+=s-1);s-- >0;)f in r?r[c]=r[f]:delete r[c],c+=l,f+=l;return r}},function(t,n,r){var e=r(79);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var e=r(26),i=r(17),o=r(115),u=r(16);t.exports=function(t,n,r,c,f){e(n);var a=i(t),s=o(a),l=u(a.length),h=f?l-1:0,v=f?-1:1;if(r<2)for(;;){if(h in s){c=s[h],h+=v;break}if(h+=v,f?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;f?h>=0:l>h;h+=v)h in s&&(c=n(c,s[h],h,a));return c}},function(t,n,r){"use strict";var e=r(26),i=r(6),o=r(121),u=[].slice,c={},f=function(t,n,r){if(!(n in c)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";c[n]=Function("F,a","return new F("+e.join(",")+")")}return c[n](t,r)};t.exports=Function.bind||function(t){var n=e(this),r=u.call(arguments,1),c=function(){var e=r.concat(u.call(arguments));return this instanceof c?f(n,e.length,e):o(n,e,t)};return i(n.prototype)&&(c.prototype=n.prototype),c}},function(t,n,r){"use strict";var e=r(11).f,i=r(70),o=r(73),u=r(53),c=r(68),f=r(46),a=r(79),s=r(140),l=r(170),h=r(74),v=r(10),p=r(65).fastKey,d=v?"_s":"size",y=function(t,n){var r,e=p(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,n,r,s){var l=t(function(t,e){c(t,l,n,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=e&&a(e,r,t[s],t)});return o(l.prototype,{clear:function(){for(var t=this,n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=this,r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){c(this,l,"forEach");for(var n,r=u(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(this,t)}}),v&&e(l.prototype,"size",{get:function(){return f(this[d])}}),l},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=p(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,r){s(t,n,function(t,n){this._t=t,this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==n?l(0,r.k):"values"==n?l(0,r.v):l(0,[r.k,r.v]):(t._t=void 0,l(1))},r?"entries":"values",!r,!0),h(n)}}},function(t,n,r){var e=r(114),i=r(161);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var e=r(73),i=r(65).getWeak,o=r(2),u=r(6),c=r(68),f=r(79),a=r(48),s=r(24),l=a(5),h=a(6),v=0,p=function(t){return t._l||(t._l=new d)},d=function(){this.a=[]},y=function(t,n){return l(t.a,function(t){return t[0]===n})};d.prototype={get:function(t){var n=y(this,t);if(n)return n[1]},has:function(t){return!!y(this,t)},set:function(t,n){var r=y(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(t){var n=h(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},t.exports={getConstructor:function(t,n,r,o){var a=t(function(t,e){c(t,a,n,"_i"),t._i=v++,t._l=void 0,void 0!=e&&f(e,r,t[o],t)});return e(a.prototype,{delete:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).delete(t):n&&s(n,this._i)&&delete n[this._i]},has:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).has(t):n&&s(n,this._i)}}),a},def:function(t,n,r){var e=i(o(n),!0);return!0===e?p(t).set(n,r):e[t._i]=r,t},ufstore:p}},function(t,n,r){t.exports=!r(10)&&!r(4)(function(){return 7!=Object.defineProperty(r(132)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(6),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var e=r(2);t.exports=function(t,n,r,i){try{return i?n(e(r)[0],r[1]):n(r)}catch(n){var o=t.return;throw void 0!==o&&e(o.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n,r){"use strict";var e=r(72),i=r(125),o=r(116),u=r(17),c=r(115),f=Object.assign;t.exports=!f||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=f({},t)[r]||Object.keys(f({},n)).join("")!=e})?function(t,n){for(var r=u(t),f=arguments.length,a=1,s=i.f,l=o.f;f>a;)for(var h,v=c(arguments[a++]),p=s?e(v).concat(s(v)):e(v),d=p.length,y=0;d>y;)l.call(v,h=p[y++])&&(r[h]=v[h]);return r}:f},function(t,n,r){var e=r(11),i=r(2),o=r(72);t.exports=r(10)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(30),i=r(71).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(24),i=r(30),o=r(117)(!1),u=r(145)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){var e=r(72),i=r(30),o=r(116).f;t.exports=function(t){return function(n){for(var r,u=i(n),c=e(u),f=c.length,a=0,s=[];f>a;)o.call(u,r=c[a++])&&s.push(t?[r,u[r]]:u[r]);return s}}},function(t,n,r){var e=r(71),i=r(125),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(82).trim;t.exports=1/e(r(150)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(82).trim,o=r(150),u=/^[\-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var e=r(16),i=r(149),o=r(46);t.exports=function(t,n,r,u){var c=String(o(t)),f=c.length,a=void 0===r?" ":String(r),s=e(n);if(s<=f||""==a)return c;var l=s-f,h=i.call(a,Math.ceil(l/a.length));return h.length>l&&(h=h.slice(0,l)),u?h+c:c+h}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(this,t);return n&&n.v},set:function(t,n){return e.def(this,0===t?0:t,n)}},e,!0)},function(t,n,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(120)})},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var e,i=r(48)(0),o=r(28),u=r(65),c=r(172),f=r(166),a=r(6),s=u.getWeak,l=Object.isExtensible,h=f.ufstore,v={},p=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},d={get:function(t){if(a(t)){var n=s(t);return!0===n?h(this).get(t):n?n[this._i]:void 0}},set:function(t,n){return f.def(this,t,n)}},y=t.exports=r(118)("WeakMap",p,d,f,!0,!0);7!=(new y).set((Object.freeze||Object)(v),7).get(v)&&(e=f.getConstructor(p),c(e.prototype,d),u.NEED=!0,i(["delete","has","get","set"],function(t){var n=y.prototype,r=n[t];o(n,t,function(n,i){if(a(n)&&!l(n)){this._f||(this._f=new e);var o=this._f[t](n,i);return"set"==t?this:o}return r.call(this,n,i)})}))},,,,function(t,n){"use strict";function r(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")})}if(yiliaConfig&&yiliaConfig.toc_hide_index){document.querySelectorAll(".toc-number").forEach(function(t){t.style.display="none"})}var n=document.querySelector("#js-aboutme");n&&0!==n.length&&(n.innerHTML=n.innerText)}t.exports={init:r}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n){var r=/\/|index.html/g;return t.replace(r,"")===n.replace(r,"")}function o(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var o=t[r];i(n,o.getAttribute("href"))&&(0,h.default)(o,"active")}}function u(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}function c(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}function f(t,n,r,e,i){var o=u(t),f=c(t)-n;if(f-r<=i){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,d.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(r||f)+"px",a.style.left=o+"px",a.style.zIndex=e||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");f(t,document.body.scrollTop,-63,2,0),f(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}var l=r(156),h=e(l),v=r(157),p=(e(v),r(382)),d=e(p),y=r(128),g=e(y),b=r(190),m=e(b),x=r(129);(function(){g.default.versions.mobile&&window.screen.width<800&&(o(),s())})(),(0,x.addLoadEvent)(function(){m.default.init()}),t.exports={}},,,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object[e](t,n,{writable:!0,configurable:!0,value:r})}if(r(381),r(391),r(198),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},,,function(t,n,r){r(210),t.exports=r(52).RegExp.escape},,,,function(t,n,r){var e=r(6),i=r(138),o=r(7)("species");t.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},function(t,n,r){var e=r(202);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(2),i=r(50),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),t!=o)}},function(t,n,r){var e=r(72),i=r(125),o=r(116);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){var e=r(72),i=r(30);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){"use strict";var e=r(208),i=r(121),o=r(26);t.exports=function(){for(var t=o(this),n=arguments.length,r=Array(n),u=0,c=e._,f=!1;n>u;)(r[u]=arguments[u++])===c&&(f=!0);return function(){var e,o=this,u=arguments.length,a=0,s=0;if(!f&&!u)return i(t,r,o);if(e=r.slice(),f)for(;n>a;a++)e[a]===c&&(e[a]=arguments[s++]);for(;u>s;)e.push(arguments[s++]);return i(t,e,o)}}},function(t,n,r){t.exports=r(3)},function(t,n){t.exports=function(t,n){var r=n===Object(n)?function(t){return n[t]}:n;return function(n){return String(n).replace(t,r)}}},function(t,n,r){var e=r(1),i=r(209)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(160)}),r(78)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(48)(4);e(e.P+e.F*!r(47)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(130)}),r(78)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(48)(2);e(e.P+e.F*!r(47)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(0),o=r(47)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(53),i=r(1),o=r(17),u=r(169),c=r(137),f=r(16),a=r(131),s=r(154);i(i.S+i.F*!r(123)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,i,l,h=o(t),v="function"==typeof this?this:Array,p=arguments.length,d=p>1?arguments[1]:void 0,y=void 0!==d,g=0,b=s(h);if(y&&(d=e(d,p>2?arguments[2]:void 0,2)),void 0==b||v==Array&&c(b))for(n=f(h.length),r=new v(n);n>g;g++)a(r,g,y?d(h[g],g):h[g]);else for(l=b.call(h),r=new v;!(i=l.next()).done;g++)a(r,g,y?u(l,d,[i.value,g],!0):i.value);return r.length=g,r}})},function(t,n,r){"use strict";var e=r(1),i=r(117)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(47)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(138)})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=[].join;e(e.P+e.F*(r(115)!=Object||!r(47)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=r(67),u=r(16),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(47)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(arguments.length>1&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);e>=0;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(1);e(e.P+e.F*!r(47)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(131);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(135),o=r(45),u=r(75),c=r(16),f=[].slice;e(e.P+e.F*r(4)(function(){i&&f.call(i)}),"Array",{slice:function(t,n){var r=c(this.length),e=o(this);if(n=void 0===n?r:n,"Array"==e)return f.call(this,t,n);for(var i=u(t,r),a=u(n,r),s=c(a-i),l=Array(s),h=0;h<s;h++)l[h]="String"==e?this.charAt(i+h):this[i+h];return l}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(3);e(e.P+e.F*!r(47)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(26),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(47)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(74)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=Date.prototype.getTime,u=function(t){return t>9?t:"0"+t};e(e.P+e.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){
if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":n>9999?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(r>99?r:"0"+u(r))+"Z"}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(27)(i,e,r(204))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(28)(e,o,function(){var t=c.call(this);return t===t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(163)})},function(t,n,r){"use strict";var e=r(6),i=r(32),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(11).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(11).f,i=r(66),o=r(24),u=Function.prototype,c="name",f=Object.isExtensible||function(){return!0};c in u||r(10)&&e(u,c,{configurable:!0,get:function(){try{var t=this,n=(""+t).match(/^\s*function ([^ (]*)/)[1];return o(t,c)||!f(t)||e(t,c,i(5,n)),n}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(171),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=r(1),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:e})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(142);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(141);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1),i=r(142),o=Math.pow,u=o(2,-52),c=o(2,-23),f=o(2,127)*(2-c),a=o(2,-126),s=function(t){return t+1/u-1/u};e(e.S,"Math",{fround:function(t){var n,r,e=Math.abs(t),o=i(t);return e<a?o*s(e/a/c)*a*c:(n=(1+c/u)*e,r=n-(n-e),r>f||r!=r?o*(1/0):o*r)}})},function(t,n,r){var e=r(1),i=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,o=0,u=0,c=arguments.length,f=0;u<c;)r=i(arguments[u++]),f<r?(e=f/r,o=o*e*e+1,f=r):r>0?(e=r/f,o+=e*e):o+=r;return f===1/0?1/0:f*Math.sqrt(o)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(171)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(142)})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(45),u=r(136),c=r(50),f=r(4),a=r(71).f,s=r(31).f,l=r(11).f,h=r(82).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(70)(y))==v,b="trim"in String.prototype,m=function(t){var n=c(t,!1);if("string"==typeof n&&n.length>2){n=b?n.trim():h(n,3);var r,e,i,o=n.charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,f=n.slice(2),a=0,s=f.length;a<s;a++)if((u=f.charCodeAt(a))<48||u>i)return NaN;return parseInt(f,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?f(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(m(n)),r,p):m(n)};for(var x,w=r(10)?a(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)i(d,x=w[S])&&!i(p,x)&&l(p,x,s(d,x));p.prototype=y,y.constructor=p,r(28)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(168)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(168),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(178);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),i=r(67),o=r(159),u=r(149),c=1..toFixed,f=Math.floor,a=[0,0,0,0,0,0],s="Number.toFixed: incorrect invocation!",l="0",h=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*a[r],a[r]=e%1e7,e=f(e/1e7)},v=function(t){for(var n=6,r=0;--n>=0;)r+=a[n],a[n]=f(r/t),r=r%t*1e7},p=function(){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==a[t]){var r=String(a[t]);n=""===n?r:n+u.call(l,7-r.length)+r}return n},d=function(t,n,r){return 0===n?r:n%2==1?d(t,n-1,r*t):d(t*t,n/2,r)},y=function(t){for(var n=0,r=t;r>=4096;)n+=12,r/=4096;for(;r>=2;)n+=1,r/=2;return n};e(e.P+e.F*(!!c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){c.call({})})),"Number",{toFixed:function(t){var n,r,e,c,f=o(this,s),a=i(t),g="",b=l;if(a<0||a>20)throw RangeError(s);if(f!=f)return"NaN";if(f<=-1e21||f>=1e21)return String(f);if(f<0&&(g="-",f=-f),f>1e-21)if(n=y(f*d(2,69,1))-69,r=n<0?f*d(2,-n,1):f/d(2,n,1),r*=4503599627370496,(n=52-n)>0){for(h(0,r),e=a;e>=7;)h(1e7,0),e-=7;for(h(d(10,e,1),0),e=n-1;e>=23;)v(1<<23),e-=23;v(1<<e),h(1,1),v(2),b=p()}else h(0,r),h(1<<-n,0),b=p()+u.call(l,a);return a>0?(c=b.length,b=g+(c<=a?"0."+u.call(l,a-c)+b:b.slice(0,c-a)+"."+b.slice(c-a))):b=g+b,b}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(159),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(172)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(70)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperties:r(173)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("freeze",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(30),i=r(31).f;r(49)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(49)("getOwnPropertyNames",function(){return r(174).f})},function(t,n,r){var e=r(17),i=r(32);r(49)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6);r(49)("isExtensible",function(t){return function(n){return!!e(n)&&(!t||t(n))}})},function(t,n,r){var e=r(6);r(49)("isFrozen",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(6);r(49)("isSealed",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(180)})},function(t,n,r){var e=r(17),i=r(72);r(49)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("preventExtensions",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("seal",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(144).set})},function(t,n,r){"use strict";var e=r(114),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(28)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(178);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u=r(69),c=r(3),f=r(53),a=r(114),s=r(1),l=r(6),h=r(26),v=r(68),p=r(79),d=r(146),y=r(151).set,g=r(143)(),b="Promise",m=c.TypeError,x=c.process,w=c[b],x=c.process,S="process"==a(x),_=function(){},O=!!function(){try{var t=w.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(_,_)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(_)instanceof n}catch(t){}}(),E=function(t,n){return t===n||t===w&&n===o},P=function(t){var n;return!(!l(t)||"function"!=typeof(n=t.then))&&n},j=function(t){return E(w,t)?new F(t):new i(t)},F=i=function(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw m("Bad Promise constructor");n=t,r=e}),this.resolve=h(n),this.reject=h(r)},M=function(t){try{t()}catch(t){return{error:t}}},A=function(t,n){if(!t._n){t._n=!0;var r=t._c;g(function(){for(var e=t._v,i=1==t._s,o=0;r.length>o;)!function(n){var r,o,u=i?n.ok:n.fail,c=n.resolve,f=n.reject,a=n.domain;try{u?(i||(2==t._h&&I(t),t._h=1),!0===u?r=e:(a&&a.enter(),r=u(e),a&&a.exit()),r===n.promise?f(m("Promise-chain cycle")):(o=P(r))?o.call(r,c,f):c(r)):f(e)}catch(t){f(t)}}(r[o++]);t._c=[],t._n=!1,n&&!t._h&&N(t)})}},N=function(t){y.call(c,function(){var n,r,e,i=t._v;if(T(t)&&(n=M(function(){S?x.emit("unhandledRejection",i,t):(r=c.onunhandledrejection)?r({promise:t,reason:i}):(e=c.console)&&e.error&&e.error("Unhandled promise rejection",i)}),t._h=S||T(t)?2:1),t._a=void 0,n)throw n.error})},T=function(t){if(1==t._h)return!1;for(var n,r=t._a||t._c,e=0;r.length>e;)if(n=r[e++],n.fail||!T(n.promise))return!1;return!0},I=function(t){y.call(c,function(){var n;S?x.emit("rejectionHandled",t):(n=c.onrejectionhandled)&&n({promise:t,reason:t._v})})},k=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),A(n,!0))},L=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw m("Promise can't be resolved itself");(n=P(t))?g(function(){var e={_w:r,_d:!1};try{n.call(t,f(L,e,1),f(k,e,1))}catch(t){k.call(e,t)}}):(r._v=t,r._s=1,A(r,!1))}catch(t){k.call({_w:r,_d:!1},t)}}};O||(w=function(t){v(this,w,b,"_h"),h(t),e.call(this);try{t(f(L,this,1),f(k,this,1))}catch(t){k.call(this,t)}},e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},e.prototype=r(73)(w.prototype,{then:function(t,n){var r=j(d(this,w));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=S?x.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&A(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),F=function(){var t=new e;this.promise=t,this.resolve=f(L,t,1),this.reject=f(k,t,1)}),s(s.G+s.W+s.F*!O,{Promise:w}),r(81)(w,b),r(74)(b),o=r(52)[b],s(s.S+s.F*!O,b,{reject:function(t){var n=j(this);return(0,n.reject)(t),n.promise}}),s(s.S+s.F*(u||!O),b,{resolve:function(t){if(t instanceof w&&E(t.constructor,this))return t;var n=j(this);return(0,n.resolve)(t),n.promise}}),s(s.S+s.F*!(O&&r(123)(function(t){w.all(t).catch(_)})),b,{all:function(t){var n=this,r=j(n),e=r.resolve,i=r.reject,o=M(function(){var r=[],o=0,u=1;p(t,!1,function(t){var c=o++,f=!1;r.push(void 0),u++,n.resolve(t).then(function(t){f||(f=!0,r[c]=t,--u||e(r))},i)}),--u||e(r)});return o&&i(o.error),r.promise},race:function(t){var n=this,r=j(n),e=r.reject,i=M(function(){p(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i&&e(i.error),r.promise}})},function(t,n,r){var e=r(1),i=r(26),o=r(2),u=(r(3).Reflect||{}).apply,c=Function.apply;e(e.S+e.F*!r(4)(function(){u(function(){})}),"Reflect",{apply:function(t,n,r){var e=i(t),f=o(r);return u?u(e,n,f):c.call(e,n,f)}})},function(t,n,r){var e=r(1),i=r(70),o=r(26),u=r(2),c=r(6),f=r(4),a=r(163),s=(r(3).Reflect||{}).construct,l=f(function(){function t(){}return!(s(function(){},[],t)instanceof t)}),h=!f(function(){s(function(){})});e(e.S+e.F*(l||h),"Reflect",{construct:function(t,n){o(t),u(n);var r=arguments.length<3?t:o(arguments[2]);if(h&&!l)return s(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(a.apply(t,e))}var f=r.prototype,v=i(c(f)?f:Object.prototype),p=Function.apply.call(t,v,n);return c(p)?p:v}})},function(t,n,r){var e=r(11),i=r(1),o=r(2),u=r(50);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(31).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(139)(o,"Object",function(){var t,n=this,r=n._k;do{if(n._i>=r.length)return{value:void 0,done:!0}}while(!((t=r[n._i++])in n._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(31),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(32),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){function e(t,n){var r,c,s=arguments.length<3?t:arguments[2];return a(t)===s?t[n]:(r=i.f(t,n))?u(r,"value")?r.value:void 0!==r.get?r.get.call(s):void 0:f(c=o(t))?e(c,n,s):void 0}var i=r(31),o=r(32),u=r(24),c=r(1),f=r(6),a=r(2);c(c.S,"Reflect",{get:e})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(177)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(144);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){function e(t,n,r){var f,h,v=arguments.length<4?t:arguments[3],p=o.f(s(t),n);if(!p){if(l(h=u(t)))return e(h,n,r,v);p=a(0)}return c(p,"value")?!(!1===p.writable||!l(v)||(f=o.f(v,n)||a(0),f.value=r,i.f(v,n,f),0)):void 0!==p.set&&(p.set.call(v,r),!0)}var i=r(11),o=r(31),u=r(32),c=r(24),f=r(1),a=r(66),s=r(2),l=r(6);f(f.S,"Reflect",{set:e})},function(t,n,r){var e=r(3),i=r(136),o=r(11).f,u=r(71).f,c=r(122),f=r(120),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(10)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),o=void 0===n;return!r&&e&&t.constructor===a&&o?t:i(p?new s(e&&!o?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&o?f.call(t):n),r?this:l,a)};for(var d=u(s),y=0;d.length>y;)!function(t){t in a||o(a,t,{configurable:!0,get:function(){return s[t]},set:function(n){s[t]=n}})}(d[y++]);l.constructor=a,a.prototype=l,r(28)(e,"RegExp",a)}r(74)("RegExp")},function(t,n,r){r(119)("match",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("replace",2,function(t,n,r){return[function(e,i){"use strict";var o=t(this),u=void 0==e?void 0:e[n];return void 0!==u?u.call(e,o,i):r.call(String(o),e,i)},r]})},function(t,n,r){r(119)("search",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("split",2,function(t,n,e){"use strict";var i=r(122),o=e,u=[].push,c="split",f="length",a="lastIndex";if("c"=="abbc"[c](/(b)*/)[1]||4!="test"[c](/(?:)/,-1)[f]||2!="ab"[c](/(?:ab)*/)[f]||4!="."[c](/(.?)(.?)/)[f]||"."[c](/()()/)[f]>1||""[c](/.?/)[f]){var s=void 0===/()??/.exec("")[1];e=function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!i(t))return o.call(r,t,n);var e,c,l,h,v,p=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=void 0===n?4294967295:n>>>0,b=new RegExp(t.source,d+"g");for(s||(e=new RegExp("^"+b.source+"$(?!\\s)",d));(c=b.exec(r))&&!((l=c.index+c[0][f])>y&&(p.push(r.slice(y,c.index)),!s&&c[f]>1&&c[0].replace(e,function(){for(v=1;v<arguments[f]-2;v++)void 0===arguments[v]&&(c[v]=void 0)}),c[f]>1&&c.index<r[f]&&u.apply(p,c.slice(1)),h=c[0][f],y=l,p[f]>=g));)b[a]===c.index&&b[a]++;return y===r[f]?!h&&b.test("")||p.push(""):p.push(r.slice(y)),p[f]>g?p.slice(0,g):p}}else"0"[c](void 0,0)[f]&&(e=function(t,n){return void 0===t&&0===n?[]:o.call(this,t,n)});return[function(r,i){var o=t(this),u=void 0==r?void 0:r[n];return void 0!==u?u.call(r,o,i):e.call(String(o),r,i)},e]})},function(t,n,r){"use strict";r(184);var e=r(2),i=r(120),o=r(10),u="toString",c=/./[u],f=function(t){r(28)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(29)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},function(t,n,r){"use strict";r(29)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(29)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(29)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="endsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{endsWith:function(t){var n=o(this,t,u),r=arguments.length>1?arguments[1]:void 0,e=i(n.length),f=void 0===r?e:Math.min(i(r),e),a=String(t);return c?c.call(n,a,f):n.slice(f-a.length,f)===a}})},function(t,n,r){"use strict";r(29)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(29)("fontcolor",function(t){return function(n){return t(this,"font","color",n)}})},function(t,n,r){"use strict";r(29)("fontsize",function(t){return function(n){return t(this,"font","size",n)}})},function(t,n,r){var e=r(1),i=r(75),o=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,u=0;e>u;){if(n=+arguments[u++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?o(n):o(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(148),o="includes";e(e.P+e.F*r(134)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(29)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(147)(!0);r(140)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(29)("link",function(t){return function(n){return t(this,"a","href",n)}})},function(t,n,r){var e=r(1),i=r(30),o=r(16);e(e.S,"String",{raw:function(t){for(var n=i(t.raw),r=o(n.length),e=arguments.length,u=[],c=0;r>c;)u.push(String(n[c++])),c<e&&u.push(String(arguments[c]));return u.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(149)})},function(t,n,r){"use strict";r(29)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="startsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(29)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(29)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(29)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(82)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(10),u=r(1),c=r(28),f=r(65).KEY,a=r(4),s=r(126),l=r(81),h=r(76),v=r(7),p=r(182),d=r(153),y=r(206),g=r(205),b=r(138),m=r(2),x=r(30),w=r(50),S=r(66),_=r(70),O=r(174),E=r(31),P=r(11),j=r(72),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(71).f=O.f=Z,r(116).f=X,r(125).f=tt,o&&!r(69)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(27)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(127),o=r(152),u=r(2),c=r(75),f=r(16),a=r(6),s=r(3).ArrayBuffer,l=r(146),h=o.ArrayBuffer,v=o.DataView,p=i.ABV&&s.isView,d=h.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(s!==h),{ArrayBuffer:h}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return p&&p(t)||a(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(u(this),t);for(var r=u(this).byteLength,e=c(t,r),i=c(void 0===n?r:n,r),o=new(l(this,h))(f(i-e)),a=new v(this),s=new v(o),p=0;e<i;)s.setUint8(p++,a.getUint8(e++));return o}}),r(74)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(127).ABV,{DataView:r(152).DataView})},function(t,n,r){r(55)("Float32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Float64",8,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}},!0)},function(t,n,r){"use strict";var e=r(166);r(118)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(117)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)("includes")},function(t,n,r){var e=r(1),i=r(143)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(165)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o+(e>>>0)+((i&u|(i|u)&~(i+u>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>16,f=i>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>16)+((o*f>>>0)+(a&r)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o-(e>>>0)-((~i&u|~(i^u)&i-u>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>>16,f=i>>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>>16)+((o*f>>>0)+(a&r)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(176)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),i=r(177),o=r(30),u=r(31),c=r(131);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r=o(t),e=u.f,f=i(r),a={},s=0;f.length>s;)c(a,n=f[s++],e(r,n));return a}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(176)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),i=r(3),o=r(52),u=r(143)(),c=r(7)("observable"),f=r(26),a=r(2),s=r(68),l=r(73),h=r(27),v=r(79),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},b=function(t){g(t)||(t._o=void 0,y(t))},m=function(t,n){a(t),this._c=void 0,this._o=t,t=new x(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};m.prototype=l({},{unsubscribe:function(){b(this)}});var x=function(t){this._s=t};x.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{b(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var w=function(t){s(this,w,"Observable","_f")._f=f(t)};l(w.prototype,{subscribe:function(t){return new m(t,this._f)},forEach:function(t){var n=this;return new(o.Promise||i.Promise)(function(r,e){f(t);var i=n.subscribe({next:function(n){try{return t(n)}catch(t){e(t),i.unsubscribe()}},error:e,complete:r})})}}),l(w,{from:function(t){var n="function"==typeof this?this:w,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return u(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,r=Array(n);t<n;)r[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var n=!1;return u(function(){if(!n){for(var e=0;e<r.length;++e)if(t.next(r[e]),n)return;t.complete()}}),function(){n=!0}})}}),h(w.prototype,c,function(){return this}),e(e.G,{Observable:w}),r(74)("Observable")},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.map,c=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:o(arguments[2]),e=u(i(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var f=c.get(n);return f.delete(r),!!f.size||c.delete(n)}})},function(t,n,r){var e=r(185),i=r(161),o=r(54),u=r(2),c=r(32),f=o.keys,a=o.key,s=function(t,n){var r=f(t,n),o=c(t);if(null===o)return r;var u=s(o,n);return u.length?r.length?i(new e(r.concat(u))):u:r};o.exp({getMetadataKeys:function(t){return s(u(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){
return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(26),u=e.key,c=e.set;e.exp({metadata:function(t,n){return function(r,e){c(t,n,(void 0!==e?i:o)(r),u(e))}}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(165)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(46),o=r(16),u=r(122),c=r(120),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(139)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(82)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(82)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(153)("asyncIterator")},function(t,n,r){r(153)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){for(var e=r(155),i=r(28),o=r(3),u=r(27),c=r(80),f=r(7),a=f("iterator"),s=f("toStringTag"),l=c.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],v=0;v<5;v++){var p,d=h[v],y=o[d],g=y&&y.prototype;if(g){g[a]||u(g,a,l),g[s]||u(g,s,d),c[d]=l;for(p in e)g[p]||i(g,p,e[p],!0)}}},function(t,n,r){var e=r(1),i=r(151);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=r(121),u=r(207),c=e.navigator,f=!!c&&/MSIE .\./.test(c.userAgent),a=function(t){return f?function(n,r){return t(o(u,[].slice.call(arguments,2),"function"==typeof n?n:Function(n)),r)}:t};i(i.G+i.B+i.F*f,{setTimeout:a(e.setTimeout),setInterval:a(e.setInterval)})},function(t,n,r){r(330),r(269),r(271),r(270),r(273),r(275),r(280),r(274),r(272),r(282),r(281),r(277),r(278),r(276),r(268),r(279),r(283),r(284),r(236),r(238),r(237),r(286),r(285),r(256),r(266),r(267),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(317),r(322),r(329),r(320),r(312),r(313),r(318),r(323),r(325),r(308),r(309),r(310),r(311),r(314),r(315),r(316),r(319),r(321),r(324),r(326),r(327),r(328),r(231),r(233),r(232),r(235),r(234),r(220),r(218),r(224),r(221),r(227),r(229),r(217),r(223),r(214),r(228),r(212),r(226),r(225),r(219),r(222),r(211),r(213),r(216),r(215),r(230),r(155),r(302),r(307),r(184),r(303),r(304),r(305),r(306),r(287),r(183),r(185),r(186),r(342),r(331),r(332),r(337),r(340),r(341),r(335),r(338),r(336),r(339),r(333),r(334),r(288),r(289),r(290),r(291),r(292),r(295),r(293),r(294),r(296),r(297),r(298),r(299),r(301),r(300),r(343),r(369),r(372),r(371),r(373),r(374),r(370),r(375),r(376),r(354),r(357),r(353),r(351),r(352),r(355),r(356),r(346),r(368),r(377),r(345),r(347),r(349),r(348),r(350),r(359),r(360),r(362),r(361),r(364),r(363),r(365),r(366),r(367),r(344),r(358),r(380),r(379),r(378),t.exports=r(52)},function(t,n){function r(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}t.exports=r},,,,,,,,,function(t,n,r){(function(n,r){!function(n){"use strict";function e(t,n,r,e){var i=n&&n.prototype instanceof o?n:o,u=Object.create(i.prototype),c=new p(e||[]);return u._invoke=s(t,r,c),u}function i(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function u(){}function c(){}function f(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function a(t){function n(r,e,o,u){var c=i(t[r],t,e);if("throw"!==c.type){var f=c.arg,a=f.value;return a&&"object"==typeof a&&m.call(a,"__await")?Promise.resolve(a.__await).then(function(t){n("next",t,o,u)},function(t){n("throw",t,o,u)}):Promise.resolve(a).then(function(t){f.value=t,o(f)},u)}u(c.arg)}function e(t,r){function e(){return new Promise(function(e,i){n(t,r,e,i)})}return o=o?o.then(e,e):e()}"object"==typeof r&&r.domain&&(n=r.domain.bind(n));var o;this._invoke=e}function s(t,n,r){var e=P;return function(o,u){if(e===F)throw new Error("Generator is already running");if(e===M){if("throw"===o)throw u;return y()}for(r.method=o,r.arg=u;;){var c=r.delegate;if(c){var f=l(c,r);if(f){if(f===A)continue;return f}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(e===P)throw e=M,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);e=F;var a=i(t,n,r);if("normal"===a.type){if(e=r.done?M:j,a.arg===A)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(e=M,r.method="throw",r.arg=a.arg)}}}function l(t,n){var r=t.iterator[n.method];if(r===g){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=g,l(t,n),"throw"===n.method))return A;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var e=i(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,A;var o=e.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=g),n.delegate=null,A):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function h(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function v(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var n=t[w];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function n(){for(;++r<t.length;)if(m.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=g,n.done=!0,n};return e.next=e}}return{next:y}}function y(){return{value:g,done:!0}}var g,b=Object.prototype,m=b.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},w=x.iterator||"@@iterator",S=x.asyncIterator||"@@asyncIterator",_=x.toStringTag||"@@toStringTag",O="object"==typeof t,E=n.regeneratorRuntime;if(E)return void(O&&(t.exports=E));E=n.regeneratorRuntime=O?t.exports:{},E.wrap=e;var P="suspendedStart",j="suspendedYield",F="executing",M="completed",A={},N={};N[w]=function(){return this};var T=Object.getPrototypeOf,I=T&&T(T(d([])));I&&I!==b&&m.call(I,w)&&(N=I);var k=c.prototype=o.prototype=Object.create(N);u.prototype=k.constructor=c,c.constructor=u,c[_]=u.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===u||"GeneratorFunction"===(n.displayName||n.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,_ in t||(t[_]="GeneratorFunction")),t.prototype=Object.create(k),t},E.awrap=function(t){return{__await:t}},f(a.prototype),a.prototype[S]=function(){return this},E.AsyncIterator=a,E.async=function(t,n,r,i){var o=new a(e(t,n,r,i));return E.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},f(k),k[_]="Generator",k.toString=function(){return"[object Generator]"},E.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var e=n.pop();if(e in t)return r.value=e,r.done=!1,r}return r.done=!0,r}},E.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(v),!t)for(var n in this)"t"===n.charAt(0)&&m.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){function n(n,e){return o.type="throw",o.arg=t,r.next=n,e&&(r.method="next",r.arg=g),!!e}if(this.done)throw t;for(var r=this,e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=m.call(i,"catchLoc"),c=m.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&m.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),A},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),v(r),A}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;v(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:d(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=g),A}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(n,function(){return this}(),r(158))}])</script><script src="/./main.0cf68a.js"></script><script>!function(){!function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)}("/slider.e37972.js")}()</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">æ‰€æœ‰æ–‡ç« </a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">å‹é“¾</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">å…³äºæˆ‘</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find somethingâ€¦">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            ç¼ºå¤±æ¨¡å—ã€‚<br/>1ã€è¯·ç¡®ä¿nodeç‰ˆæœ¬å¤§äº6.2<br/>2ã€åœ¨åšå®¢æ ¹ç›®å½•ï¼ˆæ³¨æ„ä¸æ˜¯yiliaæ ¹ç›®å½•ï¼‰æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br/> npm i hexo-generator-json-content --save<br/><br/>
            3ã€åœ¨æ ¹ç›®å½•_config.ymlé‡Œæ·»åŠ é…ç½®ï¼š
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>å‹æƒ…é“¾æ¥1</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>å‹æƒ…é“¾æ¥2</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>å‹æƒ…é“¾æ¥3</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>å‹æƒ…é“¾æ¥4</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>å‹æƒ…é“¾æ¥5</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>å‹æƒ…é“¾æ¥6</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">å¾ˆæƒ­æ„§&lt;br&gt;&lt;br&gt;åªåšäº†ä¸€ç‚¹å¾®å°çš„å·¥ä½œ&lt;br&gt;è°¢è°¢å¤§å®¶</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>